/*! For license information please see main.31aff0ce.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),b=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function V(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case b:return"Portal";case E:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Z(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ae(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,Ie=null,xe=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),be(e.stateNode,e.type,t))}}function Se(e){Ie?xe?xe.push(e):xe=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=xe;if(xe=Ie=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function _e(e,t){return e(t)}function Ce(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return _e(e,t,n)}finally{Ne=!1,(null!==Ie||null!==xe)&&(Ce(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Me(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Fe=null,Ue=!1,Be=null,Ve={onError:function(e){Le=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Le=!1,Fe=null,Me.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qe(i),e;if(o===r)return Qe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ze=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function At(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,It,xt,Et,St=!1,Tt=[],_t=null,Ct=null,Nt=null,Dt=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ae=r,n.target.dispatchEvent(r),Ae=null,t.shift()}return!0}function Bt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){St=!1,null!==_t&&Ut(_t)&&(_t=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),Dt.forEach(Bt),Rt.forEach(Bt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&jt(_t,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var zt=A.ReactCurrentBatchConfig,Qt=!0;function Gt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Wt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Kt(e,t,n,r){if(Qt){var i=Yt(e,t,n,r);if(null===i)Qr(e,t,r,Ht,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return _t=Lt(_t,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Qr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Qr(e,t,r,null,n)}}var Ht=null;function Yt(e,t,n,r){if(Ht=null,null!==(e=gi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Xt=null,$t=null;function en(){if($t)return $t;var e,t,n=Xt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),An=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function En(){return xn}var Sn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),_n=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Dn),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Mn,Fn=l&&(!Pn||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),Bn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Hn(e){Ur(e,0)}function Yn(e){if(K(Ai(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(l){var Xn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Xn=$n}else Xn=!1;Zn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,we(e)),De(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function Ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==H(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Ir={},xr={};function Er(e){if(Ir[e])return Ir[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return Ir[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),_r=Er("animationstart"),Cr=Er("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Pr=Dr[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(_r,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Fe;Le=!1,Fe=null,Ue||(Ue=!0,Be=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Be,Ue=!1,Be=null,e}function Br(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Sr:case Tr:case _r:s=mn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=_n}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===Ae||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=_n,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:Ai(s),d=null==c?u:Ai(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?Ai(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Jn;else if(Qn(u))if(Zn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?Ai(r):window,e){case"focusin":(Qn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,Ar(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Ar(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in(Zt=i)?Zt.value:Zt.textContent,qn=!0)),0<(m=Wr(r,k)).length&&(k=new An(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Un);case"textInput":return(e=t.data)===Un&&Bn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),$t=Xt=Zt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new An("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ai(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var bi=[],Ii=-1;function xi(e){return{current:e}}function Ei(e){0>Ii||(e.current=bi[Ii],bi[Ii]=null,Ii--)}function Si(e,t){Ii++,bi[Ii]=e.current,e.current=t}var Ti={},_i=xi(Ti),Ci=xi(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ci),Ei(_i)}function Pi(e,t,n){if(_i.current!==Ti)throw Error(a(168));Si(_i,t),Si(Ci,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=_i.current,Si(_i,e),Si(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Mi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(_i),Si(_i,e)):Ei(Ci),Si(Ci,n)}var Ui=null,Bi=!1,Vi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Bi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke($e,qi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Qi=0,Gi=null,Wi=0,Ki=[],Hi=0,Yi=null,Ji=1,Zi="";function Xi(e,t){zi[Qi++]=Wi,zi[Qi++]=Gi,Gi=e,Wi=t}function $i(e,t,n){Ki[Hi++]=Ji,Ki[Hi++]=Zi,Ki[Hi++]=Yi,Yi=e;var r=Ji;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Zi=a+e}else Ji=1<<a|n<<i|r,Zi=e}function ea(e){null!==e.return&&(Xi(e,1),$i(e,1,0))}function ta(e){for(;e===Gi;)Gi=zi[--Qi],zi[Qi]=null,Wi=zi[--Qi],zi[Qi]=null;for(;e===Yi;)Yi=Ki[--Hi],Ki[Hi]=null,Zi=Ki[--Hi],Ki[Hi]=null,Ji=Ki[--Hi],Ki[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=A.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=xi(null),ga=null,ka=null,Aa=null;function wa(){Aa=ka=ga=null}function ba(e){var t=ma.current;Ei(ma),e._currentValue=t}function Ia(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xa(e,t){ga=e,Aa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Au=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function _a(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function Ma(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ba=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),Ma(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),Ma(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),Ma(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:_i.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Qa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ba,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:_i.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ba&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===I?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case b:return(t=Bc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:f(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return f(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=M(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===I){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ha(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Wa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===I?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Mc(o.type,o.key,o.props,null,r.mode,s)).ref=Wa(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(M(o))return y(r,a,o,s);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ja=Ya(!0),Za=Ya(!1),Xa={},$a=xi(Xa),eo=xi(Xa),to=xi(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si($a,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Si($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var uo=xi(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=A.ReactCurrentDispatcher,ho=A.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,Ao=0,wo=0;function bo(){throw Error(a(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,Ao=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==Ao;return Ao=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function _o(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(Au=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(Au=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,Au=!0),r=r.queue,Qo(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Bo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Mo(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ca(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function jo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Bo(t,n,a,r))}vo.flags|=e,i.memoizedState=Bo(1|t,n,a,r)}function zo(e,t){return jo(8390656,8,e,t)}function Qo(e,t){return qo(2048,8,e,t)}function Go(e,t){return qo(4,2,e,t)}function Wo(e,t){return qo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,Au=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=_a(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=_a(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ns.identifierPrefix;if(ia){var n=Zi;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=Ao++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Qo,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Zo,useReducer:Co,useRef:Vo,useState:function(){return Co(_o)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[Co(_o)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Jo,useContext:Ea,useEffect:Qo,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Zo,useReducer:No,useRef:Vo,useState:function(){return No(_o)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(_o)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=A.ReactCurrentOwner,Au=!1;function wu(e,t,n,r){t.child=null===e?Za(t,null,n,r):Ja(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return xa(t,i),r=xo(e,t,n,r,a,i),n=Eo(),null===e||Au?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function xu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(Au=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(Au=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ps,Os),Os|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ni:_i.current;return a=Di(t,a),xa(t,i),n=xo(e,t,n,r,a,i),r=Eo(),null===e||Au?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(Ri(n)){var a=!0;Li(t)}else a=!1;if(xa(t,i),null===t.stateNode)Qu(e,t),za(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Ri(n)?Ni:_i.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Qa(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||qa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Ri(n)?Ni:_i.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Qa(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Pu,Mu,Lu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Lu,e):Bu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),Au||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),rc(r,e,i,-1))}return yc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Hi++]=Ji,Ki[Hi++]=Zi,Ki[Hi++]=Yi,Ji=e.id,Zi=e.overflow,Yi=t),t=Bu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Bu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ia(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ku(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ku(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ku(t),null;case 3:return r=t.stateNode,io(),Ei(Ci),Ei(_i),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Ku(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ku(t),null}if(e=no($a.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Br(Mr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":J(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Br("scroll",r)}switch(n){case"input":W(r),$(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Br(Mr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Br("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ku(t),null;case 6:if(e&&null!=t.stateNode)Mu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ku(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ku(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ms&&(Ms=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ku(t),null);case 4:return io(),Ou(e,t),null===e&&qr(t.stateNode.containerInfo),Ku(t),null;case 10:return ba(t.type._context),Ku(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Ku(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Ms||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>zs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Ku(t),null}else 2*Ze()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Ku(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Ku(t),6&t.subtreeFlags&&(t.flags|=8192)):Ku(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ci),Ei(_i),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Mu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ju=!1,Zu=!1,Xu="function"===typeof WeakSet?WeakSet:Set,$u=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Zu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Zu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Zu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Zu=(r=Zu)||null!==n.memoizedState,ds(e,t,n),Zu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ec(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Z(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Ze())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Zu=(l=Zu)||f,ys(t,e),Zu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for($u=e,f=e.child;null!==f;){for(h=$u=f;null!==$u;){switch(p=(d=$u).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==p?(p.return=d,$u=p):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){$u=e,As(e,t,n)}function As(e,t,n){for(var r=0!==(1&e.mode);null!==$u;){var i=$u,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Zu;u=Ju;var c=Zu;if(Ju=o,(Zu=s)&&!c)for($u=i;null!==$u;)s=(o=$u).child,22===o.tag&&null!==o.memoizedState?Is(i):null!==s?(s.return=o,$u=s):Is(i);for(;null!==a;)$u=a,As(a,t,n),a=a.sibling;$u=i,Ju=u,Zu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$u=a):ws(e)}}function ws(e){for(;null!==$u;){var t=$u;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Zu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){$u=null;break}if(null!==(n=t.sibling)){n.return=t.return,$u=n;break}$u=t.return}}function bs(e){for(;null!==$u;){var t=$u;if(t===e){$u=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$u=n;break}$u=t.return}}function Is(e){for(;null!==$u;){var t=$u;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){$u=null;break}var u=t.sibling;if(null!==u){u.return=t.return,$u=u;break}$u=t.return}}var xs,Es=Math.ceil,Ss=A.ReactCurrentDispatcher,Ts=A.ReactCurrentOwner,_s=A.ReactCurrentBatchConfig,Cs=0,Ns=null,Ds=null,Rs=0,Os=0,Ps=xi(0),Ms=0,Ls=null,Fs=0,Us=0,Bs=0,Vs=null,js=null,qs=0,zs=1/0,Qs=null,Gs=!1,Ws=null,Ks=null,Hs=!1,Ys=null,Js=0,Zs=0,Xs=null,$s=-1,ec=0;function tc(){return 0!==(6&Cs)?Ze():-1!==$s?$s:$s=Ze()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rc(e,t,n,r){if(50<Zs)throw Zs=0,Xs=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Us|=n),4===Ms&&sc(e,Rs)),ic(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Ze()+500,Bi&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Bi=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Cs)&&qi()})),n=null;else{switch(At(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($s=-1,ec=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(Ns===e&&Rs===t||(Qs=null,zs=Ze()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,Cs=i,null!==Ds?t=0:(Ns=null,Rs=0,t=Ms)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ls,dc(e,0),sc(e,r),ic(e,Ze()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ls,dc(e,0),sc(e,r),ic(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,js,Qs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=qs+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,js,Qs),t);break}bc(e,js,Qs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,js,Qs),r);break}bc(e,js,Qs);break;default:throw Error(a(329))}}}return ic(e,Ze()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Bs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cs))throw Error(a(327));Ic();var t=ht(e,0);if(0===(1&t))return ic(e,Ze()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ls,dc(e,0),sc(e,t),ic(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,js,Qs),ic(e,Ze()),null}function lc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Ze()+500,Bi&&qi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Cs)&&Ic();var t=Cs;Cs|=1;var n=_s.transition,r=kt;try{if(_s.transition=null,kt=1,e)return e()}finally{kt=r,_s.transition=n,0===(6&(Cs=t))&&qi()}}function hc(){Os=Ps.current,Ei(Ps)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ei(Ci),Ei(_i),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:ba(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ds=e=Pc(e.current,null),Rs=Os=t,Ms=0,Ls=null,Bs=Us=Fs=0,js=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ds;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,Ao=0,Ts.current=null,null===n||null===n.return){Ms=1,Ls=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ms&&(Ms=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ks||!Ks.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(A){t=A,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function yc(){0!==Ms&&3!==Ms&&2!==Ms||(Ms=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Rs)}function mc(e,t){var n=Cs;Cs|=2;var r=vc();for(Ns===e&&Rs===t||(Qs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==Ds)throw Error(a(261));return Ns=null,Rs=0,Ms}function gc(){for(;null!==Ds;)Ac(Ds)}function kc(){for(;null!==Ds&&!Ye();)Ac(Ds)}function Ac(e){var t=xs(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):Ds=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Os)))return void(Ds=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Ms=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Ms&&(Ms=5)}function bc(e,t,n){var r=kt,i=_s.transition;try{_s.transition=null,kt=1,function(e,t,n,r){do{Ic()}while(null!==Ys);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ds=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Nc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_s.transition,_s.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ts.current=null,function(e,t){if(ei=Qt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Qt=!1,$u=t;null!==$u;)if(e=(t=$u).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$u=e;else for(;null!==$u;){t=$u;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var A=t.stateNode.containerInfo;1===A.nodeType?A.textContent="":9===A.nodeType&&A.documentElement&&A.removeChild(A.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$u=e;break}$u=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Qt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Je(),Cs=s,kt=u,_s.transition=o}else e.current=n;if(Hs&&(Hs=!1,Ys=e,Js=i),o=e.pendingLanes,0===o&&(Ks=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&Js)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xs?Zs++:(Zs=0,Xs=e):Zs=0,qi()}(e,t,n,r)}finally{_s.transition=i,kt=r}return null}function Ic(){if(null!==Ys){var e=At(Js),t=_s.transition,n=kt;try{if(_s.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Js=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,$u=e.current;null!==$u;){var o=$u,u=o.child;if(0!==(16&$u.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($u=l;null!==$u;){var f=$u;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,$u=h;else for(;null!==$u;){var d=(f=$u).sibling,p=f.return;if(os(f),f===l){$u=null;break}if(null!==d){d.return=p,$u=d;break}$u=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}$u=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,$u=u;else e:for(;null!==$u;){if(0!==(2048&(o=$u).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$u=g;break e}$u=o.return}}var k=e.current;for($u=k;null!==$u;){var A=(u=$u).child;if(0!==(2064&u.subtreeFlags)&&null!==A)A.return=u,$u=A;else e:for(u=k;null!==$u;){if(0!==(2048&(s=$u).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(b){Ec(s,s.return,b)}if(s===u){$u=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,$u=w;break e}$u=s.return}}if(Cs=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,_s.transition=t}}return!1}function xc(e,t,n){e=Pa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){t=Pa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ms||3===Ms&&(130023424&Rs)===Rs&&500>Ze()-qs?dc(e,0):Bs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ca(e,t))&&(mt(e,t,n),ic(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ke(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Lc(n.children,i,o,t);case x:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=Rc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case _:u=11;break e;case D:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Qc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),Ma(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)Au=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Au=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Si(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);Au=0!==(131072&e.flags)}else Au=!1,ia&&0!==(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qu(e,t),e=t.pendingProps;var i=Di(t,_i.current);xa(t,n),i=xo(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=_u(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Za(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ia(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Ia(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),Iu(e,t,r,i=ya(r.type,i),n);case 15:return xu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Qu(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,xa(t,n),za(t,r,i),Ga(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),fc((function(){Qc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Qc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Qc(null,e,null,null)})),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ze()),0===(6&Cs)&&(zs=Ze()+500,qi()))}break;case 13:fc((function(){var t=Ca(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},bt=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=Ca(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},xt=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=lc,Ce=fc;var tl={usingClientEntryPoint:!1,Events:[ki,Ai,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var A=k.prototype=new g;A.constructor=k,v(A,m.prototype),A.isPureReactComponent=!0;var w=Array.isArray,b=Object.prototype.hasOwnProperty,I={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:I.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+_(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+_(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+_(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function A(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,A(e),!v)if(null!==r(c))v=!0,O(b);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(A(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),A(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,x=!1,E=null,S=-1,T=5,_=-1;function C(){return!(t.unstable_now()-_<T)}function N(){if(null!==E){var e=t.unstable_now();_=e;var n=!0;try{n=E(!0,e)}finally{n?I():(x=!1,E=null)}}else x=!1}if("function"===typeof k)I=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=N,I=function(){R.postMessage(null)}}else I=function(){m(N,0)};function O(e){E=e,x||(x=!0,I())}function P(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(b))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".4ce2c4d5.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="wheres-waldo:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/where-is-waldo/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkwheres_waldo=self.webpackChunkwheres_waldo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return j},SDK_VERSION:function(){return tt},_DEFAULT_ENTRY_NAME:function(){return qe},_addComponent:function(){return We},_addOrOverwriteComponent:function(){return Ke},_apps:function(){return Qe},_clearComponents:function(){return Ze},_components:function(){return Ge},_getProvider:function(){return Ye},_registerComponent:function(){return He},_removeServiceInstance:function(){return Je},deleteApp:function(){return at},getApp:function(){return rt},getApps:function(){return it},initializeApp:function(){return nt},onLog:function(){return st},registerVersion:function(){return ut},setLogLevel:function(){return ct}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,n){return h=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},h.apply(null,arguments)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t=f();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,n)}}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function b(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t="function"===typeof Map?new Map:void 0;return x=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},x(e)}var E=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(E(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new T;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},T=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return b(n)}(x(Error)),_=function(e){return function(e){var t=E(e);return S.encodeByteArray(t,!0)}(e).replace(/\./g,"")},C=function(e){try{return S.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function N(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=N(e[n],t[n]));return e}var D=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},R=function(){try{return D()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/where-is-waldo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&C(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},O=function(){var e;return null===(e=R())||void 0===e?void 0:e.config},P=function(){function e(){var t=this;k(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return b(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function M(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function L(){var e,t=null===(e=R())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function F(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function U(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function B(){var e=M();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function V(){try{return"object"===typeof indexedDB}catch(e){return!1}}var j=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),q.prototype.create),a}return b(n)}(x(Error)),q=function(){function e(t,n,r){k(this,e),this.service=t,this.serviceName=n,this.errors=r}return b(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(z,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new j(n,a,t)}}]),e}();var z=/\{\$([^}]+)}/g;function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(W(u)&&W(s)){if(!G(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function W(e){return null!==e&&"object"===typeof e}function K(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function H(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Y(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function J(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(t,n){var r=this;k(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return b(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function X(){}function $(e){return e&&e._delegate?e._delegate:e}function ee(){ee=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(T([])));g&&g!==t&&n.call(g,a)&&(y=g);var k=p.prototype=h.prototype=Object.create(y);function A(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==v(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return _()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},A(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function te(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ne(e){return function(e){if(Array.isArray(e))return o(e)}(e)||te(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){re(a,r,i,o,u,"next",e)}function u(e){re(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ae=function(){function e(t,n,r){k(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return b(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),oe="[DEFAULT]",ue=function(){function e(t,n){k(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return b(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new P;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(s){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ne(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ne(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=g(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1];r===this.normalizeInstanceIdentifier(s)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch($v){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===oe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch($v){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return this.component?this.component.multipleInstances?e:oe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var se,ce,le=function(){function e(t){k(this,e),this.name=t,this.providers=new Map}return b(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ue(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),fe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ce||(ce={}));var he={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},de=ce.INFO,pe=(I(se={},ce.DEBUG,"log"),I(se,ce.VERBOSE,"log"),I(se,ce.INFO,"info"),I(se,ce.WARN,"warn"),I(se,ce.ERROR,"error"),se),ve=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=pe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ye=function(){function e(t){k(this,e),this.name=t,this._logLevel=de,this._logHandler=ve,this._userLogHandler=null,fe.push(this)}return b(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ce))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?he[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.DEBUG].concat(t)),this._logHandler.apply(this,[this,ce.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ce.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.INFO].concat(t)),this._logHandler.apply(this,[this,ce.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.WARN].concat(t)),this._logHandler.apply(this,[this,ce.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ce.ERROR].concat(t)),this._logHandler.apply(this,[this,ce.ERROR].concat(t))}}]),e}();function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke,Ae,we=function(e,t){return t.some((function(t){return e instanceof t}))};var be=new WeakMap,Ie=new WeakMap,xe=new WeakMap,Ee=new WeakMap,Se=new WeakMap;var Te={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ne(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _e(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ae||(Ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(De(this),n),Ne(be.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ne(e.apply(De(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[De(this),t].concat(r));return xe.set(a,t.sort?t.sort():[t]),Ne(a)}}function Ce(e){return"function"===typeof e?_e(e):(e instanceof IDBTransaction&&function(e){if(!Ie.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ie.set(e,t)}}(e),we(e,ke||(ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Te):e)}function Ne(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ne(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&be.set(t,e)})).catch((function(){})),Se.set(t,e),t}(e);if(Ee.has(e))return Ee.get(e);var t=Ce(e);return t!==e&&(Ee.set(e,t),Se.set(t,e)),t}var De=function(e){return Se.get(e)};var Re,Oe,Pe=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Le=new Map;function Fe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Le.get(t))return Le.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Me.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Pe.includes(n))){var a=function(){var e=ie(ee().mark((function e(t){var a,o,u,s,c,l,f=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Le.set(t,a),a}}}Te=function(e){return ge(ge({},e),{},{get:function(t,n,r){return Fe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fe(t,n)||e.has(t,n)}})}(Te);var Ue=function(){function e(t){k(this,e),this.container=t}return b(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Be="@firebase/app",Ve="0.9.7",je=new ye("@firebase/app"),qe="[DEFAULT]",ze=(I(Re={},Be,"fire-core"),I(Re,"@firebase/app-compat","fire-core-compat"),I(Re,"@firebase/analytics","fire-analytics"),I(Re,"@firebase/analytics-compat","fire-analytics-compat"),I(Re,"@firebase/app-check","fire-app-check"),I(Re,"@firebase/app-check-compat","fire-app-check-compat"),I(Re,"@firebase/auth","fire-auth"),I(Re,"@firebase/auth-compat","fire-auth-compat"),I(Re,"@firebase/database","fire-rtdb"),I(Re,"@firebase/database-compat","fire-rtdb-compat"),I(Re,"@firebase/functions","fire-fn"),I(Re,"@firebase/functions-compat","fire-fn-compat"),I(Re,"@firebase/installations","fire-iid"),I(Re,"@firebase/installations-compat","fire-iid-compat"),I(Re,"@firebase/messaging","fire-fcm"),I(Re,"@firebase/messaging-compat","fire-fcm-compat"),I(Re,"@firebase/performance","fire-perf"),I(Re,"@firebase/performance-compat","fire-perf-compat"),I(Re,"@firebase/remote-config","fire-rc"),I(Re,"@firebase/remote-config-compat","fire-rc-compat"),I(Re,"@firebase/storage","fire-gcs"),I(Re,"@firebase/storage-compat","fire-gcs-compat"),I(Re,"@firebase/firestore","fire-fst"),I(Re,"@firebase/firestore-compat","fire-fst-compat"),I(Re,"fire-js","fire-js"),I(Re,"firebase","fire-js-all"),Re),Qe=new Map,Ge=new Map;function We(e,t){try{e.container.addComponent(t)}catch(n){je.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ke(e,t){e.container.addOrOverwriteComponent(t)}function He(e){var t=e.name;if(Ge.has(t))return je.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ge.set(t,e);var n,r=g(Qe.values());try{for(r.s();!(n=r.n()).done;){We(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ye(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qe;Ye(e,t).clearInstance(n)}function Ze(){Ge.clear()}var Xe=(I(Oe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(Oe,"bad-app-name","Illegal App name: '{$appName}"),I(Oe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),I(Oe,"app-deleted","Firebase App named '{$appName}' already deleted"),I(Oe,"no-options","Need to provide options, when not being deployed to hosting via source."),I(Oe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),I(Oe,"invalid-log-argument","First argument to `onLog` must be null or a function."),I(Oe,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),I(Oe,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),I(Oe,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),I(Oe,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Oe),$e=new q("app","Firebase",Xe),et=function(){function e(t,n,r){var i=this;k(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ae("app",(function(){return i}),"PUBLIC"))}return b(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}]),e}(),tt="9.19.1";function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:qe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $e.create("bad-app-name",{appName:String(i)});if(n||(n=O()),!n)throw $e.create("no-options");var a=Qe.get(i);if(a){if(G(n,a.options)&&G(r,a.config))return a;throw $e.create("duplicate-app",{appName:i})}var o,u=new le(i),s=g(Ge.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new et(n,r,u);return Qe.set(i,l),l}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=Qe.get(e);if(!t&&e===qe)return nt();if(!t)throw $e.create("no-app",{appName:e});return t}function it(){return Array.from(Qe.values())}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Qe.has(n)){e.next=6;break}return Qe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t,n){var r,i=null!==(r=ze[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void je.warn(u.join(" "))}He(new ae("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function st(e,t){if(null!==e&&"function"!==typeof e)throw $e.create("invalid-log-argument");!function(e,t){var n,r=g(fe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=he[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ce[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ct(e){var t;t=e,fe.forEach((function(e){e.setLogLevel(t)}))}var lt="firebase-heartbeat-database",ft=1,ht="firebase-heartbeat-store",dt=null;function pt(){return dt||(dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ne(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ne(u.result),e.oldVersion,e.newVersion,Ne(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(lt,ft,{upgrade:function(e,t){if(0===t)e.createObjectStore(ht)}}).catch((function(e){throw $e.create("idb-open",{originalErrorMessage:e.message})}))),dt}function vt(e){return yt.apply(this,arguments)}function yt(){return yt=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt();case 3:return n=e.sent,e.abrupt("return",n.transaction(ht).objectStore(ht).get(kt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof j?je.warn(e.t0.message):(r=$e.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),je.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),yt.apply(this,arguments)}function mt(e,t){return gt.apply(this,arguments)}function gt(){return gt=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pt();case 3:return r=e.sent,i=r.transaction(ht,"readwrite"),a=i.objectStore(ht),e.next=8,a.put(n,kt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof j?je.warn(e.t0.message):(o=$e.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),je.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),gt.apply(this,arguments)}function kt(e){return"".concat(e.name,"!").concat(e.options.appId)}var At=function(){function e(t){var n=this;k(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Et(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return b(e,[{key:"triggerHeartbeat",value:function(){var e=ie(ee().mark((function e(){var t,n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=wt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=wt(),n=bt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=_(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wt(){return(new Date).toISOString().substring(0,10)}function bt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=g(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),St(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),St(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var It,xt,Et=function(){function e(t){k(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return b(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,vt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ne(r.heartbeats),ne(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function St(e){return _(JSON.stringify({version:2,heartbeats:e})).length}It="",He(new ae("platform-logger",(function(e){return new Ue(e)}),"PRIVATE")),He(new ae("heartbeat",(function(e){return new At(e)}),"PRIVATE")),ut(Be,Ve,It),ut(Be,Ve,"esm2017"),ut("fire-js","");var Tt=function(){function e(t,n){var r=this;k(this,e),this._delegate=t,this.firebase=n,We(t,new ae("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return b(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),at(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){We(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ke(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),_t=(I(xt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),I(xt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),xt),Ct=new q("app-compat","Firebase",_t);var Nt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Q(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ut,setLogLevel:ct,onLog:st,apps:null,SDK_VERSION:tt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(He(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ct.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&N(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Q(n,e=e||qe))throw Ct.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Tt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){N(n,e)},createSubscribe:J,ErrorFactory:q,deepExtend:N}),n}(),Dt=new ye("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Dt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Rt=self.firebase.SDK_VERSION;Rt&&Rt.indexOf("LITE")>=0&&Dt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ot=Nt;function Pt(){return Pt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Pt.apply(this,arguments)}!function(e){ut("@firebase/app-compat","0.2.7",e)}();var Mt,Lt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ft={},Ut=Ut||{},Bt=Lt||self;function Vt(){}function jt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function qt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var zt="closure_uid_"+(1e9*Math.random()>>>0),Qt=0;function Gt(e,t,n){return e.call.apply(e.bind,arguments)}function Wt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Kt(e,t,n){return(Kt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gt:Wt).apply(null,arguments)}function Ht(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yt(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Jt(){this.s=this.s,this.o=this.o}Jt.prototype.s=!1,Jt.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,zt)&&e[zt]||(e[zt]=++Qt))},Jt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Zt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Xt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function $t(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(jt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function en(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}en.prototype.h=function(){this.defaultPrevented=!0};var tn=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Bt.addEventListener("test",Vt,t),Bt.removeEventListener("test",Vt,t)}catch(n){}return e}();function nn(e){return/^[\s\xa0]*$/.test(e)}var rn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function an(e,t){return e<t?-1:e>t?1:0}function on(){var e=Bt.navigator;return e&&(e=e.userAgent)?e:""}function un(e){return-1!=on().indexOf(e)}function sn(e){return sn[" "](e),e}sn[" "]=Vt;var cn,ln=un("Opera"),fn=un("Trident")||un("MSIE"),hn=un("Edge"),dn=hn||fn,pn=un("Gecko")&&!(-1!=on().toLowerCase().indexOf("webkit")&&!un("Edge"))&&!(un("Trident")||un("MSIE"))&&!un("Edge"),vn=-1!=on().toLowerCase().indexOf("webkit")&&!un("Edge");function yn(){var e=Bt.document;return e?e.documentMode:void 0}e:{var mn="",gn=function(){var e=on();return pn?/rv:([^\);]+)(\)|;)/.exec(e):hn?/Edge\/([\d\.]+)/.exec(e):fn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vn?/WebKit\/(\S+)/.exec(e):ln?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(gn&&(mn=gn?gn[1]:""),fn){var kn=yn();if(null!=kn&&kn>parseFloat(mn)){cn=String(kn);break e}}cn=mn}var An,wn={};function bn(){return function(e){var t=wn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=rn(String(cn)).split("."),n=rn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=an(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||an(0==a[2].length,0==o[2].length)||an(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Bt.document&&fn){var In=yn();An=In||(parseInt(cn,10)||void 0)}else An=void 0;var xn=An;function En(e,t){if(en.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(pn){e:{try{sn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Sn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&En.X.h.call(this)}}Yt(En,en);var Sn={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),_n=0;function Cn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++_n,this.ba=this.ea=!1}function Nn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Dn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Rn(e){var t={};for(var n in e)t[n]=e[n];return t}var On="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<On.length;a++)n=On[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Mn(e){this.src=e,this.g={},this.h=0}function Ln(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Zt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Nn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Mn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Fn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Cn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Un="closure_lm_"+(1e6*Math.random()|0),Bn={};function Vn(e,t,n,r,i){if(r&&r.once)return qn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Vn(e,t[a],n,r,i);return null}return n=Yn(n),e&&e[Tn]?e.N(t,n,qt(r)?!!r.capture:!!r,i):jn(e,t,n,!1,r,i)}function jn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=qt(i)?!!i.capture:!!i,u=Kn(e);if(u||(e[Un]=u=new Mn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Wn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)tn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)qn(e,t[a],n,r,i);return null}return n=Yn(n),e&&e[Tn]?e.O(t,n,qt(r)?!!r.capture:!!r,i):jn(e,t,n,!0,r,i)}function zn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)zn(e,t[a],n,r,i);else r=qt(r)?!!r.capture:!!r,n=Yn(n),e&&e[Tn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Fn(a=e.g[t],n,r,i))&&(Nn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Kn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fn(t,n,r,i)),(n=-1<e?t[e]:null)&&Qn(n))}function Qn(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Tn])Ln(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Kn(t))?(Ln(n,e),0==n.h&&(n.src=null,t[Un]=null)):Nn(e)}}}function Gn(e){return e in Bn?Bn[e]:Bn[e]="on"+e}function Wn(e,t){if(e.ba)e=!0;else{t=new En(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Qn(e),e=n.call(r,t)}return e}function Kn(e){return(e=e[Un])instanceof Mn?e:null}var Hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(e){return"function"===typeof e?e:(e[Hn]||(e[Hn]=function(t){return e.handleEvent(t)}),e[Hn])}function Jn(){Jt.call(this),this.i=new Mn(this),this.P=this,this.I=null}function Zn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new en(t,e);else if(t instanceof en)t.target=t.target||e;else{var i=t;Pn(t=new en(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Xn(o,r,!0,t)&&i}if(i=Xn(o=t.g=e,r,!0,t)&&i,i=Xn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Xn(o=t.g=n[a],r,!1,t)&&i}function Xn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Ln(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Yt(Jn,Jt),Jn.prototype[Tn]=!0,Jn.prototype.removeEventListener=function(e,t,n,r){zn(this,e,t,n,r)},Jn.prototype.M=function(){if(Jn.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Nn(n[r]);delete t.g[e],t.h--}}this.I=null},Jn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Jn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var $n=Bt.JSON.stringify;function er(){var e=sr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var tr,nr=function(){function e(){k(this,e),this.h=this.g=null}return b(e,[{key:"add",value:function(e,t){var n=rr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),rr=new(function(){function e(t,n){k(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return b(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ir}),(function(e){return e.reset()})),ir=function(){function e(){k(this,e),this.next=this.g=this.h=null}return b(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ar(e){Bt.setTimeout((function(){throw e}),0)}function or(e,t){tr||function(){var e=Bt.Promise.resolve(void 0);tr=function(){e.then(cr)}}(),ur||(tr(),ur=!0),sr.add(e,t)}var ur=!1,sr=new nr;function cr(){for(var e;e=er();){try{e.h.call(e.g)}catch(n){ar(n)}var t=rr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ur=!1}function lr(e,t){Jn.call(this),this.h=e||1,this.g=t||Bt,this.j=Kt(this.lb,this),this.l=Date.now()}function fr(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function hr(e,t,n){if("function"===typeof e)n&&(e=Kt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Kt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Bt.setTimeout(e,t||0)}function dr(e){e.g=hr((function(){e.g=null,e.i&&(e.i=!1,dr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Yt(lr,Jn),(Mt=lr.prototype).ca=!1,Mt.R=null,Mt.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Zn(this,"tick"),this.ca&&(fr(this),this.start()))}},Mt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Mt.M=function(){lr.X.M.call(this),fr(this),delete this.g};var pr=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return b(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:dr(this)}},{key:"M",value:function(){Pt(p(n.prototype),"M",this).call(this),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Jt);function vr(e){Jt.call(this),this.h=e,this.g={}}Yt(vr,Jt);var yr=[];function mr(e,t,n,r){Array.isArray(n)||(n&&(yr[0]=n.toString()),n=yr);for(var i=0;i<n.length;i++){var a=Vn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function gr(e){Dn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Qn(e)}),e),e.g={}}function kr(){this.g=!0}function Ar(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return $n(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}vr.prototype.M=function(){vr.X.M.call(this),gr(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kr.prototype.Aa=function(){this.g=!1},kr.prototype.info=function(){};var wr={},br=null;function Ir(){return br=br||new Jn}function xr(e){en.call(this,wr.Pa,e)}function Er(e){var t=Ir();Zn(t,new xr(t))}function Sr(e,t){en.call(this,wr.STAT_EVENT,e),this.stat=t}function Tr(e){var t=Ir();Zn(t,new Sr(t,e))}function _r(e,t){en.call(this,wr.Qa,e),this.size=t}function Cr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Bt.setTimeout((function(){e()}),t)}wr.Pa="serverreachability",Yt(xr,en),wr.STAT_EVENT="statevent",Yt(Sr,en),wr.Qa="timingevent",Yt(_r,en);var Nr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dr={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Rr(){}function Or(e){return e.h||(e.h=e.i())}function Pr(){}Rr.prototype.h=null;var Mr,Lr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Fr(){en.call(this,"d")}function Ur(){en.call(this,"c")}function Br(){}function Vr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new vr(this),this.O=qr,e=dn?125:void 0,this.T=new lr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new jr}function jr(){this.i=null,this.g="",this.h=!1}Yt(Fr,en),Yt(Ur,en),Yt(Br,Rr),Br.prototype.g=function(){return new XMLHttpRequest},Br.prototype.i=function(){return{}},Mr=new Br;var qr=45e3,zr={},Qr={};function Gr(e,t,n){e.K=1,e.v=li(ai(t)),e.s=n,e.P=!0,Wr(e,null)}function Wr(e,t){e.F=Date.now(),Jr(e),e.A=ai(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),Ii(n.i,"t",r),e.C=0,n=e.l.H,e.h=new jr,e.g=xa(e.l,n?t:null,!e.s),0<e.N&&(e.L=new pr(Kt(e.La,e,e.g),e.N)),mr(e.S,e.g,"readystatechange",e.ib),t=e.H?Rn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Er(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Kr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Hr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Yr(e,n))==Qr){4==t&&(e.o=4,Tr(14),i=!1),Ar(e.j,e.m,null,"[Incomplete Response]");break}if(r==zr){e.o=4,Tr(15),Ar(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ar(e.j,e.m,r,null),ti(e,r)}Kr(e)&&r!=Qr&&r!=zr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Tr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ya(t),t.K=!0,Tr(11))):(Ar(e.j,e.m,n,"[Invalid Chunked Response]"),ei(e),$r(e))}function Yr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Qr:(n=Number(t.substring(n,r)),isNaN(n)?zr:(r+=1)+n>t.length?Qr:(t=t.substr(r,n),e.C=r+n,t))}function Jr(e){e.V=Date.now()+e.O,Zr(e,e.O)}function Zr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Cr(Kt(e.gb,e),t)}function Xr(e){e.B&&(Bt.clearTimeout(e.B),e.B=null)}function $r(e){0==e.l.G||e.I||ka(e.l,e)}function ei(e){Xr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,fr(e.T),gr(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ti(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Di(n.h,e)))if(!e.J&&Di(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ga(n),sa(n)}va(n),Tr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Cr(Kt(n.cb,n),6e3));if(1>=Ni(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else wa(n,11)}else if((e.J||n.g==e)&&ga(n),!nn(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ri(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,ci(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=Ia(r,r.H?r.ka:null,r.V),d.J){Oi(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Xr(p),Jr(p)),r.g=d}else pa(r);0<n.i.length&&la(n)}else"stop"!=a[0]&&"close"!=a[0]||wa(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?wa(n,7):ua(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Er()}catch(a){}}function ni(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(jt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(jt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(jt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Mt=Vr.prototype).setTimeout=function(e){this.O=e},Mt.ib=function(e){e=e.target;var t=this.L;t&&3==ta(e)?t.l():this.La(e)},Mt.La=function(e){try{if(e==this.g)e:{var t=ta(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||dn||this.g&&(this.h.h||this.g.fa()||na(this.g)))){this.I||4!=t||7==n||Er(),Xr(this);var r=this.g.aa();this.Y=r;t:if(Kr(this)){var i=na(this.g);e="";var a=i.length,o=4==ta(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ei(this),$r(this);var u="";break t}this.h.i=new Bt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nn(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Tr(12),ei(this),$r(this);break e}Ar(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ti(this,r)}this.P?(Hr(this,t,u),dn&&this.i&&3==t&&(mr(this.S,this.T,"tick",this.hb),this.T.start())):(Ar(this.j,this.m,u,null),ti(this,u)),4==t&&ei(this),this.i&&!this.I&&(4==t?ka(this.l,this):(this.i=!1,Jr(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Tr(12)):(this.o=0,Tr(13)),ei(this),$r(this)}}}catch(t){}},Mt.hb=function(){if(this.g){var e=ta(this.g),t=this.g.fa();this.C<t.length&&(Xr(this),Hr(this,e,t),this.i&&4!=e&&Jr(this))}},Mt.cancel=function(){this.I=!0,ei(this)},Mt.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Er(),Tr(17)),ei(this),this.o=2,$r(this)):Zr(this,this.V-e)};var ri=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ii(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ii){this.h=void 0!==t?t:e.h,oi(this,e.j),this.s=e.s,this.g=e.g,ui(this,e.m),this.l=e.l,t=e.i;var n=new ki;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),si(this,n),this.o=e.o}else e&&(n=String(e).match(ri))?(this.h=!!t,oi(this,n[1]||"",!0),this.s=fi(n[2]||""),this.g=fi(n[3]||"",!0),ui(this,n[4]),this.l=fi(n[5]||"",!0),si(this,n[6]||"",!0),this.o=fi(n[7]||"")):(this.h=!!t,this.i=new ki(null,this.h))}function ai(e){return new ii(e)}function oi(e,t,n){e.j=n?fi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ui(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function si(e,t,n){t instanceof ki?(e.i=t,function(e,t){t&&!e.j&&(Ai(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wi(this,t),Ii(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=hi(t,mi)),e.i=new ki(t,e.h))}function ci(e,t,n){e.i.set(t,n)}function li(e){return ci(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,di),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function di(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ii.prototype.toString=function(){var e=[],t=this.j;t&&e.push(hi(t,pi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(hi(t,pi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(hi(n,"/"==n.charAt(0)?yi:vi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",hi(n,gi)),e.join("")};var pi=/[#\/\?@]/g,vi=/[#\?:]/g,yi=/[#\?]/g,mi=/[#\?@]/g,gi=/#/g;function ki(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ai(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wi(e,t){Ai(e),t=xi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function bi(e,t){return Ai(e),t=xi(e,t),e.g.has(t)}function Ii(e,t,n){wi(e,t),0<n.length&&(e.i=null,e.g.set(xi(e,t),Xt(n)),e.h+=n.length)}function xi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Mt=ki.prototype).add=function(e,t){Ai(this),this.i=null,e=xi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Mt.forEach=function(e,t){Ai(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Mt.oa=function(){Ai(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Mt.W=function(e){Ai(this);var t=[];if("string"===typeof e)bi(this,e)&&(t=t.concat(this.g.get(xi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Mt.set=function(e,t){return Ai(this),this.i=null,bi(this,e=xi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Mt.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ei=b((function e(t,n){k(this,e),this.h=t,this.g=n}));function Si(e){this.l=e||_i,Bt.PerformanceNavigationTiming?e=0<(e=Bt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Bt.g&&Bt.g.Ga&&Bt.g.Ga()&&Bt.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ti,_i=10;function Ci(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ni(e){return e.h?1:e.g?e.g.size:0}function Di(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ri(e,t){e.g?e.g.add(t):e.h=t}function Oi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Pi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Xt(e.i)}function Mi(){}function Li(){this.g=new Mi}function Fi(e,t,n){var r=n||"";try{ni(e,(function(e,n){var i=e;qt(e)&&(i=$n(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ui(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Bi(e){this.l=e.ac||null,this.j=e.jb||!1}function Vi(e,t){Jn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ji,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Si.prototype.cancel=function(){if(this.i=Pi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Mi.prototype.stringify=function(e){return Bt.JSON.stringify(e,void 0)},Mi.prototype.parse=function(e){return Bt.JSON.parse(e,void 0)},Yt(Bi,Rr),Bi.prototype.g=function(){return new Vi(this.l,this.j)},Bi.prototype.i=(Ti={},function(){return Ti}),Yt(Vi,Jn);var ji=0;function qi(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function zi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qi(e)}function Qi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Mt=Vi.prototype).open=function(e,t){if(this.readyState!=ji)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qi(this)},Mt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Bt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zi(this)),this.readyState=ji},Mt.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Bt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qi(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Mt.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zi(this):Qi(this),3==this.readyState&&qi(this)}},Mt.Va=function(e){this.g&&(this.response=this.responseText=e,zi(this))},Mt.Ua=function(e){this.g&&(this.response=e,zi(this))},Mt.ga=function(){this.g&&zi(this)},Mt.setRequestHeader=function(e,t){this.v.append(e,t)},Mt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Mt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Gi=Bt.JSON.parse;function Wi(e){Jn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ki,this.K=this.L=!1}Yt(Wi,Jn);var Ki="",Hi=/^https?$/i,Yi=["POST","PUT"];function Ji(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Zi(e),$i(e)}function Zi(e){e.D||(e.D=!0,Zn(e,"complete"),Zn(e,"error"))}function Xi(e){if(e.h&&"undefined"!=typeof Ut&&(!e.C[1]||4!=ta(e)||2!=e.aa()))if(e.v&&4==ta(e))hr(e.Ha,0,e);else if(Zn(e,"readystatechange"),4==ta(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ri)[1]||null;if(!a&&Bt.self&&Bt.self.location){var o=Bt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Hi.test(a?a.toLowerCase():"")}t=i}if(t)Zn(e,"complete"),Zn(e,"success");else{e.m=6;try{var u=2<ta(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Zi(e)}}finally{$i(e)}}}function $i(e,t){if(e.g){ea(e);var n=e.g,r=e.C[0]?Vt:null;e.g=null,e.C=null,t||Zn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ea(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Bt.clearTimeout(e.A),e.A=null)}function ta(e){return e.g?e.g.readyState:0}function na(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ki:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ja){return null}}function ra(e){var t="";return Dn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ia(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ra(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ci(e,t,n))}function aa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function oa(e){this.Ca=0,this.i=[],this.j=new kr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=aa("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=aa("baseRetryDelayMs",5e3,e),this.bb=aa("retryDelaySeedMs",1e4,e),this.$a=aa("forwardChannelMaxRetries",2,e),this.ta=aa("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Si(e&&e.concurrentRequestLimit),this.Fa=new Li,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ua(e){if(ca(e),3==e.G){var t=e.U++,n=ai(e.F);ci(n,"SID",e.I),ci(n,"RID",t),ci(n,"TYPE","terminate"),ha(e,n),(t=new Vr(e,e.j,t,void 0)).K=2,t.v=li(ai(n)),n=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(n=Bt.navigator.sendBeacon(t.v.toString(),"")),!n&&Bt.Image&&((new Image).src=t.v,n=!0),n||(t.g=xa(t.l,null),t.g.da(t.v)),t.F=Date.now(),Jr(t)}ba(e)}function sa(e){e.g&&(ya(e),e.g.cancel(),e.g=null)}function ca(e){sa(e),e.u&&(Bt.clearTimeout(e.u),e.u=null),ga(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Bt.clearTimeout(e.m),e.m=null)}function la(e){Ci(e.h)||e.m||(e.m=!0,or(e.Ja,e),e.C=0)}function fa(e,t){var n;n=t?t.m:e.U++;var r=ai(e.F);ci(r,"SID",e.I),ci(r,"RID",n),ci(r,"AID",e.T),ha(e,r),e.o&&e.s&&ia(r,e.o,e.s),n=new Vr(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=da(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Ri(e.h,n),Gr(n,r,t)}function ha(e,t){e.ia&&Dn(e.ia,(function(e,n){ci(t,n,e)})),e.l&&ni({},(function(e,n){ci(t,n,e)}))}function da(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Kt(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Fi(l,o,"req"+c+"_")}catch(Za){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function pa(e){e.g||e.u||(e.Z=1,or(e.Ia,e),e.A=0)}function va(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Cr(Kt(e.Ia,e),Aa(e,e.A)),e.A++,!0)}function ya(e){null!=e.B&&(Bt.clearTimeout(e.B),e.B=null)}function ma(e){e.g=new Vr(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=ai(e.sa);ci(t,"RID","rpc"),ci(t,"SID",e.I),ci(t,"CI",e.L?"0":"1"),ci(t,"AID",e.T),ci(t,"TYPE","xmlhttp"),ha(e,t),e.o&&e.s&&ia(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=li(ai(t)),n.s=null,n.P=!0,Wr(n,e)}function ga(e){null!=e.v&&(Bt.clearTimeout(e.v),e.v=null)}function ka(e,t){var n=null;if(e.g==t){ga(e),ya(e),e.g=null;var r=2}else{if(!Di(e.h,t))return;n=t.D,Oi(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Zn(r=Ir(),new _r(r,n)),la(e)}else pa(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Ni(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Cr(Kt(e.Ja,e,t),Aa(e,e.C)),e.C++,!0))}(e,t)||2==r&&va(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wa(e,5);break;case 4:wa(e,10);break;case 3:wa(e,6);break;default:wa(e,2)}}function Aa(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function wa(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Kt(e.kb,e);n||(n=new ii("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||oi(n,"https"),li(n)),function(e,t){var n=new kr;if(Bt.Image){var r=new Image;r.onload=Ht(Ui,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ht(Ui,n,r,"TestLoadImage: error",!1,t),r.onabort=Ht(Ui,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ht(Ui,n,r,"TestLoadImage: timeout",!1,t),Bt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Tr(2);e.G=0,e.l&&e.l.va(t),ba(e),ca(e)}function ba(e){if(e.G=0,e.la=[],e.l){var t=Pi(e.h);0==t.length&&0==e.i.length||($t(e.la,t),$t(e.la,e.i),e.h.i.length=0,Xt(e.i),e.i.length=0),e.l.ua()}}function Ia(e,t,n){var r=n instanceof ii?ai(n):new ii(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ui(r,r.m);else{var i=Bt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ii(null,void 0);r&&oi(a,r),t&&(a.g=t),i&&ui(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&ci(r,n,t),ci(r,"VER",e.ma),ha(e,r),r}function xa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Wi(new Bi({jb:!0})):new Wi(e.ra)).Ka(e.H),t}function Ea(){}function Sa(){if(fn&&!(10<=Number(xn)))throw Error("Environmental error: no available transport.")}function Ta(e,t){Jn.call(this),this.g=new oa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!nn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Na(this)}function _a(e){Fr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ca(){Ur.call(this),this.status=1}function Na(e){this.g=e}(Mt=Wi.prototype).Ka=function(e){this.L=e},Mt.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mr.g(),this.C=this.u?Or(this.u):Or(Mr),this.g.onreadystatechange=Kt(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Ji(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=g(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Bt.FormData&&e instanceof Bt.FormData,!(0<=Zt(Yi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=g(n);try{for(l.s();!(s=l.n()).done;){var f=c(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ea(this),0<this.B&&((this.K=function(e){return fn&&bn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.qa,this)):this.A=hr(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Ji(this,u)}},Mt.qa=function(){"undefined"!=typeof Ut&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zn(this,"timeout"),this.abort(8))},Mt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Zn(this,"complete"),Zn(this,"abort"),$i(this))},Mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$i(this,!0)),Wi.X.M.call(this)},Mt.Ha=function(){this.s||(this.F||this.v||this.l?Xi(this):this.fb())},Mt.fb=function(){Xi(this)},Mt.aa=function(){try{return 2<ta(this)?this.g.status:-1}catch(Ti){return-1}},Mt.fa=function(){try{return this.g?this.g.responseText:""}catch(Ti){return""}},Mt.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Gi(t)}},Mt.Ea=function(){return this.m},Mt.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Mt=oa.prototype).ma=8,Mt.G=1,Mt.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Vr(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Pn(n=Rn(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=da(this,t,r),ci(i=ai(this.F),"RID",e),ci(i,"CVER",22),this.D&&ci(i,"X-HTTP-Session-Id",this.D),ha(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(ra(n)))+"&"+r:this.o&&ia(i,this.o,n)),Ri(this.h,t),this.Ya&&ci(i,"TYPE","init"),this.O?(ci(i,"$req",r),ci(i,"SID","null"),t.Z=!0,Gr(t,i,null)):Gr(t,i,r),this.G=2}}else 3==this.G&&(e?fa(this,e):0==this.i.length||Ci(this.h)||fa(this))},Mt.Ia=function(){if(this.u=null,ma(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Cr(Kt(this.eb,this),e)}},Mt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Tr(10),sa(this),ma(this))},Mt.cb=function(){null!=this.v&&(this.v=null,sa(this),va(this),Tr(19))},Mt.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Tr(2)):(this.j.info("Failed to ping google.com"),Tr(1))},(Mt=Ea.prototype).xa=function(){},Mt.wa=function(){},Mt.va=function(){},Mt.ua=function(){},Mt.Ra=function(){},Sa.prototype.g=function(e,t){return new Ta(e,t)},Yt(Ta,Jn),Ta.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Tr(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=Ia(e,null,e.V),la(e)},Ta.prototype.close=function(){ua(this.g)},Ta.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=$n(e),e=n);t.i.push(new Ei(t.ab++,e)),3==t.G&&la(t)},Ta.prototype.M=function(){this.g.l=null,delete this.j,ua(this.g),delete this.g,Ta.X.M.call(this)},Yt(_a,Fr),Yt(Ca,Ur),Yt(Na,Ea),Na.prototype.xa=function(){Zn(this.g,"a")},Na.prototype.wa=function(e){Zn(this.g,new _a(e))},Na.prototype.va=function(e){Zn(this.g,new Ca)},Na.prototype.ua=function(){Zn(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,Ta.prototype.send=Ta.prototype.u,Ta.prototype.open=Ta.prototype.m,Ta.prototype.close=Ta.prototype.close,Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,Dr.COMPLETE="complete",Pr.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Jn.prototype.listen=Jn.prototype.N,Wi.prototype.listenOnce=Wi.prototype.O,Wi.prototype.getLastError=Wi.prototype.Oa,Wi.prototype.getLastErrorCode=Wi.prototype.Ea,Wi.prototype.getStatus=Wi.prototype.aa,Wi.prototype.getResponseJson=Wi.prototype.Sa,Wi.prototype.getResponseText=Wi.prototype.fa,Wi.prototype.send=Wi.prototype.da,Wi.prototype.setWithCredentials=Wi.prototype.Ka;var Da=Ft.createWebChannelTransport=function(){return new Sa},Ra=Ft.getStatEventTarget=function(){return Ir()},Oa=Ft.ErrorCode=Nr,Pa=Ft.EventType=Dr,Ma=Ft.Event=wr,La=Ft.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fa=Ft.FetchXmlHttpFactory=Bi,Ua=Ft.WebChannel=Pr,Ba=Ft.XhrIo=Wi,Va="@firebase/firestore",ja=function(){function e(t){k(this,e),this.uid=t}return b(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ja.UNAUTHENTICATED=new ja(null),ja.GOOGLE_CREDENTIALS=new ja("google-credentials-uid"),ja.FIRST_PARTY=new ja("first-party-uid"),ja.MOCK_USER=new ja("mock-user");var qa="9.19.0",za=new ye("@firebase/firestore");function Qa(){return za.logLevel}function Ga(e){if(za.logLevel<=ce.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ha);za.debug.apply(za,["Firestore (".concat(qa,"): ").concat(e)].concat(ne(i)))}}function Wa(e){if(za.logLevel<=ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ha);za.error.apply(za,["Firestore (".concat(qa,"): ").concat(e)].concat(ne(i)))}}function Ka(e){if(za.logLevel<=ce.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Ha);za.warn.apply(za,["Firestore (".concat(qa,"): ").concat(e)].concat(ne(i)))}}function Ha(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(qa,") INTERNAL ASSERTION FAILED: ")+e;throw Wa(t),new Error(t)}function Ja(e,t){e||Ya()}function Za(e,t){return e}var Xa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$a=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return b(n)}(j),eo=b((function e(){var t=this;k(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),to=b((function e(t,n){k(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),no=function(){function e(){k(this,e)}return b(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ja.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ro=function(){function e(t){k(this,e),this.token=t,this.changeListener=null}return b(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),io=function(){function e(t){k(this,e),this.t=t,this.currentUser=ja.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return b(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new eo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new eo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Ga("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ga("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new eo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ga("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ja("string"==typeof n.accessToken),new to(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ja(null===e||"string"==typeof e),new ja(e)}}]),e}(),ao=function(){function e(t,n,r){k(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ja.FIRST_PARTY,this.g=new Map}return b(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),oo=function(){function e(t,n,r){k(this,e),this.h=t,this.l=n,this.m=r}return b(e,[{key:"getToken",value:function(){return Promise.resolve(new ao(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ja.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),uo=b((function e(t){k(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),so=function(){function e(t){k(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return b(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ga("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Ga("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ga("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Ga("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ja("string"==typeof t.token),e.T=t.token,new uo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function co(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var lo=function(){function e(){k(this,e)}return b(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=co(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function fo(e,t){return e<t?-1:e>t?1:0}function ho(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function po(e){return e+"\0"}var vo=function(){function e(t,n){if(k(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new $a(Xa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $a(Xa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new $a(Xa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $a(Xa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return b(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fo(this.nanoseconds,e.nanoseconds):fo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),yo=function(){function e(t){k(this,e),this.timestamp=t}return b(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new vo(0,0))}},{key:"max",value:function(){return new e(new vo(253402300799,999999999))}}]),e}(),mo=function(){function e(t,n,r){k(this,e),void 0===n?n=0:n>t.length&&Ya(),void 0===r?r=t.length-n:r>t.length-n&&Ya(),this.segments=t,this.offset=n,this.len=r}return b(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),go=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new $a(Xa.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ne(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(mo),ko=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ao=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ko.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new $a(Xa.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new $a(Xa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new $a(Xa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new $a(Xa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(mo),wo=function(){function e(t){k(this,e),this.path=t}return b(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===go.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(go.fromString(t))}},{key:"fromName",value:function(t){return new e(go.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(go.emptyPath())}},{key:"comparator",value:function(e,t){return go.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new go(t.slice()))}}]),e}(),bo=b((function e(t,n,r,i){k(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Io(e){return e.fields.find((function(e){return 2===e.kind}))}function xo(e){return e.fields.filter((function(e){return 2!==e.kind}))}bo.UNKNOWN_ID=-1;var Eo=b((function e(t,n){k(this,e),this.fieldPath=t,this.kind=n}));var So=function(){function e(t,n){k(this,e),this.sequenceNumber=t,this.offset=n}return b(e,null,[{key:"empty",value:function(){return new e(0,Co.min())}}]),e}();function To(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=yo.fromTimestamp(1e9===r?new vo(n+1,0):new vo(n,r));return new Co(i,wo.empty(),t)}function _o(e){return new Co(e.readTime,e.key,-1)}var Co=function(){function e(t,n,r){k(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return b(e,null,[{key:"min",value:function(){return new e(yo.min(),wo.empty(),-1)}},{key:"max",value:function(){return new e(yo.max(),wo.empty(),-1)}}]),e}();function No(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=wo.comparator(e.documentKey,t.documentKey))?n:fo(e.largestBatchId,t.largestBatchId)}var Do="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ro=function(){function e(){k(this,e),this.onCommittedListeners=[]}return b(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Oo(e){return Po.apply(this,arguments)}function Po(){return Po=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Xa.FAILED_PRECONDITION&&t.message===Do){e.next=2;break}throw t;case 2:Ga("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}var Mo=function(){function e(t){var n=this;k(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return b(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ya(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Lo=function(){function e(t,n){var r=this;k(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new eo,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Bo(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Qo(e.target.error);r.R.reject(new Bo(t,n))}}return b(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Ga("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new jo(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Bo(n,t)}}}]),e}(),Fo=function(){function e(t,n,r){k(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(M())&&Wa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return b(e,[{key:"$",value:function(){var e=ie(ee().mark((function e(t){var n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ga("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Bo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new $a(Xa.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new $a(Xa.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Bo(t,n))},i.onupgradeneeded=function(e){Ga("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){Ga("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ie(ee().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ee().mark((function e(){var n,u,s,l;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Lo.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Mo.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Ga("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ga("SimpleDb","Removing database:",e),qo(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!V())return!1;if(e.C())return!0;var t=M(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/where-is-waldo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Uo=function(){function e(t){k(this,e),this.L=t,this.q=!1,this.U=null}return b(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return qo(this.L.delete())}}]),e}(),Bo=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,Xa.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return b(n)}($a);function Vo(e){return"IndexedDbTransactionError"===e.name}var jo=function(){function e(t){k(this,e),this.store=t}return b(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ga("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ga("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qo(n)}},{key:"add",value:function(e){return Ga("SimpleDb","ADD",this.store.name,e,e),qo(this.store.add(e))}},{key:"get",value:function(e){var t=this;return qo(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ga("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ga("SimpleDb","DELETE",this.store.name,e),qo(this.store.delete(e))}},{key:"count",value:function(){return Ga("SimpleDb","COUNT",this.store.name),qo(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Mo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Mo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Ga("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Mo((function(n,r){t.onerror=function(e){var t=Qo(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Mo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Uo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Mo){var u=o.catch((function(e){return a.done(),Mo.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Mo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function qo(e){return new Mo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Qo(e.target.error);n(t)}}))}var zo=!1;function Qo(e){var t=Fo.S(M());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new $a("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return zo||(zo=!0,setTimeout((function(){throw r}),0)),r}}return e}var Go=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return b(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Ga("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Ga,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Vo(e.t4)){e.next=17;break}Ga("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Oo(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Wo=function(){function e(t,n){k(this,e),this.localStore=t,this.persistence=n}return b(e,[{key:"nt",value:function(){var e=ie(ee().mark((function e(){var t,n=this,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Mo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Ga("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Ga("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=_o(t);No(r,n)>0&&(n=r)})),new Co(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Ko=function(){function e(t,n){var r=this;k(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return b(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Ho(e){return null==e}function Yo(e){return 0===e&&1/e==-1/0}function Jo(e){return"number"==typeof e&&Number.isInteger(e)&&!Yo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Zo(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=$o(t)),t=Xo(e.get(n),t);return $o(t)}function Xo(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function $o(e){return e+"\x01\x01"}function eu(e){var t=e.length;if(Ja(t>=2),2===t)return Ja("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),go.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ya(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ya()}a=o+2}return new go(r)}Ko.ct=-1;var tu=["userId","batchId"];function nu(e,t){return[e,Zo(t)]}function ru(e,t,n){return[e,Zo(t),n]}var iu={},au=["prefixPath","collectionGroup","readTime","documentId"],ou=["prefixPath","collectionGroup","documentId"],uu=["collectionGroup","readTime","prefixPath","documentId"],su=["canonicalId","targetId"],cu=["targetId","path"],lu=["path","targetId"],fu=["collectionId","parent"],hu=["indexId","uid"],du=["uid","sequenceNumber"],pu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vu=["indexId","uid","orderedDocumentKey"],yu=["userId","collectionPath","documentId"],mu=["userId","collectionPath","largestBatchId"],gu=["userId","collectionGroup","largestBatchId"],ku=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Au=[].concat(ne(ku),["documentOverlays"]),wu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bu=wu,Iu=[].concat(bu,["indexConfiguration","indexState","indexEntries"]),xu=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return b(n)}(Ro);function Eu(e,t){var n=Za(e);return Fo.O(n.at,t)}function Su(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Tu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _u(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Cu=function(){function e(t,n){k(this,e),this.comparator=t,this.root=n||Du.EMPTY}return b(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Du.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Du.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Nu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Nu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Nu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Nu(this.root,e,this.comparator,!0)}}]),e}(),Nu=function(){function e(t,n,r,i){k(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return b(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Du=function(){function e(t,n,r,i,a){k(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return b(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ya();if(this.right.isRed())throw Ya();var e=this.left.check();if(e!==this.right.check())throw Ya();return e+(this.isRed()?0:1)}}]),e}();Du.EMPTY=null,Du.RED=!0,Du.BLACK=!1,Du.EMPTY=new(function(){function e(){k(this,e),this.size=0}return b(e,[{key:"key",get:function(){throw Ya()}},{key:"value",get:function(){throw Ya()}},{key:"color",get:function(){throw Ya()}},{key:"left",get:function(){throw Ya()}},{key:"right",get:function(){throw Ya()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Du(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ru=function(){function e(t){k(this,e),this.comparator=t,this.data=new Cu(this.comparator)}return b(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ou(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ou(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ou=function(){function e(t){k(this,e),this.iter=t}return b(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Pu(e){return e.hasNext()?e.getNext():void 0}var Mu=function(){function e(t){k(this,e),this.fields=t,t.sort(Ao.comparator)}return b(e,[{key:"unionWith",value:function(t){var n,r=new Ru(Ao.comparator),i=g(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=g(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ho(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Lu=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return b(n)}(x(Error));var Fu=function(e){function t(e){k(this,t),this.binaryString=e}return b(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Lu("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Fu.EMPTY_BYTE_STRING=new Fu("");var Uu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bu(e){if(Ja(!!e),"string"==typeof e){var t=0,n=Uu.exec(e);if(Ja(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Vu(e.seconds),nanos:Vu(e.nanos)}}function Vu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ju(e){return"string"==typeof e?Fu.fromBase64String(e):Fu.fromUint8Array(e)}function qu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zu(e){var t=e.mapValue.fields.__previous_value__;return qu(t)?zu(t):t}function Qu(e){var t=Bu(e.mapValue.fields.__local_write_time__.timestampValue);return new vo(t.seconds,t.nanos)}var Gu=b((function e(t,n,r,i,a,o,u,s){k(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Wu=function(){function e(t,n){k(this,e),this.projectId=t,this.database=n||"(default)"}return b(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hu={nullValue:"NULL_VALUE"};function Yu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qu(e)?4:cs(e)?9007199254740991:10:Ya()}function Ju(e,t){if(e===t)return!0;var n=Yu(e);if(n!==Yu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qu(e).isEqual(Qu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bu(e.timestampValue),r=Bu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ju(e.bytesValue).isEqual(ju(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vu(e.geoPointValue.latitude)===Vu(t.geoPointValue.latitude)&&Vu(e.geoPointValue.longitude)===Vu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vu(e.integerValue)===Vu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Vu(e.doubleValue),r=Vu(t.doubleValue);return n===r?Yo(n)===Yo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ho(e.arrayValue.values||[],t.arrayValue.values||[],Ju);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Su(n)!==Su(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ju(n[i],r[i])))return!1;return!0}(e,t);default:return Ya()}}function Zu(e,t){return void 0!==(e.values||[]).find((function(e){return Ju(e,t)}))}function Xu(e,t){if(e===t)return 0;var n=Yu(e),r=Yu(t);if(n!==r)return fo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Vu(e.integerValue||e.doubleValue),r=Vu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $u(e.timestampValue,t.timestampValue);case 4:return $u(Qu(e),Qu(t));case 5:return fo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ju(e),r=ju(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fo(n[i],r[i]);if(0!==a)return a}return fo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fo(Vu(e.latitude),Vu(t.latitude));return 0!==n?n:fo(Vu(e.longitude),Vu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Xu(n[i],r[i]);if(a)return a}return fo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ku.mapValue&&t===Ku.mapValue)return 0;if(e===Ku.mapValue)return 1;if(t===Ku.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=fo(r[o],a[o]);if(0!==u)return u;var s=Xu(n[r[o]],i[a[o]]);if(0!==s)return s}return fo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ya()}}function $u(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fo(e,t);var n=Bu(e),r=Bu(t),i=fo(n.seconds,r.seconds);return 0!==i?i:fo(n.nanos,r.nanos)}function es(e){return ts(e)}function ts(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ju(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,wo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=g(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ts(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=g(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ts(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ya();var t,n}function ns(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function rs(e){return!!e&&"integerValue"in e}function is(e){return!!e&&"arrayValue"in e}function as(e){return!!e&&"nullValue"in e}function os(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function us(e){return!!e&&"mapValue"in e}function ss(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Tu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ss(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ss(e.arrayValue.values[r]);return n}return Object.assign({},e)}function cs(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ls(e){return"nullValue"in e?Hu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ns(Wu.empty(),wo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ya()}function fs(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ns(Wu.empty(),wo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ku:Ya()}function hs(e,t){var n=Xu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ds(e,t){var n=Xu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ps=function(){function e(t){k(this,e),this.value=t}return b(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!us(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ss(t)}},{key:"setAll",value:function(e){var t=this,n=Ao.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ss(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());us(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ju(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];us(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Tu(t,(function(t,n){return e[t]=n}));var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ss(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function vs(e){var t=[];return Tu(e.fields,(function(e,n){var r=new Ao([e]);if(us(n)){var i=vs(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Mu(t)}var ys=function(){function e(t,n,r,i,a,o,u){k(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return b(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(yo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=yo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,yo.min(),yo.min(),yo.min(),ps.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,yo.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,yo.min(),yo.min(),ps.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,yo.min(),yo.min(),ps.empty(),2)}}]),e}(),ms=b((function e(t,n){k(this,e),this.position=t,this.inclusive=n}));function gs(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?wo.comparator(wo.fromName(o.referenceValue),n.key):Xu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ks(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ju(e.position[n],t.position[n]))return!1;return!0}var As=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";k(this,e),this.field=t,this.dir=n}));function ws(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var bs=b((function e(){k(this,e)})),Is=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return b(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Xu(t,this.value)):null!==t&&Yu(this.value)===Yu(t)&&this.matchesComparison(Xu(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ya()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Os(e,t,r):"array-contains"===t?new Fs(e,r):"in"===t?new Us(e,r):"not-in"===t?new Bs(e,r):"array-contains-any"===t?new Vs(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ps(e,n):new Ms(e,n)}}]),n}(bs),xs=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return b(n,[{key:"matches",value:function(e){return Es(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=g(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(bs);function Es(e){return"and"===e.op}function Ss(e){return"or"===e.op}function Ts(e){return _s(e)&&Es(e)}function _s(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof xs)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Cs(e){if(e instanceof Is)return e.field.canonicalString()+e.op.toString()+es(e.value);if(Ts(e))return e.filters.map((function(e){return Cs(e)})).join(",");var t=e.filters.map((function(e){return Cs(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ns(e,t){return e instanceof Is?function(e,t){return t instanceof Is&&e.op===t.op&&e.field.isEqual(t.field)&&Ju(e.value,t.value)}(e,t):e instanceof xs?function(e,t){return t instanceof xs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ns(n,t.filters[r])}),!0)}(e,t):void Ya()}function Ds(e,t){var n=e.filters.concat(t);return xs.create(n,e.op)}function Rs(e){return e instanceof Is?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(es(e.value))}(e):e instanceof xs?function(e){return e.op.toString()+" {"+e.getFilters().map(Rs).join(" ,")+"}"}(e):"Filter"}var Os=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,i)).key=wo.fromName(i.referenceValue),a}return b(n,[{key:"matches",value:function(e){var t=wo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Is),Ps=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"in",r)).keys=Ls("in",r),i}return b(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Is),Ms=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"not-in",r)).keys=Ls("not-in",r),i}return b(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Is);function Ls(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return wo.fromName(e.referenceValue)}))}var Fs=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains",r)}return b(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return is(t)&&Zu(t.arrayValue,this.value)}}]),n}(Is),Us=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"in",r)}return b(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Zu(this.value.arrayValue,t)}}]),n}(Is),Bs=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"not-in",r)}return b(n,[{key:"matches",value:function(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Zu(this.value.arrayValue,t)}}]),n}(Is),Vs=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains-any",r)}return b(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!is(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Zu(t.value.arrayValue,e)}))}}]),n}(Is),js=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;k(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function qs(e){return new js(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function zs(e){var t=Za(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Cs(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ho(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return es(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return es(e)})).join(",")),t.ft=n}return t.ft}function Qs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ws(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ns(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ks(e.startAt,t.startAt)&&ks(e.endAt,t.endAt)}function Gs(e){return wo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ws(e,t){return e.filters.filter((function(e){return e instanceof Is&&e.field.isEqual(t)}))}function Ks(e,t,n){var r,i=Hu,a=!0,o=g(Ws(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Hu,c=!0;switch(u.op){case"<":case"<=":s=ls(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Hu}hs({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];hs({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Hs(e,t,n){var r,i=Ku,a=!0,o=g(Ws(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ku,c=!0;switch(u.op){case">=":case">":s=fs(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ku}ds({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];ds({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Ys=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function Js(e,t,n,r,i,a,o,u){return new Ys(e,t,n,r,i,a,o,u)}function Zs(e){return new Ys(e)}function Xs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $s(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ec(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function tc(e){return null!==e.collectionGroup}function nc(e){var t=Za(e);if(null===t.dt){t.dt=[];var n=ec(t),r=$s(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new As(n)),t.dt.push(new As(Ao.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new As(Ao.keyField(),s))}}}return t.dt}function rc(e){var t=Za(e);if(!t.wt)if("F"===t.limitType)t.wt=qs(t.path,t.collectionGroup,nc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(nc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new As(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ms(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ms(t.startAt.position,t.startAt.inclusive):null;t.wt=qs(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function ic(e,t){t.getFirstInequalityField(),ec(e);var n=e.filters.concat([t]);return new Ys(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ac(e,t,n){return new Ys(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oc(e,t){return Qs(rc(e),rc(t))&&e.limitType===t.limitType}function uc(e){return"".concat(zs(rc(e)),"|lt:").concat(e.limitType)}function sc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Rs(e)})).join(", "),"]")),Ho(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return es(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return es(e)})).join(",")),"Target(".concat(t,")")}(rc(e)),"; limitType=").concat(e.limitType,")")}function cc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(nc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,nc(e),t))&&!(e.endAt&&!function(e,t,n){var r=gs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,nc(e),t))}(e,t)}function lc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fc(e){return function(t,n){var r,i=!1,a=g(nc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=hc(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function hc(e,t,n){var r=e.field.isKeyField()?wo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Xu(r,i):Ya()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ya()}}var dc=function(){function e(t,n){k(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return b(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Tu(this.inner,(function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return _u(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),pc=new Cu(wo.comparator);function vc(){return pc}var yc=new Cu(wo.comparator);function mc(){for(var e=yc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function gc(e){var t=yc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function kc(){return wc()}function Ac(){return wc()}function wc(){return new dc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var bc=new Cu(wo.comparator),Ic=new Ru(wo.comparator);function xc(){for(var e=Ic,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Ec=new Ru(fo);function Sc(){return Ec}function Tc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(t)?"-0":t}}function _c(e){return{integerValue:""+e}}function Cc(e,t){return Jo(t)?_c(t):Tc(e,t)}var Nc=b((function e(){k(this,e),this._=void 0}));function Dc(e,t,n){return e instanceof Pc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Mc?Lc(e,t):e instanceof Fc?Uc(e,t):function(e,t){var n=Oc(e,t),r=Vc(n)+Vc(e._t);return rs(n)&&rs(e._t)?_c(r):Tc(e.serializer,r)}(e,t)}function Rc(e,t,n){return e instanceof Mc?Lc(e,t):e instanceof Fc?Uc(e,t):n}function Oc(e,t){return e instanceof Bc?rs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Pc=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n)}(Nc),Mc=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return b(n)}(Nc);function Lc(e,t){var n,r=jc(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ju(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fc=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return b(n)}(Nc);function Uc(e,t){var n,r=jc(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ju(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bc=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return b(n)}(Nc);function Vc(e){return Vu(e.integerValue||e.doubleValue)}function jc(e){return is(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var qc=b((function e(t,n){k(this,e),this.field=t,this.transform=n}));var zc=b((function e(t,n){k(this,e),this.version=t,this.transformResults=n})),Qc=function(){function e(t,n){k(this,e),this.updateTime=t,this.exists=n}return b(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Gc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Wc=b((function e(){k(this,e)}));function Kc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new al(e.key,Qc.none()):new Xc(e.key,e.data,Qc.none());var n,r=e.data,i=ps.empty(),a=new Ru(Ao.comparator),o=g(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new $c(e.key,i,new Mu(a.toArray()),Qc.none())}function Hc(e,t,n){e instanceof Xc?function(e,t,n){var r=e.value.clone(),i=tl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $c?function(e,t,n){if(Gc(e.precondition,t)){var r=tl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(el(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yc(e,t,n,r){return e instanceof Xc?function(e,t,n,r){if(!Gc(e.precondition,t))return n;var i=e.value.clone(),a=nl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $c?function(e,t,n,r){if(!Gc(e.precondition,t))return n;var i=nl(e.fieldTransforms,r,t),a=t.data;return a.setAll(el(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Gc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jc(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Oc(a.transform,o||null);null!=u&&(null===r&&(r=ps.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Zc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ho(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Mc&&t instanceof Mc||e instanceof Fc&&t instanceof Fc?ho(e.elements,t.elements,Ju):e instanceof Bc&&t instanceof Bc?Ju(e._t,t._t):e instanceof Pc&&t instanceof Pc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Xc=function(e){d(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return k(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return b(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Wc),$c=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return k(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return b(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Wc);function el(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function tl(e,t,n){var r=new Map;Ja(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Rc(o,u,n[i]))}return r}function nl(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Dc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var rl,il,al=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return b(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Wc),ol=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return b(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Wc),ul=function(){function e(t,n,r,i){k(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return b(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Hc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=g(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Yc(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=g(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Yc(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ac();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Kc(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(yo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),xc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(function(e,t){return Zc(e,t)}))&&ho(this.baseMutations,e.baseMutations,(function(e,t){return Zc(e,t)}))}}]),e}(),sl=function(){function e(t,n,r,i){k(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return b(e,null,[{key:"from",value:function(t,n,r){Ja(t.mutations.length===r.length);for(var i=bc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),cl=function(){function e(t,n){k(this,e),this.largestBatchId=t,this.mutation=n}return b(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ll=b((function e(t){k(this,e),this.count=t}));function fl(e){switch(e){default:return Ya();case Xa.CANCELLED:case Xa.UNKNOWN:case Xa.DEADLINE_EXCEEDED:case Xa.RESOURCE_EXHAUSTED:case Xa.INTERNAL:case Xa.UNAVAILABLE:case Xa.UNAUTHENTICATED:return!1;case Xa.INVALID_ARGUMENT:case Xa.NOT_FOUND:case Xa.ALREADY_EXISTS:case Xa.PERMISSION_DENIED:case Xa.FAILED_PRECONDITION:case Xa.ABORTED:case Xa.OUT_OF_RANGE:case Xa.UNIMPLEMENTED:case Xa.DATA_LOSS:return!0}}function hl(e){if(void 0===e)return Wa("GRPC error has no .code"),Xa.UNKNOWN;switch(e){case rl.OK:return Xa.OK;case rl.CANCELLED:return Xa.CANCELLED;case rl.UNKNOWN:return Xa.UNKNOWN;case rl.DEADLINE_EXCEEDED:return Xa.DEADLINE_EXCEEDED;case rl.RESOURCE_EXHAUSTED:return Xa.RESOURCE_EXHAUSTED;case rl.INTERNAL:return Xa.INTERNAL;case rl.UNAVAILABLE:return Xa.UNAVAILABLE;case rl.UNAUTHENTICATED:return Xa.UNAUTHENTICATED;case rl.INVALID_ARGUMENT:return Xa.INVALID_ARGUMENT;case rl.NOT_FOUND:return Xa.NOT_FOUND;case rl.ALREADY_EXISTS:return Xa.ALREADY_EXISTS;case rl.PERMISSION_DENIED:return Xa.PERMISSION_DENIED;case rl.FAILED_PRECONDITION:return Xa.FAILED_PRECONDITION;case rl.ABORTED:return Xa.ABORTED;case rl.OUT_OF_RANGE:return Xa.OUT_OF_RANGE;case rl.UNIMPLEMENTED:return Xa.UNIMPLEMENTED;case rl.DATA_LOSS:return Xa.DATA_LOSS;default:return Ya()}}(il=rl||(rl={}))[il.OK=0]="OK",il[il.CANCELLED=1]="CANCELLED",il[il.UNKNOWN=2]="UNKNOWN",il[il.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",il[il.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",il[il.NOT_FOUND=5]="NOT_FOUND",il[il.ALREADY_EXISTS=6]="ALREADY_EXISTS",il[il.PERMISSION_DENIED=7]="PERMISSION_DENIED",il[il.UNAUTHENTICATED=16]="UNAUTHENTICATED",il[il.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",il[il.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",il[il.ABORTED=10]="ABORTED",il[il.OUT_OF_RANGE=11]="OUT_OF_RANGE",il[il.UNIMPLEMENTED=12]="UNIMPLEMENTED",il[il.INTERNAL=13]="INTERNAL",il[il.UNAVAILABLE=14]="UNAVAILABLE",il[il.DATA_LOSS=15]="DATA_LOSS";var dl=function(){function e(){k(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return b(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return pl}},{key:"getOrCreateInstance",value:function(){return null===pl&&(pl=new e),pl}}]),e}(),pl=null,vl=function(){function e(t,n,r,i,a){k(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return b(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,yl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(yo.min(),i,Sc(),vc(),xc())}}]),e}(),yl=function(){function e(t,n,r,i,a){k(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return b(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,xc(),xc(),xc())}}]),e}(),ml=b((function e(t,n,r,i){k(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),gl=b((function e(t,n){k(this,e),this.targetId=t,this.Et=n})),kl=b((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Al=function(){function e(){k(this,e),this.At=0,this.Rt=Il(),this.vt=Fu.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return b(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=xc(),t=xc(),n=xc();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ya()}})),new yl(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=Il()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),wl=function(){function e(t){k(this,e),this.Ft=t,this.Bt=new Map,this.Lt=vc(),this.qt=bl(),this.Ut=new Ru(fo)}return b(e,[{key:"Kt",value:function(e){var t,n=g(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Ya()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Gs(a))if(0===r){var o=new wo(a.path);this.Qt(n,o,ys.newNoDocument(o,yo.min()))}else Ja(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=dl.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Gs(a.target)){var o=new wo(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,ys.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=xc();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new vl(e,n,this.Ut,this.Lt,r);return this.Lt=vc(),this.qt=bl(),this.Ut=new Ru(fo),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new Al,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new Ru(fo),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Ga("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new Al),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function bl(){return new Cu(wo.comparator)}function Il(){return new Cu(wo.comparator)}var xl={asc:"ASCENDING",desc:"DESCENDING"},El={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sl={and:"AND",or:"OR"},Tl=b((function e(t,n){k(this,e),this.databaseId=t,this.useProto3Json=n}));function _l(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nl(e,t){return _l(e,t.toTimestamp())}function Dl(e){return Ja(!!e),yo.fromTimestamp(function(e){var t=Bu(e);return new vo(t.seconds,t.nanos)}(e))}function Rl(e,t){return function(e){return new go(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ol(e){var t=go.fromString(e);return Ja(nf(t)),t}function Pl(e,t){return Rl(e.databaseId,t.path)}function Ml(e,t){var n=Ol(t);if(n.get(1)!==e.databaseId.projectId)throw new $a(Xa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new $a(Xa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wo(Bl(n))}function Ll(e,t){return Rl(e.databaseId,t)}function Fl(e){var t=Ol(e);return 4===t.length?go.emptyPath():Bl(t)}function Ul(e){return new go(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bl(e){return Ja(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vl(e,t,n){return{name:Pl(e,t),fields:n.value.mapValue.fields}}function jl(e,t,n){var r=Ml(e,t.name),i=Dl(t.updateTime),a=t.createTime?Dl(t.createTime):yo.min(),o=new ps({mapValue:{fields:t.fields}}),u=ys.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function ql(e,t){return"found"in t?function(e,t){Ja(!!t.found),t.found.name,t.found.updateTime;var n=Ml(e,t.found.name),r=Dl(t.found.updateTime),i=t.found.createTime?Dl(t.found.createTime):yo.min(),a=new ps({mapValue:{fields:t.found.fields}});return ys.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Ja(!!t.missing),Ja(!!t.readTime);var n=Ml(e,t.missing),r=Dl(t.readTime);return ys.newNoDocument(n,r)}(e,t):Ya()}function zl(e,t){var n;if(t instanceof Xc)n={update:Vl(e,t.key,t.value)};else if(t instanceof al)n={delete:Pl(e,t.key)};else if(t instanceof $c)n={update:Vl(e,t.key,t.data),updateMask:tf(t.fieldMask)};else{if(!(t instanceof ol))return Ya();n={verify:Pl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Pc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Mc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bc)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Ya()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Nl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ya()}(e,t.precondition)),n}function Ql(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Qc.updateTime(Dl(e.updateTime)):void 0!==e.exists?Qc.exists(e.exists):Qc.none()}(t.currentDocument):Qc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ja("REQUEST_TIME"===t.setToServerValue),n=new Pc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Mc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Fc(i)}else"increment"in t?n=new Bc(e,t.increment):Ya();var a=Ao.fromServerFormat(t.fieldPath);return new qc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Ml(e,t.update.name),a=new ps({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Mu(t.map((function(e){return Ao.fromServerFormat(e)})))}(t.updateMask);return new $c(i,a,o,n,r)}return new Xc(i,a,n,r)}if(t.delete){var u=Ml(e,t.delete);return new al(u,n)}if(t.verify){var s=Ml(e,t.verify);return new ol(s,n)}return Ya()}function Gl(e,t){return{documents:[Ll(e,t.path)]}}function Wl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ll(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ll(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ef(xs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Xl(e.field),direction:Yl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||Ho(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Kl(e){var t=Fl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ja(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Hl(e);return t instanceof xs&&Ts(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new As($l(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ho(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ms(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ms(n,t)}(n.endAt)),Js(t,i,u,o,s,"F",c,l)}function Hl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=$l(e.unaryFilter.field);return Is.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=$l(e.unaryFilter.field);return Is.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$l(e.unaryFilter.field);return Is.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$l(e.unaryFilter.field);return Is.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ya()}}(e):void 0!==e.fieldFilter?function(e){return Is.create($l(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ya()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xs.create(e.compositeFilter.filters.map((function(e){return Hl(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ya()}}(e.compositeFilter.op))}(e):Ya()}function Yl(e){return xl[e]}function Jl(e){return El[e]}function Zl(e){return Sl[e]}function Xl(e){return{fieldPath:e.canonicalString()}}function $l(e){return Ao.fromServerFormat(e.fieldPath)}function ef(e){return e instanceof Is?function(e){if("=="===e.op){if(os(e.value))return{unaryFilter:{field:Xl(e.field),op:"IS_NAN"}};if(as(e.value))return{unaryFilter:{field:Xl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(os(e.value))return{unaryFilter:{field:Xl(e.field),op:"IS_NOT_NAN"}};if(as(e.value))return{unaryFilter:{field:Xl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xl(e.field),op:Jl(e.op),value:e.value}}}(e):e instanceof xs?function(e){var t=e.getFilters().map((function(e){return ef(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Zl(e.op),filters:t}}}(e):Ya()}function tf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function nf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var rf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:yo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fu.EMPTY_BYTE_STRING;k(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return b(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),af=b((function e(t){k(this,e),this.se=t}));function of(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Pl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:_l(e,t.version.toTimestamp()),createTime:_l(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sf(t.version)};else{if(!t.isUnknownDocument())return Ya();r.unknownDocument={path:n.path.toArray(),version:sf(t.version)}}return r}function uf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function cf(e){var t=new vo(e.seconds,e.nanoseconds);return yo.fromTimestamp(t)}function lf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ql(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ql(e.se,t)})),u=vo.fromMillis(t.localWriteTimeMs);return new ul(t.batchId,u,n,o)}function ff(e){var t,n,r=cf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?cf(e.lastLimboFreeSnapshotVersion):yo.min();return void 0!==e.query.documents?(Ja(1===(n=e.query).documents.length),t=rc(Zs(Fl(n.documents[0])))):t=function(e){return rc(Kl(e))}(e.query),new rf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Fu.fromBase64String(e.resumeToken))}function hf(e,t){var n,r=sf(t.snapshotVersion),i=sf(t.lastLimboFreeSnapshotVersion);n=Gs(t.target)?Gl(e.se,t.target):Wl(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zs(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function df(e){var t=Kl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ac(t,t.limit,"L"):t}function pf(e,t){return new cl(t.largestBatchId,Ql(e.se,t.overlayMutation))}function vf(e,t){var n=t.path.lastSegment();return[e,Zo(t.path.popLast()),n]}function yf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:sf(r.readTime),documentKey:Zo(r.documentKey.path),largestBatchId:r.largestBatchId}}var mf=function(){function e(){k(this,e)}return b(e,[{key:"getBundleMetadata",value:function(e,t){return gf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:cf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return gf(e).put({bundleId:(n=t).id,createTime:sf(Dl(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return kf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:df(t.bundledQuery),readTime:cf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return kf(e).put(function(e){return{name:e.name,readTime:sf(Dl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function gf(e){return Eu(e,"bundles")}function kf(e){return Eu(e,"namedQueries")}var Af=function(){function e(t,n){k(this,e),this.serializer=t,this.userId=n}return b(e,[{key:"getOverlay",value:function(e,t){var n=this;return wf(e).get(vf(this.userId,t)).next((function(e){return e?pf(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=kc();return Mo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new cl(t,a);i.push(r.re(e,o))})),Mo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Zo(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(wf(e).J("collectionPathOverlayIndex",i))})),Mo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=kc(),a=Zo(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return wf(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=pf(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=kc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wf(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=pf(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return wf(e).put(function(e,t,n){var r=c(vf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zl(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function wf(e){return Eu(e,"documentOverlays")}var bf=function(){function e(){k(this,e)}return b(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Vu(e.integerValue));else if("doubleValue"in e){var n=Vu(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Yo(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(ju(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?cs(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Ya()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),wo.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function If(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function xf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=If(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}bf.pe=new bf;var Ef=function(){function e(){k(this,e),this.buffer=new Uint8Array(1024),this.position=0}return b(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=xf(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=xf(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Sf=function(){function e(t){k(this,e),this.Me=t}return b(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),Tf=function(){function e(t){k(this,e),this.Me=t}return b(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),_f=function(){function e(){k(this,e),this.Me=new Ef,this.Fe=new Sf(this.Me),this.Be=new Tf(this.Me)}return b(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Cf=function(){function e(t,n,r,i){k(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return b(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Nf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Df(e.arrayValue,t.arrayValue))?n:0!==(n=Df(e.directionalValue,t.directionalValue))?n:wo.comparator(e.documentKey,t.documentKey)}function Df(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Rf=function(){function e(t){k(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=g(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(a){r.e(a)}finally{r.f()}}return b(e,[{key:"Qe",value:function(e){Ja(e.collectionGroup===this.collectionId);var t=Io(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=xo(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=g(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Of(e){var t,n;if(Ja(e instanceof Is||e instanceof xs),e instanceof Is){if(e instanceof Us){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Is.create(e.field,"==",t)})))||[];return xs.create(r,"or")}return e}var i=e.filters.map((function(e){return Of(e)}));return xs.create(i,e.op)}function Pf(e){if(0===e.getFilters().length)return[];var t=Uf(Of(e));return Ja(Ff(t)),Mf(t)||Lf(t)?[t]:t.getFilters()}function Mf(e){return e instanceof Is}function Lf(e){return e instanceof xs&&Ts(e)}function Ff(e){return Mf(e)||Lf(e)||function(e){if(e instanceof xs&&Ss(e)){var t,n=g(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Mf(r)&&!Lf(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Uf(e){if(Ja(e instanceof Is||e instanceof xs),e instanceof Is)return e;if(1===e.filters.length)return Uf(e.filters[0]);var t=e.filters.map((function(e){return Uf(e)})),n=xs.create(t,e.op);return Ff(n=jf(n))?n:(Ja(n instanceof xs),Ja(Es(n)),Ja(n.filters.length>1),n.filters.reduce((function(e,t){return Bf(e,t)})))}function Bf(e,t){var n;return Ja(e instanceof Is||e instanceof xs),Ja(t instanceof Is||t instanceof xs),n=e instanceof Is?t instanceof Is?function(e,t){return xs.create([e,t],"and")}(e,t):Vf(e,t):t instanceof Is?Vf(t,e):function(e,t){if(Ja(e.filters.length>0&&t.filters.length>0),Es(e)&&Es(t))return Ds(e,t.getFilters());var n=Ss(e)?e:t,r=Ss(e)?t:e,i=n.filters.map((function(e){return Bf(e,r)}));return xs.create(i,"or")}(e,t),jf(n)}function Vf(e,t){if(Es(t))return Ds(t,e.getFilters());var n=t.filters.map((function(t){return Bf(e,t)}));return xs.create(n,"or")}function jf(e){if(Ja(e instanceof Is||e instanceof xs),e instanceof Is)return e;var t=e.getFilters();if(1===t.length)return jf(t[0]);if(_s(e))return e;var n=t.map((function(e){return jf(e)})),r=[];return n.forEach((function(t){t instanceof Is?r.push(t):t instanceof xs&&(t.op===e.op?r.push.apply(r,ne(t.filters)):r.push(t))})),1===r.length?r[0]:xs.create(r,e.op)}var qf=function(){function e(){k(this,e),this.He=new zf}return b(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Mo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Mo.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Mo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Mo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Mo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Mo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Mo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Mo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Mo.resolve(Co.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Mo.resolve(Co.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Mo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Mo.resolve()}}]),e}(),zf=function(){function e(){k(this,e),this.index={}}return b(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ru(go.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ru(go.comparator)).toArray()}}]),e}(),Qf=new Uint8Array(0),Gf=function(){function e(t,n){k(this,e),this.user=t,this.databaseId=n,this.Je=new zf,this.Ye=new dc((function(e){return zs(e)}),(function(e,t){return Qs(e,t)})),this.uid=t.uid||""}return b(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:Zo(i)};return Wf(e).put(a)}return Mo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[po(t),""],!1,!0);return Wf(e).j(r).next((function(e){var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(eu(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Hf(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Yf(e);return a.next((function(e){o.put(yf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Hf(e),r=Yf(e),i=Kf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Kf(e),i=!0,a=new Map;return Mo.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=xc(),o=[];return Mo.forEach(a,(function(i,a){var u;Ga("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(zs(t)));var s=function(e,t){var n=Io(t);if(void 0===n)return null;var r,i=g(Ws(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=g(xo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=g(Ws(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=g(xo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ks(e,o.fieldPath,e.startAt):Hs(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ms(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=g(xo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Hs(e,o.fieldPath,e.endAt):Ks(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ms(r,i)}(a,i),h=n.tn(i,a,l),d=n.tn(i,a,f),p=n.en(i,a,c),v=n.nn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Mo.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=wo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Mo.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:Pf(xs.create(e.filters,"and")).map((function(t){return qs(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):Qf,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),p=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,ne(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new Cf(e,wo.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new Cf(e,wo.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new Rf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Mo.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ru(Ao.comparator),r=!1,i=g(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=g(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=g(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new _f,i=g(xo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Le(a.kind);bf.pe.oe(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new _f;return bf.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new _f;return bf.pe.oe(ns(this.databaseId,t),n.Le(function(e){var t=xo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new _f);var i,a=0,o=g(xo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=g(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.an(t,s.fieldPath)&&is(c))r=this.hn(r,s,c);else{var h=f.Le(s.kind);bf.pe.oe(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=ne(e),a=[],o=g(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=g(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new _f;f.seed(l.$e()),bf.pe.oe(s,f.Le(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Is&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Hf(e),i=Yf(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Mo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new So(t.sequenceNumber,new Co(cf(t.readTime),new wo(eu(t.documentKey)),t.largestBatchId)):So.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Eo(Ao.fromServerFormat(n),r)}));return new bo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:fo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Hf(e),a=Yf(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Mo.forEach(t,(function(t){return a.put(yf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Mo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Mo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Mo.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Mo.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return Kf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return Kf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=Kf(e),i=new Ru(Nf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new Cf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Ru(Nf),r=this.un(t,e);if(null==r)return n;var i=Io(t);if(null!=i){var a=e.data.field(i.fieldPath);if(is(a)){var o,u=g(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Cf(t.indexId,e.key,this.sn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Cf(t.indexId,e.key,Qf,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Ga("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Pu(a),s=Pu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Pu(o)):l?(i(u),u=Pu(a)):(u=Pu(a),s=Pu(o))}}(r,i,Nf,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),Mo.waitFor(o)}},{key:"fn",value:function(e){var t=1;return Yf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Nf(e,t)})).filter((function(e,t,n){return!t||0!==Nf(e,n[t-1])}));var r=[];r.push(e);var i,a=g(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Nf(o,e),s=Nf(o,t);if(0===u)r[0]=e.qe();else if(u>0&&s<0)r.push(o),r.push(o.qe());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Qf,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Qf,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"yn",value:function(e,t){return Nf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Jf)}},{key:"getMinOffset",value:function(e,t){var n=this;return Mo.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||Ya()}))})).next(Jf)}}]),e}();function Wf(e){return Eu(e,"collectionParents")}function Kf(e){return Eu(e,"indexEntries")}function Hf(e){return Eu(e,"indexConfiguration")}function Yf(e){return Eu(e,"indexState")}function Jf(e){Ja(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;No(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Co(t.readTime,t.documentKey,n)}var Zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xf=function(){function e(t,n,r){k(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return b(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function $f(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ja(1===u)})));var c,l=[],f=g(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ru(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Mo.waitFor(a).next((function(){return l}))}function eh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ya();t=e.noDocument}return JSON.stringify(t).length}Xf.DEFAULT_COLLECTION_PERCENTILE=10,Xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xf.DEFAULT=new Xf(41943040,Xf.DEFAULT_COLLECTION_PERCENTILE,Xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xf.DISABLED=new Xf(-1,0,0);var th=function(){function e(t,n,r,i){k(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return b(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ih(e),o=rh(e);return o.add({}).next((function(u){Ja("number"==typeof u);var s,c=new ul(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return zl(e.se,t)})),i=n.mutations.map((function(t){return zl(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Ru((function(e,t){return fo(e.canonicalString(),t.canonicalString())})),d=g(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ru(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,iu))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[u]=c.keys()})),Mo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return rh(e).get(t).next((function(e){return e?(Ja(e.userId===n.userId),lf(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?Mo.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return rh(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ja(t.batchId>=r),a=lf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rh(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return lf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=nu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ih(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=eu(l);if(s===n.userId&&t.path.isEqual(h))return rh(e).get(f).next((function(e){if(!e)throw Ya();Ja(e.userId===n.userId),a.push(lf(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ru(fo),i=[];return t.forEach((function(t){var a=nu(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=ih(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=eu(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Mo.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=nu(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ru(fo);return ih(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=eu(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(rh(e).get(t).next((function(e){if(null===e)throw Ya();Ja(e.userId===n.userId),r.push(lf(n.serializer,e))})))})),Mo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return $f(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),Mo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Mo.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ih(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=eu(e[1]);i.push(a)}else r.done()})).next((function(){Ja(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return nh(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return ah(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return Ja(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function nh(e,t,n){var r=nu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ih(e).Z({range:a,Y:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function rh(e){return Eu(e,"mutations")}function ih(e){return Eu(e,"documentMutations")}function ah(e){return Eu(e,"mutationQueues")}var oh=function(){function e(t){k(this,e),this.Rn=t}return b(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),uh=function(){function e(t,n){k(this,e),this.referenceDelegate=t,this.serializer=n}return b(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new oh(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return yo.fromTimestamp(new vo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return sh(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return Ja(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return sh(e).Z((function(o,u){var s=ff(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Mo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return sh(e).Z((function(e,n){var r=ff(n);t(r)}))}},{key:"Pn",value:function(e){return ch(e).get("targetGlobalKey").next((function(e){return Ja(null!==e),e}))}},{key:"Vn",value:function(e,t){return ch(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return sh(e).put(hf(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=zs(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sh(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ff(n);Qs(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=lh(e);return t.forEach((function(t){var o=Zo(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Mo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=lh(e);return Mo.forEach(t,(function(t){var a=Zo(t.path);return Mo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=lh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lh(e),i=xc();return r.Z({range:n,Y:!0},(function(e,t,n){var r=eu(e[1]),a=new wo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Zo(t.path),r=IDBKeyRange.bound([n],[po(n)],!1,!0),i=0;return lh(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return sh(e).get(t).next((function(e){return e?ff(e):null}))}}]),e}();function sh(e){return Eu(e,"targets")}function ch(e){return Eu(e,"targetGlobal")}function lh(e){return Eu(e,"targetDocuments")}function fh(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=fo(r,o);return 0===s?fo(i,u):s}var hh=function(){function e(t){k(this,e),this.Cn=t,this.buffer=new Ru(fh),this.xn=0}return b(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();fh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),dh=function(){function e(t,n,r){k(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return b(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;Ga("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Vo(e.t0)){e.next=12;break}Ga("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Oo(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ph=function(){function e(t,n){k(this,e),this.Mn=t,this.params=n}return b(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Mo.resolve(Ko.ct);var r=new hh(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ga("LruGarbageCollector","Garbage collection skipped; disabled"),Mo.resolve(Zf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ga("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Zf):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ga("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Qa()<=ce.DEBUG&&Ga("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Mo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),vh=function(){function e(t,n){k(this,e),this.db=t,this.garbageCollector=function(e,t){return new ph(e,t)}(this,n)}return b(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return yh(e,n)}},{key:"removeReference",value:function(e,t,n){return yh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return yh(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return ah(e).X((function(r){return nh(e,r,t).next((function(e){return e&&(n=!0),Mo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,yo.min()),lh(e).delete([0,Zo(o.path)])}))}));i.push(s)}})).next((function(){return Mo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return yh(e,t)}},{key:"Un",value:function(e,t){var n,r=lh(e),i=Ko.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ko.ct&&t(new wo(eu(n)),i),i=s,n=u):i=Ko.ct})).next((function(){i!==Ko.ct&&t(new wo(eu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function yh(e,t){return lh(e).put(function(e,t){return{targetId:0,path:Zo(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var mh=function(){function e(){k(this,e),this.changes=new dc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return b(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,ys.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Mo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),gh=function(){function e(t){k(this,e),this.serializer=t}return b(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return bh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return bh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=ys.newInvalidDocument(t);return bh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ih(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:ys.newInvalidDocument(t)};return bh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ih(t))},(function(e,i){r={document:n.Qn(t,i),size:eh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=vc();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=vc(),i=new Cu(wo.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,eh(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return Mo.resolve();var r=new Ru(Eh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ih(r.first()),Ih(r.last())),a=r.getIterator(),o=a.getNext();return bh(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=wo.fromSegments([].concat(ne(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Eh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Ih(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),uf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bh(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=vc(),o=g(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Qn(wo.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(cc(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=vc(),o=xh(t,n),u=xh(t,Co.max());return bh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(wo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Ah(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wh(e).get("remoteDocumentGlobalKey").next((function(e){return Ja(!!e),e}))}},{key:"Gn",value:function(e,t){return wh(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=jl(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=wo.fromSegments(t.noDocument.path),i=cf(t.noDocument.readTime);n=ys.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ya();var a=wo.fromSegments(t.unknownDocument.path),o=cf(t.unknownDocument.version);n=ys.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new vo(e[0],e[1]);return yo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(yo.min()))return n}return ys.newInvalidDocument(e)}}]),e}();function kh(e){return new gh(e)}var Ah=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new dc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return b(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ru((function(e,t){return fo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=of(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=eh(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=of(t.Jn.serializer,o.convertToNoDocument(yo.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),Mo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(mh);function wh(e){return Eu(e,"remoteDocumentGlobal")}function bh(e){return Eu(e,"remoteDocumentsV14")}function Ih(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function xh(e,t){var n=t.documentKey.path.toArray();return[e,uf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Eh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=fo(n[a],r[a]))return i;return(i=fo(n.length,r.length))||((i=fo(n[n.length-2],r[r.length-2]))||fo(n[n.length-1],r[r.length-1]))}var Sh=b((function e(t,n){k(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Th=function(){function e(t,n,r,i){k(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return b(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Yc(r.mutation,e,Mu.empty(),vo.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,xc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xc(),i=kc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=mc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=kc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,xc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=vc(),a=wc(),o=wc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof $c)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Yc(o.mutation,t,o.mutation.getFieldMask(),vo.now())):a.set(t.key,Mu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Sh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=wc(),i=new Cu((function(e,t){return e-t})),a=xc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=g(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Mu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||xc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ac();c.forEach((function(e){if(!a.has(e)){var n=Kc(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Mo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return wo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Mo.resolve(kc()),u=-1,s=a;return o.next((function(t){return Mo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Mo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,xc())})).next((function(e){return{batchId:u,changes:gc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new wo(t)).next((function(e){var t=mc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=mc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Mo.forEach(o,(function(o){var u=function(e,t){return new Ys(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,ys.newInvalidDocument(r)))}));var n=mc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Yc(a.mutation,i,Mu.empty(),vo.now()),cc(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),_h=function(){function e(t){k(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return b(e,[{key:"getBundleMetadata",value:function(e,t){return Mo.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Dl(n.createTime)}),Mo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Mo.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:df(e.bundledQuery),readTime:Dl(e.readTime)}}(t)),Mo.resolve()}}]),e}(),Ch=function(){function e(){k(this,e),this.overlays=new Cu(wo.comparator),this.ts=new Map}return b(e,[{key:"getOverlay",value:function(e,t){return Mo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=kc();return Mo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Mo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Mo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=kc(),i=t.length+1,a=new wo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Mo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Cu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=kc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=kc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Mo.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new cl(t,n));var a=this.ts.get(t);void 0===a&&(a=xc(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),Nh=function(){function e(){k(this,e),this.es=new Ru(Dh.ns),this.ss=new Ru(Dh.rs)}return b(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Dh(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new Dh(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new wo(new go([])),r=new Dh(n,e),i=new Dh(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new wo(new go([])),n=new Dh(t,e),r=new Dh(t,e+1),i=xc();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Dh(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Dh=function(){function e(t,n){k(this,e),this.key=t,this.ds=n}return b(e,null,[{key:"ns",value:function(e,t){return wo.comparator(e.key,t.key)||fo(e.ds,t.ds)}},{key:"rs",value:function(e,t){return fo(e.ds,t.ds)||wo.comparator(e.key,t.key)}}]),e}(),Rh=function(){function e(t,n){k(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new Ru(Dh.ns)}return b(e,[{key:"checkEmpty",value:function(e){return Mo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ul(i,t,n,r);this.mutationQueue.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new Dh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Mo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Mo.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Mo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Mo.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Mo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Dh(t,0),i=new Dh(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Mo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ru(fo);return t.forEach((function(e){var t=new Dh(e,0),i=new Dh(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Mo.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;wo.isDocumentKey(i)||(i=i.child(""));var a=new Dh(new wo(i),0),o=new Ru(fo);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Mo.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ja(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Mo.forEach(t.mutations,(function(i){var a=new Dh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Dh(t,0),r=this._s.firstAfterOrEqual(n);return Mo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Mo.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Oh=function(){function e(t){k(this,e),this.Ts=t,this.docs=new Cu(wo.comparator),this.size=0}return b(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Mo.resolve(n?n.document.mutableCopy():ys.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=vc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():ys.newInvalidDocument(e))})),Mo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=vc(),a=t.path,o=new wo(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||No(_o(l),n)<=0||(r.has(l.key)||cc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Mo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ya()}},{key:"Es",value:function(e,t){return Mo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ph(this)}},{key:"getSize",value:function(e){return Mo.resolve(this.size)}}]),e}(),Ph=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).Jn=e,r}return b(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Mo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(mh),Mh=function(){function e(t){k(this,e),this.persistence=t,this.As=new dc((function(e){return zs(e)}),Qs),this.lastRemoteSnapshotVersion=yo.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Nh,this.targetCount=0,this.bs=oh.vn()}return b(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Mo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Mo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Mo.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Mo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Mo.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Mo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Mo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Mo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Mo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Mo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Mo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Mo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Mo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Mo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Mo.resolve(n)}},{key:"containsKey",value:function(e,t){return Mo.resolve(this.vs.containsKey(t))}}]),e}(),Lh=function(){function e(t,n){var r=this;k(this,e),this.Ps={},this.overlays={},this.Vs=new Ko(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new Mh(this),this.indexManager=new qf,this.remoteDocumentCache=new Oh((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new af(n),this.xs=new _h(this.serializer)}return b(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ch,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new Rh(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Ga("MemoryPersistence","Starting transaction:",e);var i=new Fh(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Mo.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Fh=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return b(n)}(Ro),Uh=function(){function e(t){k(this,e),this.persistence=t,this.$s=new Nh,this.Ms=null}return b(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Ya()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Mo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Mo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Mo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mo.forEach(this.Bs,(function(r){var i=wo.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,yo.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Mo.or([function(){return Mo.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),Bh=function(){function e(t){k(this,e),this.serializer=t}return b(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Lo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tu,{unique:!0}),e.createObjectStore("documentMutations")}(e),Vh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Mo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Vh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tu,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Mo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:yu});t.createIndex("collectionPathOverlayIndex",mu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",gu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:au});t.createIndex("documentKeyIndex",ou),t.createIndex("collectionGroupIndex",uu)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:hu}).createIndex("sequenceNumberIndex",du,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:pu}).createIndex("documentKeyIndex",vu,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=eh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Mo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Mo.forEach(r,(function(r){Ja(r.userId===n.userId);var i=lf(t.serializer,r);return $f(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new go(n),o=function(e){return[0,Zo(e)]}(a);r.push(t.get(o).next((function(n){return n?Mo.resolve():function(n){return t.put({targetId:0,path:Zo(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Mo.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:fu});var n=t.store("collectionParents"),r=new zf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Zo(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new go(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],eu(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=ff(r),a=hf(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new wo(go.fromString(i.document.name).popFirst(5)):i.noDocument?wo.fromSegments(i.noDocument.path):i.unknownDocument?wo.fromSegments(i.unknownDocument.path):Ya()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Mo.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=kh(this.serializer),a=new Lh(Uh.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:xc();lf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Mo.forEach(r,(function(e,r){var o=new ja(r),u=Af.ie(n.serializer,o),s=a.getIndexManager(o),c=th.ie(o,n.serializer,s,a.referenceDelegate);return new Th(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new xu(t,Ko.ct),e).next()}))}))}}]),e}();function Vh(e){e.createObjectStore("targetDocuments",{keyPath:cu}).createIndex("documentTargetsIndex",lu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",su,{unique:!0}),e.createObjectStore("targetGlobal")}var jh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(k(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=a,this.window=o,this.document=u,this.Hs=c,this.Js=l,this.Ys=f,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new $a(Xa.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vh(this,i),this.si=n+"main",this.serializer=new af(s),this.ii=new Fo(this.si,this.Ys,new Bh(this.serializer)),this.Ds=new uh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kh(this.serializer),this.xs=new mf,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&Wa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return b(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new $a(Xa.FAILED_PRECONDITION,jh);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Ko(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=ie(ee().mark((function n(r){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=ie(ee().mark((function t(n){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Qh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Vo(t))return Ga("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ga("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return zh(e).get("owner").next((function(e){return Mo.resolve(t._i(e))}))}},{key:"mi",value:function(e){return Qh(e).delete(this.clientId)}},{key:"gi",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i,a=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Eu(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Mo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=g(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?Mo.resolve(!0):zh(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new $a(Xa.FAILED_PRECONDITION,jh);return!1}}return!(!t.networkEnabled||!t.inForeground)||Qh(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ga("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ie(ee().mark((function e(){var t=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new xu(e,Ko.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Qh(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return th.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Gf(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Af.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Ga("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?Iu:14===i?bu:13===i?wu:12===i?Au:11===i?ku:void Ya();return this.ii.runTransaction(e,o,u,(function(i){return a=new xu(i,r.Vs?r.Vs.next():Ko.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw Wa("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new $a(Xa.FAILED_PRECONDITION,Do);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return zh(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new $a(Xa.FAILED_PRECONDITION,jh)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=zh(e);return n.get("owner").next((function(e){return t._i(e)?(Ga("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Mo.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Wa("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!L()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Ga("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Wa("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(Yt){Wa("Failed to set zombie client id.",Yt)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(Yt){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Fo.D()}}]),e}();function zh(e){return Eu(e,"owner")}function Qh(e){return Eu(e,"clientMetadata")}function Gh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Wh=function(){function e(t,n,r,i){k(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return b(e,null,[{key:"Di",value:function(t,n){var r,i=xc(),a=xc(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Kh=function(){function e(){k(this,e),this.Ci=!1}return b(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(Xs(t))return Mo.resolve(null);var r=rc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ac(t,null,"F"),r=rc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=xc.apply(void 0,ne(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,ac(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return Xs(t)||r.isEqual(yo.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Qa()<=ce.DEBUG&&Ga("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sc(t)),i.Fi(e,o,t,To(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new Ru(fc(e));return t.forEach((function(t,r){cc(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Qa()<=ce.DEBUG&&Ga("QueryEngine","Using full collection scan to execute query:",sc(t)),this.xi.getDocumentsMatchingQuery(e,t,Co.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Hh=function(){function e(t,n,r,i){k(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new Cu(fo),this.qi=new dc((function(e){return zs(e)}),Qs),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return b(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Th(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Yh(e,t,n,r){return new Hh(e,t,n,r)}function Jh(e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=xc(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=g(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(A){f.e(A)}finally{f.f()}}}catch(A){s.e(A)}finally{s.f()}var d,p=g(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=g(v.mutations);try{for(m.s();!(y=m.n()).done;){var k=y.value;u=u.add(k.key)}}catch(A){m.e(A)}finally{m.f()}}}catch(A){p.e(A)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}function Xh(e,t){var n=Za(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Mo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ja(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=xc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function $h(e){var t=Za(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function ed(e,t){var n=Za(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Fu.EMPTY_BYTE_STRING,yo.min()).withLastLimboFreeSnapshotVersion(yo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=vc(),s=xc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(td(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(yo.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Mo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function td(e,t,n){var r=xc(),i=xc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=vc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(yo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ga("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function nd(e,t){var n=Za(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function rd(e,t){var n=Za(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Mo.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new rf(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function id(e,t,n){return ad.apply(this,arguments)}function ad(){return ad=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Za(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Vo(e.t1)){e.next=12;break}throw e.t1;case 12:Ga("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ad.apply(this,arguments)}function od(e,t,n){var r=Za(e),i=yo.min(),a=xc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Za(e),i=r.qi.get(n);return void 0!==i?Mo.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,rc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:yo.min(),n?a:xc())})).next((function(e){return cd(r,lc(t),e),{documents:e,Wi:a}}))}))}function ud(e,t){var n=Za(e),r=Za(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function sd(e,t){var n=Za(e),r=n.Ui.get(t)||yo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,To(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return cd(n,t,e),e}))}function cd(e,t,n){var r=e.Ui.get(t)||yo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function ld(e,t,n,r){return fd.apply(this,arguments)}function fd(){return fd=ie(ee().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Za(t),o=xc(),u=vc(),s=g(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Hi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,rd(a,function(e){return rc(Zs(go.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return td(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),fd.apply(this,arguments)}function hd(e,t){return dd.apply(this,arguments)}function dd(){return dd=ie(ee().mark((function e(t,n){var r,i,a,o=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:xc(),e.next=3,rd(t,rc(df(n.bundledQuery)));case 3:return i=e.sent,a=Za(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Dl(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(Fu.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}function pd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function yd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var md=function(){function e(t,n,r,i){k(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return b(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new $a(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Wa("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gd=function(){function e(t,n,r){k(this,e),this.targetId=t,this.state=n,this.error=r}return b(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new $a(i.error.code,i.error.message))),a?new e(t,i.state,r):(Wa("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),kd=function(){function e(t,n){k(this,e),this.clientId=t,this.activeTargetIds=n}return b(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Sc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Jo(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Wa("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Ad=function(){function e(t,n){k(this,e),this.clientId=t,this.onlineState=n}return b(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Wa("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wd=function(){function e(){k(this,e),this.activeTargetIds=Sc()}return b(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),bd=function(){function e(t,n,r,i,a){k(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new Cu(fo),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=pd(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new wd),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return b(e,[{key:"start",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=g(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pd(this.persistenceKey,i)))&&(o=kd.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(u=this.storage.getItem(this.wr))&&(s=this.gr(u))&&this.yr(s),c=g(this.ur);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ir(f)}catch(d){c.e(d)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(yd(this.persistenceKey,e));if(n){var r=gd.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(yd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ga("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ga("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ga("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ga("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Wa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(ie(ee().mark((function e(){var r,i,a,o,u,s,c;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Ko.ct;if(null!=e)try{var n=JSON.parse(e);Ja("number"==typeof n),t=n}catch(e){Wa("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ko.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new md(this.currentUser,e,t,n),i=vd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=vd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=yd(this.persistenceKey,e),i=new gd(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return kd.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return md.Zi(new ja(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return gd.Zi(r,t)}},{key:"gr",value:function(e){return Ad.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:Ga("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=Sc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Id=function(){function e(){k(this,e),this.Br=new wd,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return b(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new wd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),xd=function(){function e(){k(this,e)}return b(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ed=function(){function e(){var t=this;k(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return b(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Ga("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){Ga("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Sd=null;function Td(){return null===Sd?Sd=268435456+Math.round(2147483648*Math.random()):Sd++,"0x"+Sd.toString(16)}var _d={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Cd=function(){function e(t){k(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return b(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),Nd="WebChannelConnection",Dd=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return b(n,[{key:"lo",value:function(e,t,n,r){var i=Td();return new Promise((function(a,o){var u=new Ba;u.setWithCredentials(!0),u.listenOnce(Pa.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Oa.NO_ERROR:var t=u.getResponseJson();Ga(Nd,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Oa.TIMEOUT:Ga(Nd,"RPC '".concat(e,"' ").concat(i," timed out")),o(new $a(Xa.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:var n=u.getStatus();if(Ga(Nd,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xa).indexOf(t)>=0?t:Xa.UNKNOWN}(s.status);o(new $a(c,s.message))}else o(new $a(Xa.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new $a(Xa.UNAVAILABLE,"Connection failed."));break;default:Ya()}}finally{Ga(Nd,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Ga(Nd,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=Td(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Da(),o=Ra(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Fa({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Ga(Nd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Cd({Wr:function(t){f?Ga(Nd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Ga(Nd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Ua.EventType.OPEN,(function(){f||Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Ua.EventType.CLOSE,(function(){f||(f=!0,Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Ua.EventType.ERROR,(function(t){f||(f=!0,Ka(Nd,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new $a(Xa.UNAVAILABLE,"The operation could not be completed")))})),d(c,Ua.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Ja(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=rl[e];if(void 0!==t)return hl(t)}(u),l=o.message;void 0===s&&(s=Xa.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new $a(s,l)),c.close()}else Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Ma.STAT_EVENT,(function(t){t.stat===La.PROXY?Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===La.NOPROXY&&Ga(Nd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){k(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return b(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=Td(),o=this.ao(e,t);Ga("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return Ga("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Ka("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=_d[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function Rd(){return"undefined"!=typeof window?window:null}function Od(){return"undefined"!=typeof document?document:null}function Pd(e){return new Tl(e,!0)}var Md=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;k(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return b(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Ga("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Ld=function(){function e(t,n,r,i,a,o,u,s){k(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Md(t,n)}return b(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===Xa.RESOURCE_EXHAUSTED?(Wa(n.toString()),Wa("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===Xa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new $a(Xa.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return Ga("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(Ga("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Fd=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return b(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ya()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Ja(void 0===t||"string"==typeof t),Fu.fromBase64String(t||"")):(Ja(void 0===t||t instanceof Uint8Array),Fu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Xa.UNKNOWN:hl(e.code);return new $a(t,e.message||"")}(o);n=new kl(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Ml(e,s.document.name),l=Dl(s.document.updateTime),f=s.document.createTime?Dl(s.document.createTime):yo.min(),h=new ps({mapValue:{fields:s.document.fields}}),d=ys.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new ml(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=Ml(e,y.document),g=y.readTime?Dl(y.readTime):yo.min(),k=ys.newNoDocument(m,g),A=y.removedTargetIds||[];n=new ml([],A,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Ml(e,w.document),I=w.removedTargetIds||[];n=new ml([],I,b,null)}else{if(!("filter"in t))return Ya();t.filter;var x=t.filter;x.targetId;var E=x.count||0,S=new ll(E),T=x.targetId;n=new gl(T,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return yo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?yo.min():t.readTime?Dl(t.readTime):yo.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Ul(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Gs(r)?{documents:Gl(e,r)}:{query:Wl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Cl(e,t.resumeToken):t.snapshotVersion.compareTo(yo.min())>0&&(n.readTime=_l(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ya()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Ul(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(Ld),Ud=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return b(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,Pt(p(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ja(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Ja(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Dl(e.updateTime):Dl(t);return n.isEqual(yo.min())&&(n=Dl(t)),new zc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Dl(e.commitTime);return this.listener.Zo(n,t)}return Ja(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Ul(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zl(t.serializer,e)}))};this.Fo(n)}}]),n}(Ld),Bd=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return b(n,[{key:"nu",value:function(){if(this.eu)throw new $a(Xa.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Xa.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new $a(Xa.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Xa.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new $a(Xa.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return b((function e(){k(this,e)}))}());var Vd=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return b(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Wa(t),this.ru=!1):Ga("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),jd=b((function e(t,n,r,i,a){var o=this;k(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Xd(o),!e.t0){e.next=5;break}return Ga("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Za(t)).du.add(4),e.next=4,Qd(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,qd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Vd(r,i)}));function qd(e){return zd.apply(this,arguments)}function zd(){return zd=ie(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xd(t)){e.next=18;break}n=g(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),zd.apply(this,arguments)}function Qd(e){return Gd.apply(this,arguments)}function Gd(){return Gd=ie(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Gd.apply(this,arguments)}function Wd(e,t){var n=Za(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),Zd(n)?Jd(n):Tp(n).No()&&Hd(n,t))}function Kd(e,t){var n=Za(e),r=Tp(n);n.fu.delete(t),r.No()&&Yd(n,t),0===n.fu.size&&(r.No()?r.$o():Xd(n)&&n.mu.set("Unknown"))}function Hd(e,t){e.gu.Ot(t.targetId),Tp(e).jo(t)}function Yd(e,t){e.gu.Ot(t),Tp(e).Wo(t)}function Jd(e){e.gu=new wl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),Tp(e).start(),e.mu.ou()}function Zd(e){return Xd(e)&&!Tp(e).xo()&&e.fu.size>0}function Xd(e){return 0===Za(e).du.size}function $d(e){e.gu=void 0}function ep(e){return tp.apply(this,arguments)}function tp(){return tp=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Hd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),tp.apply(this,arguments)}function np(e,t){return rp.apply(this,arguments)}function rp(){return rp=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$d(t),Zd(t)?(t.mu.au(n),Jd(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),rp.apply(this,arguments)}function ip(e,t,n){return ap.apply(this,arguments)}function ap(){return ap=ie(ee().mark((function e(t,n,r){var i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof kl&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ga("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,op(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ml?t.gu.Kt(n):n instanceof gl?t.gu.Jt(n):t.gu.zt(n),r.isEqual(yo.min())){e.next=29;break}return e.prev=14,e.next=17,$h(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Fu.EMPTY_BYTE_STRING,n.snapshotVersion)),Yd(e,t);var r=new rf(n.target,t,1,n.sequenceNumber);Hd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ga("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,op(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),ap.apply(this,arguments)}function op(e,t,n){return up.apply(this,arguments)}function up(){return up=ie(ee().mark((function e(t,n,r){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vo(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Qd(t);case 5:t.mu.set("Offline"),r||(r=function(){return $h(t.localStore)}),t.asyncQueue.enqueueRetryable(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,qd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}function sp(e,t){return t().catch((function(n){return op(e,n,t)}))}function cp(e){return lp.apply(this,arguments)}function lp(){return lp=ie(ee().mark((function e(t){var n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Za(t),r=_p(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!fp(n)){e.next=19;break}return e.prev=3,e.next=6,nd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,hp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,op(n,e.t0);case 17:e.next=2;break;case 19:dp(n)&&pp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),lp.apply(this,arguments)}function fp(e){return Xd(e)&&e.lu.length<10}function hp(e,t){e.lu.push(t);var n=_p(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function dp(e){return Xd(e)&&!_p(e).xo()&&e.lu.length>0}function pp(e){_p(e).start()}function vp(e){return yp.apply(this,arguments)}function yp(){return yp=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_p(t).tu();case 1:case"end":return e.stop()}}),e)}))),yp.apply(this,arguments)}function mp(e){return gp.apply(this,arguments)}function gp(){return gp=ie(ee().mark((function e(t){var n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_p(t),r=g(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t,n){return Ap.apply(this,arguments)}function Ap(){return Ap=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=sl.from(i,n,r),e.next=3,sp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,cp(t);case 5:case"end":return e.stop()}}),e)}))),Ap.apply(this,arguments)}function wp(e,t){return bp.apply(this,arguments)}function bp(){return bp=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&_p(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fl(i=n.code)||i===Xa.ABORTED){e.next=7;break}return r=t.lu.shift(),_p(t).Oo(),e.next=5,sp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,cp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:dp(t)&&pp(t);case 5:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}function Ip(e,t){return xp.apply(this,arguments)}function xp(){return xp=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Za(t)).asyncQueue.verifyOperationInProgress(),Ga("RemoteStore","RemoteStore received new credentials"),i=Xd(r),r.du.add(3),e.next=6,Qd(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,qd(r);case 12:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Ep(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Za(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,qd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Qd(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Tp(e){return e.yu||(e.yu=function(e,t,n){var r=Za(e);return r.nu(),new Fd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:ep.bind(null,e),Zr:np.bind(null,e),zo:ip.bind(null,e)}),e.wu.push(function(){var t=ie(ee().mark((function t(n){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),Zd(e)?Jd(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:$d(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function _p(e){return e.pu||(e.pu=function(e,t,n){var r=Za(e);return r.nu(),new Ud(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:vp.bind(null,e),Zr:wp.bind(null,e),Xo:mp.bind(null,e),Zo:kp.bind(null,e)}),e.wu.push(function(){var t=ie(ee().mark((function t(n){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,cp(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(Ga("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var Cp=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return b(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $a(Xa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Np(e,t){if(Wa("AsyncQueue","".concat(t,": ").concat(e)),Vo(e))return new $a(Xa.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Dp=function(){function e(t){k(this,e),this.comparator=t?function(e,n){return t(e,n)||wo.comparator(e.key,n.key)}:function(e,t){return wo.comparator(e.key,t.key)},this.keyedMap=mc(),this.sortedSet=new Cu(this.comparator)}return b(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Rp=function(){function e(){k(this,e),this.Iu=new Cu(wo.comparator)}return b(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Ya():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Op=function(){function e(t,n,r,i,a,o,u,s,c){k(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return b(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Dp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Pp=b((function e(){k(this,e),this.Eu=void 0,this.listeners=[]})),Mp=b((function e(){k(this,e),this.queries=new dc((function(e){return uc(e)}),oc),this.onlineState="Unknown",this.Au=new Set}));function Lp(e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=ie(ee().mark((function e(t,n){var r,i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Za(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Pp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Np(e.t0,"Initialization of query '".concat(sc(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&qp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Fp.apply(this,arguments)}function Up(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=ie(ee().mark((function e(t,n){var r,i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Za(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function Vp(e,t){var n,r=Za(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&qp(r)}function jp(e,t,n){var r=Za(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function qp(e){e.Au.forEach((function(e){e.next()}))}var zp=function(){function e(t,n,r){k(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return b(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Op(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=Op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),Qp=function(){function e(t,n){k(this,e),this.Nu=t,this.byteLength=n}return b(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Gp=function(){function e(t){k(this,e),this.serializer=t}return b(e,[{key:"Hi",value:function(e){return Ml(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?jl(this.serializer,e.document,!1):ys.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return Dl(e)}}]),e}(),Wp=function(){function e(t,n,r){k(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Kp(t)}return b(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=go.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Gp(this.serializer),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hi(a.metadata.name),s=g(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||xc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ld(this.localStore,new Gp(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=g(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,hd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Kp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Hp=b((function e(t){k(this,e),this.key=t})),Yp=b((function e(t){k(this,e),this.key=t})),Jp=function(){function e(t,n){k(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=xc(),this.mutatedKeys=xc(),this.Ku=fc(t),this.Gu=new Dp(this.Ku)}return b(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Rp,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=cc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ya()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Op(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Rp,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=xc(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Yp(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Hp(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=xc();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Op.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Zp=b((function e(t,n,r){k(this,e),this.query=t,this.targetId=n,this.view=r})),Xp=b((function e(t){k(this,e),this.key=t,this.ec=!1})),$p=function(){function e(t,n,r,i,a,o){k(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new dc((function(e){return uc(e)}),oc),this.ic=new Map,this.rc=new Set,this.oc=new Cu(wo.comparator),this.uc=new Map,this.cc=new Nh,this.ac={},this.hc=new Map,this.lc=oh.bn(),this.onlineState="Unknown",this.fc=void 0}return b(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function ev(e,t){return tv.apply(this,arguments)}function tv(){return tv=ie(ee().mark((function e(t,n){var r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Kv(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,rd(r.localStore,rc(n));case 8:return u=e.sent,r.isPrimaryClient&&Wd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,nv(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}function nv(e,t,n,r,i){return rv.apply(this,arguments)}function rv(){return rv=ie(ee().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=ie(ee().mark((function e(t,n,r,i){var a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,od(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Iv(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,od(t.localStore,n,!0);case 3:return o=e.sent,u=new Jp(n,o.Wi),s=u.zu(o.documents),c=yl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Iv(t,r,l.Yu),f=new Zp(n,r,u),e.abrupt("return",(t.sc.set(n,f),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),rv.apply(this,arguments)}function iv(e,t){return av.apply(this,arguments)}function av(){return av=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Za(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!oc(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,id(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Kd(r.remoteStore,i.targetId),wv(r,i.targetId)})).catch(Oo);case 9:e.next=14;break;case 11:return wv(r,i.targetId),e.next=14,id(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),av.apply(this,arguments)}function ov(e,t,n){return uv.apply(this,arguments)}function uv(){return uv=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hv(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Za(e),a=vo.now(),o=t.reduce((function(e,t){return e.add(t.key)}),xc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=vc(),s=xc();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Jc(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new $c(c.key,l,vs(l.value.mapValue),Qc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:gc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Cu(fo)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Sv(i,a.changes);case 9:return e.next=11,cp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Np(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),uv.apply(this,arguments)}function sv(e,t){return cv.apply(this,arguments)}function cv(){return cv=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),e.prev=1,e.next=4,ed(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Ja(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Ja(n.ec):e.removedDocuments.size>0&&(Ja(n.ec),n.ec=!1))})),e.next=8,Sv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Oo(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),cv.apply(this,arguments)}function lv(e,t,n){var r=Za(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Za(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&qp(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function fv(e,t,n){return hv.apply(this,arguments)}function hv(){return hv=ie(ee().mark((function e(t,n,r){var i,a,o,u,s,c;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Za(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Cu(wo.comparator)).insert(o,ys.newNoDocument(o,yo.min())),s=xc().add(o),c=new vl(yo.min(),new Map,new Ru(fo),u,s),e.next=9,sv(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),Ev(i),e.next=16;break;case 14:return e.next=16,id(i.localStore,n,!1).then((function(){return wv(i,n,r)})).catch(Oo);case 16:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),i=n.batch.batchId,e.prev=1,e.next=4,Xh(r.localStore,n);case 4:return a=e.sent,Av(r,i,null),kv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Sv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Oo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),pv.apply(this,arguments)}function vv(e,t,n){return yv.apply(this,arguments)}function yv(){return yv=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Za(t),e.prev=1,e.next=4,function(e,t){var n=Za(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Ja(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Av(i,n,r),kv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Sv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Oo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),yv.apply(this,arguments)}function mv(e,t){return gv.apply(this,arguments)}function gv(){return gv=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xd((r=Za(t)).remoteStore)||Ga("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Za(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Np(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),gv.apply(this,arguments)}function kv(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function Av(e,t,n){var r=Za(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function wv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||bv(e,t)}))}function bv(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Kd(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Ev(e))}function Iv(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Hp?(e.cc.addReference(a.key,t),xv(e,a)):a instanceof Yp?(Ga("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||bv(e,a.key)):Ya()}}catch(o){i.e(o)}finally{i.f()}}function xv(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Ga("SyncEngine","New document in limbo: "+n),e.rc.add(r),Ev(e))}function Ev(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new wo(go.fromString(t)),r=e.lc.next();e.uc.set(r,new Xp(n)),e.oc=e.oc.insert(n,r),Wd(e.remoteStore,new rf(rc(Zs(n.path)),r,2,Ko.ct))}}function Sv(e,t,n){return Tv.apply(this,arguments)}function Tv(){return Tv=ie(ee().mark((function e(t,n,r){var i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Za(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Wh.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.zo(a),e.next=9,function(){var e=ie(ee().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Mo.forEach(n,(function(t){return Mo.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Mo.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Vo(e.t0)){e.next=10;break}throw e.t0;case 10:Ga("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Li.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}function _v(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Za(t)).currentUser.isEqual(n)){e.next=11;break}return Ga("SyncEngine","User change. New user:",n.toKey()),e.next=5,Jh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new $a(Xa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Sv(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Nv(e,t){var n=Za(e),r=n.uc.get(t);if(r&&r.ec)return xc().add(r.key);var i=xc(),a=n.ic.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Dv(e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),e.next=3,od(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&Iv(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Ov(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),e.abrupt("return",sd(r.localStore,n).then((function(e){return Sv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Mv(e,t,n,r){return Lv.apply(this,arguments)}function Lv(){return Lv=ie(ee().mark((function e(t,n,r,i){var a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Za(t),e.next=3,function(e,t){var n=Za(e),r=Za(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Mo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,cp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Av(a,n,i||null),kv(a,n),function(e,t){Za(Za(e).mutationQueue).En(t)}(a.localStore,n)):Ya();case 11:return e.next=13,Sv(a,o);case 13:e.next=16;break;case 15:Ga("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Lv.apply(this,arguments)}function Fv(e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=ie(ee().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kv(r=Za(t)),Hv(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Bv(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Ep(r.remoteStore,!0);case 9:o=g(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Wd(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return wv(r,t),id(r.localStore,t,!0)})),Kd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Bv(r,c);case 21:return function(e){var t=Za(e);t.uc.forEach((function(e,n){Kd(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new Cu(wo.comparator)}(r),r.fc=!1,e.next=25,Ep(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Uv.apply(this,arguments)}function Bv(e,t,n){return Vv.apply(this,arguments)}function Vv(){return Vv=ie(ee().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Za(t),a=[],o=[],u=g(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ic.get(c))||0===f.length){e.next=34;break}return e.next=11,rd(i.localStore,rc(f[0]));case 11:l=e.sent,h=g(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.sc.get(p),e.next=20,Dv(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ud(i.localStore,c);case 36:return m=e.sent,e.next=39,rd(i.localStore,m);case 39:return l=e.sent,e.next=42,nv(i,jv(m),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Vv.apply(this,arguments)}function jv(e){return Js(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qv(e){var t=Za(e);return Za(Za(t.localStore).persistence).bi()}function zv(e,t,n,r){return Qv.apply(this,arguments)}function Qv(){return Qv=ie(ee().mark((function e(t,n,r,i){var a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Za(t)).fc){e.next=3;break}return e.abrupt("return",void Ga("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,sd(a.localStore,lc(o[0]));case 10:return u=e.sent,s=vl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Fu.EMPTY_BYTE_STRING),e.next=14,Sv(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,id(a.localStore,n,!0);case 17:return wv(a,n,i),e.abrupt("break",20);case 19:Ya();case 20:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Gv(e,t,n){return Wv.apply(this,arguments)}function Wv(){return Wv=ie(ee().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Kv(t)).fc){e.next=45;break}a=g(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return Ga("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,ud(i.localStore,u);case 12:return s=e.sent,e.next=15,rd(i.localStore,s);case 15:return c=e.sent,e.next=18,nv(i,jv(s),c.targetId,!1,c.resumeToken);case 18:Wd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=g(r),e.prev=30,h=ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,id(i.localStore,t,!1).then((function(){Kd(i.remoteStore,t),wv(i,t)})).catch(Oo);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Wv.apply(this,arguments)}function Kv(e){var t=Za(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fv.bind(null,t),t.nc.zo=Vp.bind(null,t.eventManager),t.nc.wc=jp.bind(null,t.eventManager),t}function Hv(e){var t=Za(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vv.bind(null,t),t}function Yv(e,t,n){var r=Za(e);(function(){var e=ie(ee().mark((function e(t,n,r){var i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Za(e),r=Dl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Kp(i)),a=new Wp(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Sv(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Za(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ka("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Jv=function(){function e(){k(this,e),this.synchronizeTabs=!1}return b(e,[{key:"initialize",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Pd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Yh(this.persistence,new Kh,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Lh(Uh.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Id}},{key:"terminate",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zv=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).mc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return b(n,[{key:"initialize",value:function(){var e=ie(ee().mark((function e(t){var r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(p(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,Hv(this.mc.syncEngine);case 6:return e.next=8,cp(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Yh(this.persistence,new Kh,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new dh(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Wo(t,this.persistence);return new Go(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Gh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Xf.withCacheSize(this.cacheSizeBytes):Xf.DEFAULT;return new qh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Rd(),Od(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Id}}]),n}(Jv),Xv=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return b(n,[{key:"initialize",value:function(){var e=ie(ee().mark((function e(t){var r,i=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(p(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof bd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:Mv.bind(null,r),Mr:zv.bind(null,r),Fr:Gv.bind(null,r),bi:qv.bind(null,r),Or:Ov.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fv(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Rd();if(!bd.D(t))throw new $a(Xa.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Gh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Zv),$v=function(){function e(){k(this,e)}return b(e,[{key:"initialize",value:function(){var e=ie(ee().mark((function e(t,n){var r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return lv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=_v.bind(null,this.syncEngine),e.next=12,Ep(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Mp}},{key:"createDatastore",value:function(e){var t,n=Pd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Dd(t));return function(e,t,n,r){return new Bd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return lv(o.syncEngine,e,0)},a=Ed.D()?new Ed:new xd,new jd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new $p(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Za(t),Ga("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Qd(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ey(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ie(ee().mark((function r(){var i;return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var ty=function(){function e(t){k(this,e),this.observer=t,this.muted=!1}return b(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Wa("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ny=function(){function e(t,n){var r=this;k(this,e),this.Ic=t,this.serializer=n,this.metadata=new eo,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return b(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Qp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=ie(ee().mark((function e(){var t,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=ie(ee().mark((function e(){var t,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ry=function(){function e(t){k(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return b(e,[{key:"lookup",value:function(){var e=ie(ee().mark((function e(t){var n,r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new $a(Xa.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ie(ee().mark((function e(t,n){var r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),i=Ul(r.serializer)+"/documents",a={documents:n.map((function(e){return Pl(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=ql(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ja(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new al(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ie(ee().mark((function e(){var t,n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=wo.fromPath(t);n.mutations.push(new ol(r,n.precondition(r)))})),e.next=7,function(){var e=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Za(t),i=Ul(r.serializer)+"/documents",a={writes:n.map((function(e){return zl(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ya();t=yo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new $a(Xa.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yo.min())?Qc.exists(!1):Qc.updateTime(t):Qc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yo.min()))throw new $a(Xa.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qc.updateTime(t)}return Qc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),iy=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new Md(this.asyncQueue,"transaction_retry")}return b(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(ie(ee().mark((function t(){var n,r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ry(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!Ho(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fl(t)}return!1}}]),e}(),ay=function(){function e(t,n,r,i){var a=this;k(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ja.UNAUTHENTICATED,this.clientId=lo.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ga("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ga("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return b(e,[{key:"getConfiguration",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new $a(Xa.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ie(ee().mark((function n(){var r;return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Np(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function oy(e,t){return uy.apply(this,arguments)}function uy(){return uy=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ga("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Jh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),uy.apply(this,arguments)}function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,fy(t);case 3:return r=e.sent,Ga("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ip(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ip(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}function ly(e){return"FirebaseError"===e.name?e.code===Xa.FAILED_PRECONDITION||e.code===Xa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function fy(e){return hy.apply(this,arguments)}function hy(){return hy=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Ga("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,oy(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),ly(n=e.t0)){e.next=13;break}throw n;case 13:return Ka("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,oy(t,new Jv);case 16:e.next=21;break;case 18:return Ga("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,oy(t,new Jv);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),hy.apply(this,arguments)}function dy(e){return py.apply(this,arguments)}function py(){return py=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Ga("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,sy(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Ga("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,sy(t,new $v);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),py.apply(this,arguments)}function vy(e){return fy(e).then((function(e){return e.persistence}))}function yy(e){return fy(e).then((function(e){return e.localStore}))}function my(e){return dy(e).then((function(e){return e.remoteStore}))}function gy(e){return dy(e).then((function(e){return e.syncEngine}))}function ky(e){return dy(e).then((function(e){return e.datastore}))}function Ay(e){return wy.apply(this,arguments)}function wy(){return wy=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ev.bind(null,n.syncEngine),r.onUnlisten=iv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function by(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function i(){return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ty({next:function(a){t.enqueueAndForget((function(){return Up(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new $a(Xa.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new $a(Xa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new zp(Zs(n.path),a,{includeMetadataChanges:!0,xu:!0});return Lp(e,o)},i.next=3,Ay(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Iy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function i(){return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ty({next:function(n){t.enqueueAndForget((function(){return Up(e,o)})),n.fromCache&&"server"===r.source?i.reject(new $a(Xa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new zp(n,a,{includeMetadataChanges:!0,xu:!0});return Lp(e,o)},i.next=3,Ay(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var xy=new Map;function Ey(e,t,n){if(!n)throw new $a(Xa.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Sy(e,t,n,r){if(!0===t&&!0===r)throw new $a(Xa.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Ty(e){if(!wo.isDocumentKey(e))throw new $a(Xa.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _y(e){if(wo.isDocumentKey(e))throw new $a(Xa.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ya()}function Ny(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new $a(Xa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cy(e);throw new $a(Xa.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Dy(e,t){if(t<=0)throw new $a(Xa.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ry=function(){function e(t){var n;if(k(this,e),void 0===t.host){if(void 0!==t.ssl)throw new $a(Xa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new $a(Xa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Sy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return b(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Oy=function(){function e(t,n,r,i){k(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1}return b(e,[{key:"app",get:function(){if(!this._app)throw new $a(Xa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new $a(Xa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new no;switch(e.type){case"firstParty":return new oo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new $a(Xa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=xy.get(e);t&&(Ga("ComponentProvider","Removing Datastore"),xy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Py(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ny(e,Oy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ka("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ja.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_(JSON.stringify({alg:"none",type:"JWT"})),_(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new $a(Xa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ja(s)}e._authCredentials=new ro(new to(o,u))}}var My=function(){function e(t,n,r){k(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return b(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Fy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Ly=function(){function e(t,n,r){k(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return b(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Fy=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,Zs(i)))._path=i,a.type="collection",a}return b(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new My(this.firestore,null,new wo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Ly);function Uy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),Ey("collection","path",t),e instanceof Oy){var a=go.fromString.apply(go,[t].concat(r));return _y(a),new Fy(e,null,a)}if(!(e instanceof My||e instanceof Fy))throw new $a(Xa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(go.fromString.apply(go,[t].concat(r)));return _y(o),new Fy(e.firestore,null,o)}function By(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),1===arguments.length&&(t=lo.A()),Ey("doc","path",t),e instanceof Oy){var a=go.fromString.apply(go,[t].concat(r));return Ty(a),new My(e,null,new wo(a))}if(!(e instanceof My||e instanceof Fy))throw new $a(Xa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(go.fromString.apply(go,[t].concat(r)));return Ty(o),new My(e.firestore,e instanceof Fy?e.converter:null,new wo(o))}function Vy(e,t){return e=$(e),t=$(t),(e instanceof My||e instanceof Fy)&&(t instanceof My||t instanceof Fy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function jy(e,t){return e=$(e),t=$(t),e instanceof Ly&&t instanceof Ly&&e.firestore===t.firestore&&oc(e._query,t._query)&&e.converter===t.converter}var qy=function(){function e(){var t=this;k(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Md(this,"async_queue_retry"),this.qc=function(){var e=Od();e&&Ga("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=Od();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return b(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=Od();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new eo;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=ie(ee().mark((function e(){var t=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Vo(e.t0)){e.next=12;break}throw e.t0;case 12:Ga("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wa("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=Cp.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Ya()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=g(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function zy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Qy=function(){function e(){k(this,e),this._progressObserver={},this._taskCompletionResolver=new eo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return b(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Gy=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new qy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return b(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ky(this),this._firestoreClient.terminate()}}]),n}(Oy);function Wy(e){return e._firestoreClient||Ky(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ky(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Gu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ay(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Hy(e,t,n){var r=new eo;return e.asyncQueue.enqueue(ie(ee().mark((function i(){var a;return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,oy(e,n);case 3:return i.next=5,sy(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),ly(a=i.t0)){i.next=13;break}throw a;case 13:Ka("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Yy(e){return function(e){return e.asyncQueue.enqueue(ie(ee().mark((function t(){var n,r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vy(e);case 2:return n=t.sent,t.next=5,my(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Za(e);return t.du.delete(0),qd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Wy(e=Ny(e,Gy)))}function Jy(e){return function(e){return e.asyncQueue.enqueue(ie(ee().mark((function t(){var n,r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vy(e);case 2:return n=t.sent,t.next=5,my(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Za(t)).du.add(0),e.next=4,Qd(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Wy(e=Ny(e,Gy)))}function Zy(e,t){var n=Wy(e=Ny(e,Gy)),r=new Qy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ny(e,t)}(function(e,t){if(e instanceof Uint8Array)return ey(e,t);if(e instanceof ArrayBuffer)return ey(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Pd(t));e.asyncQueue.enqueueAndForget(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Yv,t.next=3,gy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Xy(e,t){return function(e,t){return e.asyncQueue.enqueue(ie(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Za(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,yy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Wy(e=Ny(e,Gy)),t).then((function(t){return t?new Ly(e,null,t.query):null}))}function $y(e){if(e._initialized||e._terminated)throw new $a(Xa.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var em=function(){function e(t){k(this,e),this._byteString=t}return b(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Fu.fromBase64String(t))}catch(t){throw new $a(Xa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Fu.fromUint8Array(t))}}]),e}(),tm=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new $a(Xa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ao(n)}return b(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var nm=b((function e(t){k(this,e),this._methodName=t})),rm=function(){function e(t,n){if(k(this,e),!isFinite(t)||t<-90||t>90)throw new $a(Xa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new $a(Xa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return b(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fo(this._lat,e._lat)||fo(this._long,e._long)}}]),e}(),im=/^__.*__$/,am=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return b(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new $c(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xc(e,this.data,t,this.fieldTransforms)}}]),e}(),om=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return b(e,[{key:"toMutation",value:function(e,t){return new $c(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function um(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ya()}}var sm=function(){function e(t,n,r,i,a,o){k(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return b(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return _m(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(um(this.Yc)&&im.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),cm=function(){function e(t,n,r){k(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Pd(t)}return b(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new sm({Yc:e,methodName:t,oa:n,path:Ao.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function lm(e){var t=e._freezeSettings(),n=Pd(e._databaseId);return new cm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);xm("Data must be an object, but it was:",o,r);var u,s,c=bm(r,o);if(a.merge)u=new Mu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=g(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Em(t,l.value,n);if(!o.contains(d))throw new $a(Xa.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Cm(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Mu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new am(new ps(c),u,s)}var hm=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nm);function dm(e,t,n){return new sm({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var pm=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"_toFieldTransform",value:function(e){return new qc(e.path,new Pc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nm),vm=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).ca=r,i}return b(n,[{key:"_toFieldTransform",value:function(e){var t=dm(this,e,!0),n=this.ca.map((function(e){return wm(e,t)})),r=new Mc(n);return new qc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nm),ym=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).ca=r,i}return b(n,[{key:"_toFieldTransform",value:function(e){var t=dm(this,e,!0),n=this.ca.map((function(e){return wm(e,t)})),r=new Fc(n);return new qc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nm),mm=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).aa=r,i}return b(n,[{key:"_toFieldTransform",value:function(e){var t=new Bc(e.serializer,Cc(e.serializer,this.aa));return new qc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nm);function gm(e,t,n,r){var i=e.ua(1,t,n);xm("Data must be an object, but it was:",i,r);var a=[],o=ps.empty();Tu(r,(function(e,r){var u=Tm(t,e,n);r=$(r);var s=i.na(u);if(r instanceof hm)a.push(u);else{var c=wm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Mu(a);return new om(o,u,i.fieldTransforms)}function km(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[Em(t,r,n)],s=[i];if(a.length%2!=0)throw new $a(Xa.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Em(t,a[c])),s.push(a[c+1]);for(var l=[],f=ps.empty(),h=u.length-1;h>=0;--h)if(!Cm(l,u[h])){var d=u[h],p=s[h];p=$(p);var v=o.na(d);if(p instanceof hm)l.push(d);else{var y=wm(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Mu(l);return new om(f,m,o.fieldTransforms)}function Am(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wm(n,e.ua(r?4:3,t))}function wm(e,t){if(Im(e=$(e)))return xm("Unsupported field value:",t,e),bm(e,t);if(e instanceof nm)return function(e,t){if(!um(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=wm(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Cc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=vo.fromDate(e);return{timestampValue:_l(t.serializer,n)}}if(e instanceof vo){var r=new vo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_l(t.serializer,r)}}if(e instanceof rm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof em)return{bytesValue:Cl(t.serializer,e._byteString)};if(e instanceof My){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Rl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(Cy(e)))}(e,t)}function bm(e,t){var n={};return _u(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tu(e,(function(e,r){var i=wm(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Im(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vo||e instanceof rm||e instanceof em||e instanceof My||e instanceof nm)}function xm(e,t,n){if(!Im(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Cy(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function Em(e,t,n){if((t=$(t))instanceof tm)return t._internalPath;if("string"==typeof t)return Tm(e,t);throw _m("Field path arguments must be of type string or ",e,!1,void 0,n)}var Sm=new RegExp("[~\\*/\\[\\]]");function Tm(e,t,n){if(t.search(Sm)>=0)throw _m("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return h(tm,ne(t.split(".")))._internalPath}catch(r){throw _m("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function _m(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new $a(Xa.INVALID_ARGUMENT,u+e+s)}function Cm(e,t){return e.some((function(e){return e.isEqual(t)}))}var Nm=function(){function e(t,n,r,i,a){k(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return b(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new My(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Dm=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"data",value:function(){return Pt(p(n.prototype),"data",this).call(this)}}]),n}(Nm);function Rm(e,t){return"string"==typeof t?Tm(e,t):t instanceof tm?t._internalPath:t._delegate._internalPath}function Om(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new $a(Xa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pm=b((function e(){k(this,e)})),Mm=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n)}(Pm);function Lm(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Pm&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Um})).length,n=e.filter((function(e){return e instanceof Fm})).length;if(t>1||t>0&&n>0)throw new $a(Xa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=g(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Fm=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return b(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Jm(e._query,t),new Ly(e.firestore,e.converter,ic(e._query,t))}},{key:"_parse",value:function(e){var t=lm(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new $a(Xa.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Ym(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Hm(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Hm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Ym(o,a),u=Am(n,"where",o,"in"===a||"not-in"===a);return Is.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Mm);var Um=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return b(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:xs.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=g(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Jm(r,a),r=ic(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Ly(e.firestore,e.converter,ic(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Pm);var Bm=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return b(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new As(t,n);return function(e,t){if(null===$s(e)){var n=ec(e);null!==n&&Zm(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Ly(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ys(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Mm);var Vm=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return b(n,[{key:"_apply",value:function(e){return new Ly(e.firestore,e.converter,ac(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Mm);var jm=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return b(n,[{key:"_apply",value:function(e){var t=Km(e,this.type,this._docOrFields,this._inclusive);return new Ly(e.firestore,e.converter,function(e,t){return new Ys(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Mm);function qm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jm._create("startAt",t,!0)}function zm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jm._create("startAfter",t,!1)}var Qm=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return b(n,[{key:"_apply",value:function(e){var t=Km(e,this.type,this._docOrFields,this._inclusive);return new Ly(e.firestore,e.converter,function(e,t){return new Ys(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Mm);function Gm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qm._create("endBefore",t,!1)}function Wm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qm._create("endAt",t,!0)}function Km(e,t,n,r){if(n[0]=$(n[0]),n[0]instanceof Nm)return function(e,t,n,r,i){if(!r)throw new $a(Xa.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=g(nc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ns(t,r.key));else{var c=r.data.field(s.field);if(qu(c))throw new $a(Xa.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ms(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=lm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new $a(Xa.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!tc(e)&&-1!==c.indexOf("/"))throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(go.fromString(c));if(!wo.isDocumentKey(l))throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new wo(l);u.push(ns(t,f))}else{var h=Am(n,r,c);u.push(h)}}return new ms(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Hm(e,t,n){if("string"==typeof(n=$(n))){if(""===n)throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tc(t)&&-1!==n.indexOf("/"))throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(go.fromString(n));if(!wo.isDocumentKey(r))throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ns(e,new wo(r))}if(n instanceof My)return ns(e,n._key);throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Cy(n),"."))}function Ym(e,t){if(!Array.isArray(e)||0===e.length)throw new $a(Xa.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Jm(e,t){if(t.isInequality()){var n=ec(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=$s(e);null!==i&&Zm(e,r,i)}var a=function(e,t){var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i,a=g(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new $a(Xa.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new $a(Xa.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Zm(e,t,n){if(!n.isEqual(t))throw new $a(Xa.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Xm=function(){function e(){k(this,e)}return b(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ya()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Tu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new rm(Vu(e.latitude),Vu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=zu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bu(e);return new vo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=go.fromString(e);Ja(nf(n));var r=new Wu(n.get(1),n.get(3)),i=new wo(n.popFirst(5));return r.isEqual(t)||Wa("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $m(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var eg=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return b(n,[{key:"convertBytes",value:function(e){return new em(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new My(this.firestore,null,t)}}]),n}(Xm);var tg=function(){function e(t,n){k(this,e),this.hasPendingWrites=t,this.fromCache=n}return b(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ng=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o,u){var s;return k(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return b(n,[{key:"exists",value:function(){return Pt(p(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Rm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Nm),rg=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Pt(p(n.prototype),"data",this).call(this,e)}}]),n}(ng),ig=function(){function e(t,n,r,i){k(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tg(i.hasPendingWrites,i.fromCache),this.query=r}return b(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rg(n._firestore,n._userDataWriter,r.key,r,new tg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new $a(Xa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new rg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ag(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function ag(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ya()}}function og(e,t){return e instanceof ng&&t instanceof ng?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ig&&t instanceof ig&&e._firestore===t._firestore&&jy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var ug=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return b(n,[{key:"convertBytes",value:function(e){return new em(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new My(this.firestore,null,t)}}]),n}(Xm);function sg(e){e=Ny(e,My);var t=Ny(e.firestore,Gy),n=Wy(t),r=new ug(t);return function(e,t){var n=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function r(){return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Za(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new $a(Xa.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Np(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,yy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new ng(t,r,e._key,n,new tg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function cg(e){e=Ny(e,Ly);var t=Ny(e.firestore,Gy),n=Wy(t),r=new ug(t);return function(e,t){var n=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function r(){return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ie(ee().mark((function e(t,n,r){var i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,od(t,n,!0);case 3:i=e.sent,a=new Jp(n,i.Wi),o=a.zu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Np(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,yy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ig(t,r,e,n)}))}function lg(e,t,n){e=Ny(e,My);var r=Ny(e.firestore,Gy),i=$m(e.converter,t,n);return pg(r,[fm(lm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Qc.none())])}function fg(e,t,n){e=Ny(e,My);for(var r=Ny(e.firestore,Gy),i=lm(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return pg(r,[("string"==typeof(t=$(t))||t instanceof tm?km(i,"updateDoc",e._key,t,n,o):gm(i,"updateDoc",e._key,t)).toMutation(e._key,Qc.exists(!0))])}function hg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||zy(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(zy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof My)l=Ny(e.firestore,Gy),f=Zs(e._key.path),c={next:function(t){n[s]&&n[s](vg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Ny(e,Ly);l=Ny(p.firestore,Gy),f=p._query;var v=new ug(l);c={next:function(e){n[s]&&n[s](new ig(l,v,p,e))},error:n[s+1],complete:n[s+2]},Om(e._query)}return function(e,t,n,r){var i=new ty(r),a=new zp(t,i,n);return e.asyncQueue.enqueueAndForget(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Lp,t.next=3,Ay(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Up,t.next=3,Ay(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Wy(l),f,h,c)}function dg(e,t){return function(e,t){var n=new ty(t);return e.asyncQueue.enqueueAndForget(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Za(e).Au.add(t),t.next()},t.next=3,Ay(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Za(e).Au.delete(t)},t.next=3,Ay(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Wy(e=Ny(e,Gy)),zy(t)?t:{next:t})}function pg(e,t){return function(e,t){var n=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function r(){return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ov,r.next=3,gy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Wy(e),t)}function vg(e,t,n){var r=n.docs.get(t._key),i=new ug(e);return new ng(e,i,t._key,r,new tg(n.hasPendingWrites,n.fromCache),t.converter)}var yg={maxAttempts:5},mg=function(){function e(t,n){k(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lm(t)}return b(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=gg(e,this._firestore),i=$m(r.converter,t,n),a=fm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Qc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=gg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof tm?km(this._dataReader,"WriteBatch.update",i._key,t,n,o):gm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Qc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=gg(e,this._firestore);return this._mutations=this._mutations.concat(new al(t._key,Qc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new $a(Xa.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function gg(e,t){if((e=$(e)).firestore!==t)throw new $a(Xa.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var kg=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r))._firestore=e,i}return b(n,[{key:"get",value:function(e){var t=this,r=gg(e,this._firestore),i=new ug(this._firestore);return Pt(p(n.prototype),"get",this).call(this,e).then((function(e){return new ng(t._firestore,i,r._key,e._document,new tg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){k(this,e),this._firestore=t,this._transaction=n,this._dataReader=lm(t)}return b(e,[{key:"get",value:function(e){var t=this,n=gg(e,this._firestore),r=new eg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ya();var i=e[0];if(i.isFoundDocument())return new Nm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Nm(t._firestore,r,n._key,null,n.converter);throw Ya()}))}},{key:"set",value:function(e,t,n){var r=gg(e,this._firestore),i=$m(r.converter,t,n),a=fm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=gg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof tm?km(this._dataReader,"Transaction.update",i._key,t,n,o):gm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=gg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Ag(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vm("arrayUnion",t)}function wg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ym("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qa=e}(tt),He(new ae("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Gy(new io(e.getProvider("auth-internal")),new so(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new $a(Xa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ut(Va,"3.10.0",e),ut(Va,"3.10.0","esm2017")}();function bg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new $a("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ig(){if("undefined"===typeof Uint8Array)throw new $a("unimplemented","Uint8Arrays are not available in this environment.")}function xg(){if("undefined"==typeof atob)throw new $a("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Eg=function(){function e(t){k(this,e),this._delegate=t}return b(e,[{key:"toBase64",value:function(){return xg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ig(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return xg(),new e(em.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ig(),new e(em.fromUint8Array(t))}}]),e}();function Sg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Tg=function(){function e(){k(this,e)}return b(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){$y(e=Ny(e,Gy));var n=Wy(e);if(n._uninitializedComponentsProvider)throw new $a(Xa.FAILED_PRECONDITION,"SDK cache is already specified.");Ka("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new $v;return Hy(n,i,new Zv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){$y(e=Ny(e,Gy));var t=Wy(e);if(t._uninitializedComponentsProvider)throw new $a(Xa.FAILED_PRECONDITION,"SDK cache is already specified.");Ka("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new $v;return Hy(t,r,new Xv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new $a(Xa.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new eo;return e._queue.enqueueAndForgetEvenWhileRestricted(ie(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fo.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Fo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Gh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),_g=function(){function e(t,n,r){var i=this;k(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Wu||(this._appCompat=t)}return b(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Py(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Yy(this._delegate)}},{key:"disableNetwork",value:function(){return Jy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Sy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=mv,n.next=3,gy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Wy(e=Ny(e,Gy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return dg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new $a("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new qg(this,Uy(this._delegate,e))}catch(t){throw Pg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Og(this,By(this._delegate,e))}catch(t){throw Pg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Bg(this,function(e,t){if(e=Ny(e,Oy),Ey("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new $a(Xa.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ly(e,null,function(e){return new Ys(go.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Pg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Ny(e,Gy);var r=Object.assign(Object.assign({},yg),n);return function(e){if(e.maxAttempts<1)throw new $a(Xa.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new eo;return e.asyncQueue.enqueueAndForget(ie(ee().mark((function i(){var a;return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ky(e);case 2:a=i.sent,new iy(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Wy(e),(function(n){return t(new kg(e,n))}),r)}(this._delegate,(function(n){return e(new Ng(t,n))}))}},{key:"batch",value:function(){var e=this;return Wy(this._delegate),new Dg(new mg(this._delegate,(function(t){return pg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Zy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Xy(this._delegate,e).then((function(e){return e?new Bg(t,e):null}))}}]),e}(),Cg=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return b(n,[{key:"convertBytes",value:function(e){return new Eg(new em(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Og.forKey(t,this.firestore,null)}}]),n}(Xm);var Ng=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Cg(t)}return b(e,[{key:"get",value:function(e){var t=this,n=zg(e);return this._delegate.get(n).then((function(e){return new Fg(t._firestore,new ng(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=zg(e);return n?(bg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=zg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=zg(e);return this._delegate.delete(t),this}}]),e}(),Dg=function(){function e(t){k(this,e),this._delegate=t}return b(e,[{key:"set",value:function(e,t,n){var r=zg(e);return n?(bg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=zg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=zg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Rg=function(){function e(t,n,r){k(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return b(e,[{key:"fromFirestore",value:function(e,t){var n=new rg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ug(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Cg(t),n),i.set(n,a)),a}}]),e}();Rg.INSTANCES=new WeakMap;var Og=function(){function e(t,n){k(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Cg(t)}return b(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new qg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new qg(this.firestore,Uy(this._delegate,e))}catch(t){throw Pg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$(e))instanceof My&&Vy(this._delegate,e)}},{key:"set",value:function(e,t){t=bg("DocumentReference.set",t);try{return t?lg(this._delegate,e,t):lg(this._delegate,e)}catch(n){throw Pg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?fg(this._delegate,e):fg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Pg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return pg(Ny(e.firestore,Gy),[new al(e._key,Qc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Mg(n),a=Lg(n,(function(t){return new Fg(e.firestore,new ng(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return hg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?sg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ny(e,My);var t=Ny(e.firestore,Gy);return by(Wy(t),e._key,{source:"server"}).then((function(n){return vg(t,e,n)}))}(this._delegate):function(e){e=Ny(e,My);var t=Ny(e.firestore,Gy);return by(Wy(t),e._key).then((function(n){return vg(t,e,n)}))}(this._delegate),t.then((function(e){return new Fg(n.firestore,new ng(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Rg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new $a("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new My(n._delegate,r,new wo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new My(n._delegate,r,t))}}]),e}();function Pg(e,t,n){return e.message=e.message.replace(t,n),e}function Mg(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Sg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Lg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Sg(e[0])?e[0]:Sg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Fg=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return b(e,[{key:"ref",get:function(){return new Og(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return og(this._delegate,e._delegate)}}]),e}(),Ug=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ya()}(void 0!==t),t}}]),n}(Fg),Bg=function(){function e(t,n){k(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Cg(t)}return b(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Lm(this._delegate,function(e,t,n){var r=t,i=Rm("where",e);return Fm._create(i,r,n)}(t,n,r)))}catch(i){throw Pg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Lm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Rm("orderBy",e);return Bm._create(n,t)}(t,n)))}catch(r){throw Pg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Lm(this._delegate,function(e){return Dy("limit",e),Vm._create("limit",e,"F")}(t)))}catch(n){throw Pg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Lm(this._delegate,function(e){return Dy("limitToLast",e),Vm._create("limitToLast",e,"L")}(t)))}catch(n){throw Pg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Lm(this._delegate,qm.apply(void 0,arguments)))}catch(t){throw Pg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Lm(this._delegate,zm.apply(void 0,arguments)))}catch(t){throw Pg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Lm(this._delegate,Gm.apply(void 0,arguments)))}catch(t){throw Pg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Lm(this._delegate,Wm.apply(void 0,arguments)))}catch(t){throw Pg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return jy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?cg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ny(e,Ly);var t=Ny(e.firestore,Gy),n=Wy(t),r=new ug(t);return Iy(n,e._query,{source:"server"}).then((function(n){return new ig(t,r,e,n)}))}(this._delegate):function(e){e=Ny(e,Ly);var t=Ny(e.firestore,Gy),n=Wy(t),r=new ug(t);return Om(e._query),Iy(n,e._query).then((function(n){return new ig(t,r,e,n)}))}(this._delegate),t.then((function(e){return new jg(n.firestore,new ig(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Mg(n),a=Lg(n,(function(t){return new jg(e.firestore,new ig(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return hg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Rg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Vg=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return b(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Ug(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),jg=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return b(e,[{key:"query",get:function(){return new Bg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Ug(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Vg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Ug(n._firestore,r))}))}},{key:"isEqual",value:function(e){return og(this._delegate,e._delegate)}}]),e}(),qg=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return b(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Og(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Og(this.firestore,void 0===e?By(this._delegate):By(this._delegate,e))}catch(t){throw Pg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ny(e.firestore,Gy),r=By(e),i=$m(e.converter,t);return pg(n,[fm(lm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Og(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Vy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Rg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Bg);function zg(e){return Ny(e,My)}var Qg,Gg=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=h(tm,n)}return b(e,[{key:"isEqual",value:function(e){return(e=$(e))instanceof tm&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ao.keyField().canonicalString())}}]),e}(),Wg=function(){function e(t){k(this,e),this._delegate=t}return b(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new pm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new hm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Ag.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=wg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new mm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Kg={Firestore:_g,GeoPoint:rm,Timestamp:vo,Blob:Eg,Transaction:Ng,WriteBatch:Dg,DocumentReference:Og,DocumentSnapshot:Fg,Query:Bg,QueryDocumentSnapshot:Ug,QuerySnapshot:jg,CollectionReference:qg,FieldPath:Gg,FieldValue:Wg,setLogLevel:function(e){!function(e){za.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ae("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Kg)))})(Qg=Ot,(function(e,t){return new _g(e,t,new Tg)})),Qg.registerVersion("@firebase/firestore-compat","0.3.6");function Hg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Yg;Object.create;var Jg={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Zg="EMAIL_SIGNIN",Xg="PASSWORD_RESET",$g="RECOVER_EMAIL",ek="REVERT_SECOND_FACTOR_ADDITION",tk="VERIFY_AND_CHANGE_EMAIL",nk="VERIFY_EMAIL";function rk(){return I({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ik=function(){var e;return I(e={},"admin-restricted-operation","This operation is restricted to administrators only."),I(e,"argument-error",""),I(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),I(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),I(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),I(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),I(e,"cordova-not-ready","Cordova framework is not ready."),I(e,"cors-unsupported","This browser is not supported."),I(e,"credential-already-in-use","This credential is already associated with a different user account."),I(e,"custom-token-mismatch","The custom token corresponds to a different audience."),I(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),I(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),I(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),I(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),I(e,"email-already-in-use","The email address is already in use by another account."),I(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),I(e,"expired-action-code","The action code has expired."),I(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),I(e,"internal-error","An internal AuthError has occurred."),I(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),I(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),I(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),I(e,"invalid-auth-event","An internal AuthError has occurred."),I(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),I(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),I(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),I(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),I(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),I(e,"invalid-email","The email address is badly formatted."),I(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),I(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),I(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),I(e,"invalid-credential","The supplied auth credential is malformed or has expired."),I(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),I(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),I(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),I(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),I(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),I(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),I(e,"wrong-password","The password is invalid or the user does not have a password."),I(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),I(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),I(e,"invalid-provider-id","The specified provider ID is invalid."),I(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),I(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),I(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),I(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),I(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),I(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),I(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),I(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),I(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),I(e,"missing-continue-uri","A continue URL must be provided in the request."),I(e,"missing-iframe-start","An internal AuthError has occurred."),I(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),I(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),I(e,"missing-password","A non-empty password must be provided"),I(e,"missing-multi-factor-info","No second factor identifier is provided."),I(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),I(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),I(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),I(e,"app-deleted","This instance of FirebaseApp has been deleted."),I(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),I(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),I(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),I(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),I(e,"no-auth-event","An internal AuthError has occurred."),I(e,"no-such-provider","User was not linked to an account with the given provider."),I(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),I(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),I(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),I(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),I(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),I(e,"provider-already-linked","User can only be linked to one identity for the given provider."),I(e,"quota-exceeded","The project's quota for this operation has been exceeded."),I(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),I(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),I(e,"rejected-credential","The request contains malformed or mismatching credentials."),I(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),I(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),I(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),I(e,"timeout","The operation has timed out."),I(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),I(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),I(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),I(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),I(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),I(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),I(e,"unverified-email","The operation requires a verified email."),I(e,"user-cancelled","The user did not grant your application the permissions it requested."),I(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),I(e,"user-disabled","The user account has been disabled by an administrator."),I(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),I(e,"user-signed-out",""),I(e,"weak-password","The password must be 6 characters long or more."),I(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),I(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ak=rk,ok=new q("auth","Firebase",rk()),uk=new ye("@firebase/auth");function sk(e){if(uk.logLevel<=ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uk.error.apply(uk,["Auth (".concat(tt,"): ").concat(e)].concat(n))}}function ck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw dk.apply(void 0,[e].concat(n))}function lk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dk.apply(void 0,[e].concat(n))}function fk(e,t,n){var r=Object.assign(Object.assign({},ak()),I({},t,n));return new q("auth","Firebase",r).create(t,{appName:e.name})}function hk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ck(e,"argument-error"),fk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function dk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ne(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ne(o)))}return ok.create.apply(ok,[e].concat(n))}function pk(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw dk.apply(void 0,[t].concat(r))}}function vk(e){var t="INTERNAL ASSERTION FAILED: "+e;throw sk(t),new Error(t)}function yk(e,t){e||vk(t)}var mk=new Map;function gk(e){yk(e instanceof Function,"Expected a class definition");var t=mk.get(e);return t?(yk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mk.set(e,t),t)}function kk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ak(){return"http:"===wk()||"https:"===wk()}function wk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var bk=function(){function e(t,n){k(this,e),this.shortDelay=t,this.longDelay=n,yk(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(M())||U()}return b(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ak()||F()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ik(e,t){yk(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var xk=function(){function e(){k(this,e)}return b(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void vk("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void vk("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void vk("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ek=(I(Yg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),I(Yg,"MISSING_CUSTOM_TOKEN","internal-error"),I(Yg,"INVALID_IDENTIFIER","invalid-email"),I(Yg,"MISSING_CONTINUE_URI","internal-error"),I(Yg,"INVALID_PASSWORD","wrong-password"),I(Yg,"MISSING_PASSWORD","missing-password"),I(Yg,"EMAIL_EXISTS","email-already-in-use"),I(Yg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),I(Yg,"INVALID_IDP_RESPONSE","invalid-credential"),I(Yg,"INVALID_PENDING_TOKEN","invalid-credential"),I(Yg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),I(Yg,"MISSING_REQ_TYPE","internal-error"),I(Yg,"EMAIL_NOT_FOUND","user-not-found"),I(Yg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),I(Yg,"EXPIRED_OOB_CODE","expired-action-code"),I(Yg,"INVALID_OOB_CODE","invalid-action-code"),I(Yg,"MISSING_OOB_CODE","internal-error"),I(Yg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),I(Yg,"INVALID_ID_TOKEN","invalid-user-token"),I(Yg,"TOKEN_EXPIRED","user-token-expired"),I(Yg,"USER_NOT_FOUND","user-token-expired"),I(Yg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),I(Yg,"INVALID_CODE","invalid-verification-code"),I(Yg,"INVALID_SESSION_INFO","invalid-verification-id"),I(Yg,"INVALID_TEMPORARY_PROOF","invalid-credential"),I(Yg,"MISSING_SESSION_INFO","missing-verification-id"),I(Yg,"SESSION_EXPIRED","code-expired"),I(Yg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),I(Yg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),I(Yg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),I(Yg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),I(Yg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),I(Yg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),I(Yg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),I(Yg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),I(Yg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),I(Yg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),I(Yg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Yg),Sk=new bk(3e4,6e4);function Tk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function _k(e,t,n,r){return Ck.apply(this,arguments)}function Ck(){return Ck=ie(ee().mark((function e(t,n,r,i){var a,o=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Nk(t,a,ie(ee().mark((function e(){var a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=K(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",xk.fetch()(Pk(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ck.apply(this,arguments)}function Nk(e,t,n){return Dk.apply(this,arguments)}function Dk(){return Dk=ie(ee().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ek),n),e.prev=2,a=new Mk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Lk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Lk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Lk(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Lk(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw fk(t,p,d);case 34:ck(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof j)){e.next=41;break}throw e.t0;case 41:ck(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Dk.apply(this,arguments)}function Rk(e,t,n,r){return Ok.apply(this,arguments)}function Ok(){return Ok=ie(ee().mark((function e(t,n,r,i){var a,o,u=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,_k(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ck(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ok.apply(this,arguments)}function Pk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ik(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Mk=function(){function e(t){var n=this;k(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(lk(n.auth,"network-request-failed"))}),Sk.get())}))}return b(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Lk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=lk(e,t,r);return i.customData._tokenResponse=n,i}function Fk(e,t){return Uk.apply(this,arguments)}function Uk(){return(Uk=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bk(e,t){return Vk.apply(this,arguments)}function Vk(){return(Vk=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jk(e,t){return qk.apply(this,arguments)}function qk(){return(qk=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Qk(){return Qk=ie(ee().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=$(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,pk((a=Wk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:zk(Gk(a.auth_time)),issuedAtTime:zk(Gk(a.iat)),expirationTime:zk(Gk(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Qk.apply(this,arguments)}function Gk(e){return 1e3*Number(e)}function Wk(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return sk("JWT malformed, contained fewer than 3 sections"),null;try{var a=C(r);return a?JSON.parse(a):(sk("Failed to decode base64 JWT payload"),null)}catch(o){return sk("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Kk(e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=ie(ee().mark((function e(t,n){var r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof j&&Yk(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Hk.apply(this,arguments)}function Yk(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Jk=function(){function e(t){k(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return b(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zk=function(){function e(t,n){k(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return b(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=zk(this.lastLoginAt),this.creationTime=zk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Xk(e){return $k.apply(this,arguments)}function $k(){return $k=ie(ee().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Kk(t,jk(r,{idToken:i}));case 6:pk(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Hg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=tA(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Zk(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function eA(){return(eA=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(t),e.next=3,Xk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tA(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ne(n),ne(t))}function nA(e,t){return rA.apply(this,arguments)}function rA(){return(rA=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nk(t,{},ie(ee().mark((function e(){var r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Pk(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",xk.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iA=function(){function e(){k(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return b(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){pk(e.idToken,"internal-error"),pk("undefined"!==typeof e.idToken,"internal-error"),pk("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Wk(e);return pk(t,"internal-error"),pk("undefined"!==typeof t.exp,"internal-error"),pk("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ie(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],pk(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nA(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return vk("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(pk("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(pk("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(pk("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function aA(e,t){pk("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var oA=function(){function e(t){k(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Hg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ne(a.providerData):[],this.metadata=new Zk(a.createdAt||void 0,a.lastLoginAt||void 0)}return b(e,[{key:"getIdToken",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(pk(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Qk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return eA.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(pk(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){pk(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ie(ee().mark((function e(t){var n,r,i=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Xk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Kk(this,Fk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,A=n.emailVerified,w=n.isAnonymous,b=n.providerData,I=n.stsTokenManager;pk(k&&I,t,"internal-error");var x=iA.fromJSON(this.name,I);pk("string"===typeof k,t,"internal-error"),aA(f,t.name),aA(h,t.name),pk("boolean"===typeof A,t,"internal-error"),pk("boolean"===typeof w,t,"internal-error"),aA(d,t.name),aA(p,t.name),aA(v,t.name),aA(y,t.name),aA(m,t.name),aA(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:A,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:x,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=ie(ee().mark((function t(n,r){var i,a,o,u=arguments;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new iA).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Xk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),uA=function(){function e(){k(this,e),this.type="NONE",this.storage={}}return b(e,[{key:"_isAvailable",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();uA.type="NONE";var sA=uA;function cA(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var lA=function(){function e(t,n,r){k(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=cA(this.userKey,a.apiKey,o),this.fullPersistenceKey=cA("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return b(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?oA._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ie(ee().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(gk(sA),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||gk(sA),u=cA(i,n.config.apiKey,n.name),s=null,c=g(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=oA._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function fA(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mA(t))return"Blackberry";if(gA(t))return"Webos";if(dA(t))return"Safari";if((t.includes("chrome/")||pA(t))&&!t.includes("edge/"))return"Chrome";if(yA(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function hA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/firefox\//i.test(e)}function dA(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/crios\//i.test(e)}function vA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/iemobile/i.test(e)}function yA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/android/i.test(e)}function mA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/blackberry/i.test(e)}function gA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/webos/i.test(e)}function kA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function AA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return kA(e)||yA(e)||gA(e)||mA(e)||/windows phone/i.test(e)||vA(e)}function wA(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fA(M());break;case"Worker":t="".concat(fA(M()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tt,"/").concat(r)}var bA=function(){function e(t){k(this,e),this.auth=t,this.queue=[]}return b(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ie(ee().mark((function e(t){var n,r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=g(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=g(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),IA=function(){function e(t,n,r){k(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EA(this),this.idTokenSubscription=new EA(this),this.beforeStateQueue=new bA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ok,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return b(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=gk(t)),this._initializationPromise=this.queue(ie(ee().mark((function r(){var i,a;return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,lA.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ie(ee().mark((function e(t){var n,r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return pk(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?$(t):null)&&pk(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ie(ee().mark((function e(t){var n,r=this,i=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&pk(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ie(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(gk(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new q("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return pk(n=t&&gk(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,lA.create(this,[gk(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ie(ee().mark((function e(t){var n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return pk(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return pk(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wA(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ie(ee().mark((function e(){var t,n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xA(e){return $(e)}var EA=function(){function e(t){var n=this;k(this,e),this.auth=t,this.observer=null,this.addObserver=J((function(e){return n.observer=e}))}return b(e,[{key:"next",get:function(){return pk(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function SA(e,t,n){var r=xA(e);pk(r._canInitEmulator,r,"emulator-config-failed"),pk(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=TA(t),o=function(e){var t=TA(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:_A(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:_A(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function TA(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _A(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var CA=function(){function e(t,n){k(this,e),this.providerId=t,this.signInMethod=n}return b(e,[{key:"toJSON",value:function(){return vk("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return vk("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return vk("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return vk("not implemented")}}]),e}();function NA(e,t){return DA.apply(this,arguments)}function DA(){return(DA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:resetPassword",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RA(e,t){return OA.apply(this,arguments)}function OA(){return(OA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PA(e,t){return MA.apply(this,arguments)}function MA(){return(MA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:update",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LA(e,t){return FA.apply(this,arguments)}function FA(){return(FA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithPassword",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UA(e,t){return BA.apply(this,arguments)}function BA(){return(BA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:sendOobCode",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VA(e,t){return jA.apply(this,arguments)}function jA(){return(jA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UA(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qA(e,t){return zA.apply(this,arguments)}function zA(){return(zA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UA(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QA(e,t){return GA.apply(this,arguments)}function GA(){return(GA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UA(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WA(e,t){return KA.apply(this,arguments)}function KA(){return(KA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",UA(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HA(e,t){return YA.apply(this,arguments)}function YA(){return(YA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithEmailLink",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JA(e,t){return ZA.apply(this,arguments)}function ZA(){return(ZA=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithEmailLink",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var XA=function(e){d(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return k(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return b(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",LA(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",HA(t,{email:this._email,oobCode:this._password}));case 5:ck(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",RA(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",JA(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ck(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(CA);function $A(e,t){return ew.apply(this,arguments)}function ew(){return(ew=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithIdp",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tw=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return b(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return $A(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$A(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$A(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=K(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ck("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Hg(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(CA);function nw(e,t){return rw.apply(this,arguments)}function rw(){return(rw=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:sendVerificationCode",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iw(){return(iw=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aw(){return(aw=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Tk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Lk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ow=I({},"USER_NOT_FOUND","user-not-found");function uw(){return(uw=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Tk(t,r),ow));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sw=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone","phone")).params=e,r}return b(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return iw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return aw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return uw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(CA);var cw=function(){function e(t){var n,r,i,a,o,u;k(this,e);var s=H(Y(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);pk(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return b(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=H(Y(e)).link,n=t?H(Y(t)).deep_link_id:null,r=H(Y(e)).deep_link_id;return(r?H(Y(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch($v){return null}}}]),e}();var lw=function(){function e(){k(this,e),this.providerId=e.PROVIDER_ID}return b(e,null,[{key:"credential",value:function(e,t){return XA._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=cw.parseLink(t);return pk(n,"argument-error"),XA._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();lw.PROVIDER_ID="password",lw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var fw=function(){function e(t){k(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return b(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),hw=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).scopes=[],e}return b(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ne(this.scopes)}}]),n}(fw),dw=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return pk(e.idToken||e.accessToken,"argument-error"),tw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return pk("providerId"in t&&"signInMethod"in t,"argument-error"),tw._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(hw),pw=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.call(this,"facebook.com")}return b(n,null,[{key:"credential",value:function(e){return tw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch($v){return null}}}]),n}(hw);pw.FACEBOOK_SIGN_IN_METHOD="facebook.com",pw.PROVIDER_ID="facebook.com";var vw=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return b(n,null,[{key:"credential",value:function(e,t){return tw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch($v){return null}}}]),n}(hw);vw.GOOGLE_SIGN_IN_METHOD="google.com",vw.PROVIDER_ID="google.com";var yw=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.call(this,"github.com")}return b(n,null,[{key:"credential",value:function(e){return tw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch($v){return null}}}]),n}(hw);yw.GITHUB_SIGN_IN_METHOD="github.com",yw.PROVIDER_ID="github.com";var mw=function(e){d(n,e);var t=m(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return b(n,[{key:"_getIdTokenResponse",value:function(e){return $A(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$A(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$A(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(CA),gw=function(e){d(n,e);var t=m(n);function n(e){return k(this,n),pk(e.startsWith("saml."),"argument-error"),t.call(this,e)}return b(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=mw.fromJSON(e);return pk(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return mw._create(r,n)}catch(i){return null}}}]),n}(fw),kw=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.call(this,"twitter.com")}return b(n,null,[{key:"credential",value:function(e,t){return tw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch($v){return null}}}]),n}(hw);function Aw(e,t){return ww.apply(this,arguments)}function ww(){return(ww=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signUp",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}kw.TWITTER_SIGN_IN_METHOD="twitter.com",kw.PROVIDER_ID="twitter.com";var bw=function(){function e(t){k(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return b(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ie(ee().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,oA._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Iw(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ie(ee().mark((function t(n,r,i){var a;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Iw(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Iw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function xw(){return xw=ie(ee().mark((function e(t){var n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xA(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new bw({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Aw(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,bw._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}var Ew=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o,u;return k(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return b(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(j);function Sw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ew._fromErrorAndOperation(e,n,t,r);throw n}))}function Tw(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function _w(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,Rw(!0,r,n);case 3:return e.t0=Bk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Tw(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=ie(ee().mark((function e(t,n){var r,i,a=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Kk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",bw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Rw(e,t,n){return Ow.apply(this,arguments)}function Ow(){return(Ow=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xk(n);case 2:i=Tw(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",pk(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pw(e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=ie(ee().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Kk(t,Sw(i,a,n,t),r);case 6:return pk((o=e.sent).idToken,i,"internal-error"),pk(u=Wk(o.idToken),i,"internal-error"),s=u.sub,pk(t.uid===s,i,"user-mismatch"),e.abrupt("return",bw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ck(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Mw.apply(this,arguments)}function Lw(e,t){return Fw.apply(this,arguments)}function Fw(){return Fw=ie(ee().mark((function e(t,n){var r,i,a,o,u=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Sw(t,i,n);case 4:return a=e.sent,e.next=7,bw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function Uw(e,t){return Bw.apply(this,arguments)}function Bw(){return(Bw=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lw(xA(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vw(e,t){return jw.apply(this,arguments)}function jw(){return(jw=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,Rw(!1,r,n.providerId);case 3:return e.abrupt("return",Nw(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qw(e,t){return zw.apply(this,arguments)}function zw(){return(zw=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pw($(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qw(e,t){return Gw.apply(this,arguments)}function Gw(){return(Gw=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(t,"POST","/v1/accounts:signInWithCustomToken",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ww(){return(Ww=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xA(t),e.next=3,Qw(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,bw._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kw=function(){function e(t,n){k(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return b(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Hw._fromServerResponse(e,t):"totpInfo"in t?Yw._fromServerResponse(e,t):ck(e,"internal-error")}}]),e}(),Hw=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return b(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Kw),Yw=function(e){d(n,e);var t=m(n);function n(e){return k(this,n),t.call(this,"totp",e)}return b(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Kw);function Jw(e,t,n){var r;pk((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),pk("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pk(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(pk(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Zw(){return(Zw=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),a={requestType:"PASSWORD_RESET",email:n},r&&Jw(i,a,r),e.next=5,qA(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xw(){return(Xw=ie(ee().mark((function e(t,n,r){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NA($(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $w(){return($w=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,PA($(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eb(e,t){return tb.apply(this,arguments)}function tb(){return(tb=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,NA(r,{oobCode:n});case 3:i=e.sent,pk(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return pk(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:pk(i.mfaInfo,r,"internal-error");case 13:pk(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Kw._fromServerResponse(xA(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nb(){return(nb=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb($(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rb(e,t,n){return ib.apply(this,arguments)}function ib(){return(ib=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xA(t),e.next=3,Aw(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,bw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ab(){return(ab=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),a={requestType:"EMAIL_SIGNIN",email:n},pk(r.handleCodeInApp,i,"argument-error"),r&&Jw(i,a,r),e.next=6,QA(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ob(){return(ob=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),pk((a=lw.credentialWithLink(n,r||kk()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Uw(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ub(e,t){return sb.apply(this,arguments)}function sb(){return(sb=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:createAuthUri",Tk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cb(){return(cb=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ak()?kk():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ub($(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lb(){return(lb=ie(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Jw(r.auth,a,n),e.next=8,VA(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fb(){return(fb=ie(ee().mark((function e(t,n,r){var i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Jw(i.auth,o,r),e.next=8,WA(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hb(e,t){return db.apply(this,arguments)}function db(){return(db=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_k(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pb(){return(pb=ie(ee().mark((function e(t,n){var r,i,a,o,u,s,c;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=$(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Kk(a,hb(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vb(e,t,n){return yb.apply(this,arguments)}function yb(){return(yb=ie(ee().mark((function e(t,n,r){var i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Kk(t,RA(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mb=b((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};k(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),gb=function(e){d(n,e);var t=m(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this,e,r,i)).username=a,o}return b(n)}(mb),kb=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"facebook.com",r)}return b(n)}(mb),Ab=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return b(n)}(gb),wb=function(e){d(n,e);var t=m(n);function n(e,r){return k(this,n),t.call(this,e,"google.com",r)}return b(n)}(mb),bb=function(e){d(n,e);var t=m(n);function n(e,r,i){return k(this,n),t.call(this,e,"twitter.com",r,i)}return b(n)}(gb);function Ib(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Wk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new mb(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new kb(a,i);case"github.com":return new Ab(a,i);case"google.com":return new wb(a,i);case"twitter.com":return new bb(a,i,e.screenName||null);case"custom":case"anonymous":return new mb(a,null);default:return new mb(a,r,i)}}(n)}var xb=function(){function e(t,n,r){k(this,e),this.type=t,this.credential=n,this.auth=r}return b(e,[{key:"toJSON",value:function(){return{multiFactorSession:I({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Eb=function(){function e(t,n,r){k(this,e),this.session=t,this.hints=n,this.signInResolver=r}return b(e,[{key:"resolveSignIn",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=xA(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Kw._fromServerResponse(r,e)}));pk(i.mfaPendingCredential,r,"internal-error");var o=xb._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ie(ee().mark((function e(t){var a,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,bw._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return pk(n.user,r,"internal-error"),e.abrupt("return",bw._forOperation(n.user,n.operationType,u));case 17:ck(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Sb(e,t){return _k(e,"POST","/v2/accounts/mfaEnrollment:start",Tk(e,t))}function Tb(e,t){return _k(e,"POST","/v2/accounts/mfaEnrollment:finalize",Tk(e,t))}var _b=function(){function e(t){var n=this;k(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Kw._fromServerResponse(t.auth,e)})))}))}return b(e,[{key:"getSession",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=xb,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Kk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ie(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Kk(this.user,_k(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Tk(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Cb=new WeakMap;var Nb="__sak",Db=function(){function e(t,n){k(this,e),this.storageRetriever=t,this.type=n}return b(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Nb,"1"),this.storage.removeItem(Nb),Promise.resolve(!0)):Promise.resolve(!1)}catch($v){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Rb=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=M();return dA(e)||kA(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=AA(),e._shouldAllowMigration=!0,e}return b(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);B()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ie(ee().mark((function e(t,r){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(p(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ie(ee().mark((function e(t){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(p(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt(p(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Db);Rb.type="LOCAL";var Ob=Rb,Pb=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return b(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Db);Pb.type="SESSION";var Mb=Pb;function Lb(e){return Promise.all(e.map(function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Fb=function(){function e(t){k(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return b(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ie(ee().mark((function e(t){var n,r,i,a,o,u,s,c;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Lb(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ub(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Fb.receivers=[];var Bb=function(){function e(t){k(this,e),this.target=t,this.handlers=new Set}return b(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ie(ee().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ub("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Vb(){return window}function jb(){return"undefined"!==typeof Vb().WorkerGlobalScope&&"function"===typeof Vb().importScripts}function qb(){return zb.apply(this,arguments)}function zb(){return(zb=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Qb(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Gb="firebaseLocalStorageDb",Wb="firebaseLocalStorage",Kb="fbase_key",Hb=function(){function e(t){k(this,e),this.request=t}return b(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Yb(e,t){return e.transaction([Wb],t?"readwrite":"readonly").objectStore(Wb)}function Jb(){var e=indexedDB.deleteDatabase(Gb);return new Hb(e).toPromise()}function Zb(){var e=indexedDB.open(Gb,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Wb,{keyPath:Kb})}catch(r){n(r)}})),e.addEventListener("success",ie(ee().mark((function n(){var r;return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Wb)){n.next=12;break}return r.close(),n.next=5,Jb();case 5:return n.t0=t,n.next=8,Zb();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Xb(e,t,n){return $b.apply(this,arguments)}function $b(){return $b=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Yb(t,!0).put((I(i={},Kb,n),I(i,"value",r),i)),e.abrupt("return",new Hb(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=ie(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yb(t,!1).get(n),e.next=3,new Hb(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e,t){var n=Yb(e,!0).delete(t);return new Hb(n).toPromise()}var rI=function(){function e(){k(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return b(e,[{key:"_openDb",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Zb();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ie(ee().mark((function e(){var t=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Fb._getInstance(jb()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ie(ee().mark((function e(n,r){var i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ie(ee().mark((function e(){var t,n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qb();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Bb(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Qb()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Zb();case 5:return t=e.sent,e.next=8,Xb(t,Nb,"1");case 8:return e.next=10,nI(t,Nb);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ie(ee().mark((function e(t,n){var r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Xb(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return eI(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ie(ee().mark((function e(t){var n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return nI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Yb(e,!1).getAll();return new Hb(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=g(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ie(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();rI.type="LOCAL";var iI=rI;function aI(e,t){return _k(e,"POST","/v2/accounts/mfaSignIn:start",Tk(e,t))}function oI(e,t){return _k(e,"POST","/v2/accounts/mfaSignIn:finalize",Tk(e,t))}function uI(e){return sI.apply(this,arguments)}function sI(){return(sI=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_k(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cI(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=lk("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function lI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var fI=1e12,hI=function(){function e(t){k(this,e),this.auth=t,this.counter=fI,this._widgets=new Map}return b(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new dI(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||fI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||fI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||fI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),dI=function(){function e(t,n,r){var i=this;k(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;pk(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return b(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var pI=lI("rcb"),vI=new bk(3e4,6e4),yI=function(){function e(){var t;k(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Vb().grecaptcha)||void 0===t?void 0:t.render)}return b(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return pk(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Vb().grecaptcha):new Promise((function(r,i){var a=Vb().setTimeout((function(){i(lk(e,"network-request-failed"))}),vI.get());Vb()[pI]=function(){Vb().clearTimeout(a),delete Vb()[pI];var o=Vb().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(lk(e,"internal-error"))},cI("".concat("https://www.google.com/recaptcha/api.js?","?").concat(K({onload:pI,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(lk(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Vb().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var mI=function(){function e(){k(this,e)}return b(e,[{key:"load",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new hI(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),gI="recaptcha",kI={theme:"light",type:"image"},AI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},kI),r=arguments.length>2?arguments[2]:void 0;k(this,e),this.parameters=n,this.type=gI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xA(r),this.isInvisible="invisible"===this.parameters.size,pk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;pk(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mI:new yI,this.validateStartingState()}return b(e,[{key:"verify",value:function(){var e=ie(ee().mark((function e(){var t,n,r,i=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){pk(!this.parameters.sitekey,this.auth,"argument-error"),pk(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pk("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Vb()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){pk(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ie(ee().mark((function e(){var t,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk(Ak()&&!jb(),this.auth,"internal-error"),e.next=3,wI();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,uI(this.auth);case 8:pk(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return pk(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function wI(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var bI=function(){function e(t,n){k(this,e),this.verificationId=t,this.onConfirmation=n}return b(e,[{key:"confirm",value:function(e){var t=sw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function II(){return(II=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xA(t),e.next=3,TI(i,n,$(r));case 3:return a=e.sent,e.abrupt("return",new bI(a,(function(e){return Uw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xI(e,t,n){return EI.apply(this,arguments)}function EI(){return(EI=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),e.next=3,Rw(!1,i,"phone");case 3:return e.next=5,TI(i.auth,n,$(r));case 5:return a=e.sent,e.abrupt("return",new bI(a,(function(e){return Vw(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SI(){return(SI=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$(t),e.next=3,TI(i.auth,n,$(r));case 3:return a=e.sent,e.abrupt("return",new bI(a,(function(e){return qw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TI(e,t,n){return _I.apply(this,arguments)}function _I(){return _I=ie(ee().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,pk("string"===typeof a,t,"argument-error"),pk(r.type===gI,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return pk("enroll"===u.type,t,"internal-error"),e.next=13,Sb(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return pk("signin"===u.type,t,"internal-error"),pk(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,aI(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,nw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),_I.apply(this,arguments)}function CI(){return(CI=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nw($(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var NI=function(){function e(t){k(this,e),this.providerId=e.PROVIDER_ID,this.auth=xA(t)}return b(e,[{key:"verifyPhoneNumber",value:function(e,t){return TI(this.auth,e,$(t))}}],[{key:"credential",value:function(e,t){return sw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?sw._fromTokenResponse(n,r):null}}]),e}();function DI(e,t){return t?gk(t):(pk(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}NI.PROVIDER_ID="phone",NI.PHONE_SIGN_IN_METHOD="phone";var RI=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this,"custom","custom")).params=e,r}return b(n,[{key:"_getIdTokenResponse",value:function(e){return $A(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return $A(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return $A(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(CA);function OI(e){return Lw(e.auth,new RI(e),e.bypassAuthState)}function PI(e){var t=e.auth,n=e.user;return pk(n,t,"internal-error"),Pw(n,new RI(e),e.bypassAuthState)}function MI(e){return LI.apply(this,arguments)}function LI(){return(LI=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,pk(r=t.user,n,"internal-error"),e.abrupt("return",Nw(r,new RI(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var FI=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];k(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return b(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ie(ee().mark((function t(n,r){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ie(ee().mark((function e(t){var n,r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OI;case"linkViaPopup":case"linkViaRedirect":return MI;case"reauthViaPopup":case"reauthViaRedirect":return PI;default:ck(this.auth,"internal-error")}}},{key:"resolve",value:function(e){yk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){yk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),UI=new bk(2e3,1e4);function BI(e,t,n){return VI.apply(this,arguments)}function VI(){return(VI=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xA(t),hk(t,n,fw),a=DI(i,r),o=new QI(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jI(){return(jI=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=$(t)).auth,n,fw),a=DI(i.auth,r),o=new QI(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qI(e,t,n){return zI.apply(this,arguments)}function zI(){return(zI=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=$(t)).auth,n,fw),a=DI(i.auth,r),o=new QI(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var QI=function(e){d(n,e);var t=m(n);function n(e,r,i,a,o){var u;return k(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(u),u}return b(n,[{key:"executeNotNull",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return pk(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ie(ee().mark((function e(){var t,n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yk(1===this.filter.length,"Popup operations only handle one event"),t=Ub(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(lk(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(lk(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(lk(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,UI.get())}()}}]),n}(FI);QI.currentPopupAction=null;var GI="pendingRedirect",WI=new Map,KI=function(e){d(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return k(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return b(n,[{key:"execute",value:function(){var e=ie(ee().mark((function e(){var t,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=WI.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,HI(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Pt(p(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:WI.set(this.auth._key(),t);case 21:return this.bypassAuthState||WI.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ie(ee().mark((function e(t){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Pt(p(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Pt(p(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(FI);function HI(e,t){return YI.apply(this,arguments)}function YI(){return(YI=ie(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ex(n),i=$I(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JI(e,t){return ZI.apply(this,arguments)}function ZI(){return(ZI=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$I(t)._set(ex(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XI(e,t){WI.set(e._key(),t)}function $I(e){return gk(e._redirectPersistence)}function ex(e){return cA(GI,e.config.apiKey,e.name)}function tx(e,t,n){return function(e,t,n){return nx.apply(this,arguments)}(e,t,n)}function nx(){return(nx=ie(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xA(t),hk(t,n,fw),e.next=4,i._initializationPromise;case 4:return a=DI(i,r),e.next=7,JI(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rx(e,t,n){return function(e,t,n){return ix.apply(this,arguments)}(e,t,n)}function ix(){return(ix=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=$(t)).auth,n,fw),e.next=4,i.auth._initializationPromise;case 4:return a=DI(i.auth,r),e.next=7,JI(a,i.auth);case 7:return e.next=9,fx(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ax(e,t,n){return function(e,t,n){return ox.apply(this,arguments)}(e,t,n)}function ox(){return(ox=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk((i=$(t)).auth,n,fw),e.next=4,i.auth._initializationPromise;case 4:return a=DI(i.auth,r),e.next=7,Rw(!1,i,n.providerId);case 7:return e.next=9,JI(a,i.auth);case 9:return e.next=11,fx(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return(sx=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xA(t)._initializationPromise;case 2:return e.abrupt("return",cx(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return lx=ie(ee().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=xA(t),a=DI(i,n),o=new KI(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e){return hx.apply(this,arguments)}function hx(){return(hx=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ub("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var dx=function(){function e(t){k(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return b(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vx(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!vx(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(lk(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(px(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(px(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function px(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function vx(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function yx(e){return mx.apply(this,arguments)}function mx(){return mx=ie(ee().mark((function e(t){var n,r=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",_k(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}var gx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kx=/^https?/;function Ax(){return(Ax=ie(ee().mark((function e(t){var n,r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,yx(t);case 4:n=e.sent,r=n.authorizedDomains,i=g(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!wx(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ck(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function wx(e){var t=kk(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!kx.test(r))return!1;if(gx.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var bx=new bk(3e4,6e4);function Ix(){var e=Vb().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ne(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var xx=null;function Ex(e){return xx=xx||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ix(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ix(),n(lk(e,"network-request-failed"))},timeout:bx.get()})}if(null===(i=null===(r=Vb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Vb().gapi)||void 0===a?void 0:a.load)){var u=lI("iframefcb");return Vb()[u]=function(){gapi.load?o():n(lk(e,"network-request-failed"))},cI("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw xx=null,e}))}(e),xx}var Sx=new bk(5e3,15e3),Tx="__/auth/iframe",_x="emulator/auth/iframe",Cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dx(e){var t=e.config;pk(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ik(t,_x):"https://".concat(e.config.authDomain,"/").concat(Tx),r={apiKey:t.apiKey,appName:e.name,v:tt},i=Nx.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(K(r).slice(1))}function Rx(e){return Ox.apply(this,arguments)}function Ox(){return Ox=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ex(t);case 2:return n=e.sent,pk(r=Vb().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Dx(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cx,dontclear:!0},(function(e){return new Promise(function(){var n=ie(ee().mark((function n(r,i){var a,o,u;return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Vb().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=lk(t,"network-request-failed"),o=Vb().setTimeout((function(){i(a)}),Sx.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}var Px={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mx=function(){function e(t){k(this,e),this.window=t,this.associatedEvent=null}return b(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Lx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Px),{width:r.toString(),height:i.toString(),top:a,left:o}),l=M().toLowerCase();n&&(u=pA(l)?"_blank":n),hA(l)&&(t=t||"http://localhost",s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return kA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:M())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new Mx(null);var h=window.open(t||"",u,f);pk(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Mx(h)}var Fx="__/auth/handler",Ux="emulator/auth/handler";function Bx(e,t,n,r,i,a){pk(e.config.authDomain,e,"auth-domain-config-required"),pk(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tt,eventId:i};if(t instanceof fw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof hw){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Fx);return Ik(t,Ux)}(e),"?").concat(K(p).slice(1))}var Vx="webStorageSupport",jx=function(){function e(){k(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mb,this._completeRedirectFn=cx,this._overrideRedirectResult=XI}return b(e,[{key:"_openPopup",value:function(){var e=ie(ee().mark((function e(t,n,r,i){var a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yk(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Bx(t,n,r,kk(),i),e.abrupt("return",Lx(t,o,Ub()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ie(ee().mark((function e(t,n,r,i){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Bx(t,n,r,kk(),i),Vb().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(yk(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rx(t);case 2:return n=e.sent,r=new dx(t),n.register("authEvent",(function(e){return pk(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Vx,{type:Vx},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Vx];void 0!==i&&t(!!i),ck(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ax.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return AA()||dA()||kA()}}]),e}(),qx=jx,zx=function(){function e(t){k(this,e),this.factorId=t}return b(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return vk("unexpected MultiFactorSessionType")}}}]),e}(),Qx=function(e){d(n,e);var t=m(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone")).credential=e,r}return b(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return _k(e,"POST","/v2/accounts/mfaEnrollment:finalize",Tk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return _k(e,"POST","/v2/accounts/mfaSignIn:finalize",Tk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(zx),Gx=function(){function e(){k(this,e)}return b(e,null,[{key:"assertion",value:function(e){return Qx._fromCredential(e)}}]),e}();Gx.FACTOR_ID="phone";var Wx=function(){function e(){k(this,e)}return b(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Kx._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Kx._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},_k(i,"POST","/v2/accounts/mfaEnrollment:start",Tk(i,a));case 4:return r=e.sent,e.abrupt("return",Hx._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Wx.FACTOR_ID="totp";var Kx=function(e){d(n,e);var t=m(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return b(n,[{key:"_finalizeEnroll",value:function(){var e=ie(ee().mark((function e(t,n,r){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Tb(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",oI(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(zx),Hx=function(){function e(t,n,r,i,a,o,u){k(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return b(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Yx(e)||Yx(t))&&(r=!0),r&&(Yx(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Yx(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Yx(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Jx="@firebase/auth",Zx="0.22.0",Xx=function(){function e(t){k(this,e),this.auth=t,this.internalListeners=new Map}return b(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){pk(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var $x;!function(e){var t;null===(t=R())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function eE(){return window}$x="Browser",He(new ae("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){pk(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),pk(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:$x,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wA($x)},i=new IA(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gk);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),He(new ae("auth-internal",(function(e){return function(e){return new Xx(e)}(xA(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ut(Jx,Zx,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($x)),ut(Jx,Zx,"esm2017");var tE=2e3;function nE(e,t,n){return rE.apply(this,arguments)}function rE(){return rE=ie(ee().mark((function e(t,n,r){var i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=eE(),o=a.BuildInfo,yk(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,cE(n.sessionId);case 4:return u=e.sent,s={},kA()?s.ibi=o.packageName:yA()?s.apn=o.packageName:ck(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Bx(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),rE.apply(this,arguments)}function iE(){return(iE=ie(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eE(),r=n.BuildInfo,i={},kA()?i.iosBundleId=r.packageName:yA()?i.androidPackageName=r.packageName:ck(t,"operation-not-supported-in-this-environment"),e.next=5,yx(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aE(e){var t=eE().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function oE(e,t,n){return uE.apply(this,arguments)}function uE(){return uE=ie(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=eE(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(lk(t,"redirect-cancelled-by-user"))}),tE))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),yA()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),uE.apply(this,arguments)}function sE(e){var t,n,r,i,a,o,u,s,c,l,f=eE();pk("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pk("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pk("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pk("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pk("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function cE(e){return lE.apply(this,arguments)}function lE(){return(lE=ie(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fE(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e){if(yk(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var hE=20,dE=function(e){d(n,e);var t=m(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return b(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Pt(p(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dx);function pE(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:kE(),postBody:null,tenantId:e.tenantId,error:lk(e,"no-auth-event")}}function vE(e,t){return AE()._set(wE(e),t)}function yE(e){return mE.apply(this,arguments)}function mE(){return(mE=ie(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AE()._get(wE(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,AE()._remove(wE(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gE(e,t){var n,r,i=function(e){var t=bE(e),n=t.link?decodeURIComponent(t.link):void 0,r=bE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return bE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=bE(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?lk(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function kE(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<hE;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function AE(){return gk(Ob)}function wE(e){return cA("authEvent",e.config.apiKey,e.name)}function bE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||te(t)||u(t)||s();r[0];return H(r.slice(1).join("?"))}var IE=function(){function e(){k(this,e),this._redirectPersistence=Mb,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=cx,this._overrideRedirectResult=XI}return b(e,[{key:"_initialize",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new dE(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ck(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ie(ee().mark((function e(t,n,r,i){var a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sE(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),WI.clear(),e.next=10,this._originValidation(t);case 10:return o=pE(t,r,i),e.next=13,vE(t,o);case 13:return e.next=15,nE(t,o,n);case 15:return u=e.sent,e.next=18,aE(u);case 18:return s=e.sent,e.abrupt("return",oE(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return iE.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=eE(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ie(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yE(e);case 2:t.onEvent(EE());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ie(ee().mark((function n(r){var i,a;return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,yE(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=gE(i,r.url)),t.onEvent(a||EE());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");eE().handleOpenURL=function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),xE=IE;function EE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lk("no-auth-event")}}var SE=1e3;function TE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function _E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return!("file:"!==TE()&&"ionic:"!==TE()&&"capacitor:"!==TE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function CE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return B()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();return/Edge\/\d+/.test(e)}(e)}function NE(){try{var e=self.localStorage,t=Ub();if(e)return e.setItem(t,"1"),e.removeItem(t),!CE()||V()}catch(n){return DE()&&V()}return!1}function DE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function RE(){return("http:"===TE()||"https:"===TE()||F()||_E())&&!(U()||L())&&NE()&&!DE()}function OE(){return _E()&&"undefined"!==typeof document}function PE(){return ME.apply(this,arguments)}function ME(){return(ME=ie(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(OE()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),SE);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var LE={LOCAL:"local",NONE:"none",SESSION:"session"},FE=pk,UE="persistence";function BE(e,t){FE(Object.values(LE).includes(t),e,"invalid-persistence-type"),U()?FE(t!==LE.SESSION,e,"unsupported-persistence-type"):L()?FE(t===LE.NONE,e,"unsupported-persistence-type"):DE()?FE(t===LE.NONE||t===LE.LOCAL&&V(),e,"unsupported-persistence-type"):FE(t===LE.NONE||NE(),e,"unsupported-persistence-type")}function VE(e){return jE.apply(this,arguments)}function jE(){return(jE=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=qE(),r=cA(UE,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var zE=pk,QE=function(){function e(){k(this,e),this.browserResolver=gk(qx),this.cordovaResolver=gk(xE),this.underlyingResolver=null,this._redirectPersistence=Mb,this._completeRedirectFn=cx,this._overrideRedirectResult=XI}return b(e,[{key:"_initialize",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ie(ee().mark((function e(t,n,r,i){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ie(ee().mark((function e(t,n,r,i){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return OE()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return zE(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,PE();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function GE(e){return e.unwrap()}function WE(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new ZE(e,function(e,t){var n,r=$(e),i=t;return pk(t.customData.operationType,r,"argument-error"),pk(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Eb._fromError(r,i)}(e,t));else if(r){var i=KE(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function KE(e){var t=(e instanceof j?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof j)&&"temporaryProof"in t&&"phoneNumber"in t)return NI.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Jg.PASSWORD)return null;switch(r){case Jg.GOOGLE:n=vw;break;case Jg.FACEBOOK:n=pw;break;case Jg.GITHUB:n=yw;break;case Jg.TWITTER:n=kw;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?mw._create(r,u):tw._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new dw(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof j?n.credentialFromError(e):n.credentialFromResult(e)}function HE(e,t){return t.catch((function(t){throw t instanceof j&&WE(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,KE(t)),additionalUserInfo:Ib(e),user:XE.getOrCreate(r)}}))}function YE(e,t){return JE.apply(this,arguments)}function JE(){return(JE=ie(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return HE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ZE=function(){function e(t,n){k(this,e),this.resolver=n,this.auth=t.wrapped()}return b(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return HE(GE(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),XE=function(){function e(t){k(this,e),this._delegate=t,this.multiFactor=function(e){var t=$(e);return Cb.has(t)||Cb.set(t,_b._fromUser(t)),Cb.get(t)}(t)}return b(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HE(this.auth,Vw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",YE(this.auth,xI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HE(this.auth,qI(this._delegate,t,QE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE(xA(this.auth));case 2:return e.abrupt("return",ax(this._delegate,t,QE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HE(this.auth,qw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return YE(this.auth,function(e,t,n){return SI.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return HE(this.auth,function(e,t,n){return jI.apply(this,arguments)}(this._delegate,e,QE))}},{key:"reauthenticateWithRedirect",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE(xA(this.auth));case 2:return e.abrupt("return",rx(this._delegate,t,QE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return lb.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_w(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return vb($(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return vb($(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return CI.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return pb.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return fb.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();XE.USER_MAP=new WeakMap;var $E=pk,eS=function(){function e(t,n){if(k(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;$E(r,"invalid-api-key",{appName:t.name}),$E(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?QE:void 0;this._delegate=n.initialize({options:{persistence:nS(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ik),this.linkUnderlyingAuth()}return b(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?XE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){SA(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return $w.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return eb(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Xw.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ie(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",HE(this._delegate,rb(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return cb.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=cw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ie(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $E(RE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ux(this._delegate,QE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",HE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){xA(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=tS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=tS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ab.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Zw.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ie(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:BE(this._delegate,t),e.t0=t,e.next=e.t0===LE.SESSION?4:e.t0===LE.LOCAL?6:e.t0===LE.NONE?11:13;break;case 4:return n=Mb,e.abrupt("break",14);case 6:return e.next=8,gk(iI)._isAvailable();case 8:return r=e.sent,n=r?iI:Ob,e.abrupt("break",14);case 11:return n=sA,e.abrupt("break",14);case 13:return e.abrupt("return",ck("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return HE(this._delegate,function(e){return xw.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return HE(this._delegate,Uw(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return HE(this._delegate,function(e,t){return Ww.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return HE(this._delegate,function(e,t,n){return Uw($(e),lw.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return HE(this._delegate,function(e,t,n){return ob.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return YE(this._delegate,function(e,t,n){return II.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $E(RE(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",HE(this._delegate,BI(this._delegate,t,QE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ie(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $E(RE(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,VE(this._delegate);case 3:return e.abrupt("return",tx(this._delegate,t,QE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return nb.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function tS(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&XE.getOrCreate(e))},error:t,complete:n}}function nS(e,t){var n=function(e,t){var n=qE();if(!n)return[];var r=cA(UE,e,t);switch(n.getItem(r)){case LE.NONE:return[sA];case LE.LOCAL:return[iI,Mb];case LE.SESSION:return[Mb];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(iI)||n.push(iI),"undefined"!==typeof window)for(var r=0,i=[Ob,Mb];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(sA)||n.push(sA),n}eS.Persistence=LE;var rS=function(){function e(){k(this,e),this.providerId="phone",this._delegate=new NI(GE(Ot.auth()))}return b(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return NI.credential(e,t)}}]),e}();rS.PHONE_SIGN_IN_METHOD=NI.PHONE_SIGN_IN_METHOD,rS.PROVIDER_ID=NI.PROVIDER_ID;var iS=pk,aS=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot.app();k(this,e),iS(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new AI(t,n,i.auth()),this.type=this._delegate.type}return b(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new ae("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new eS(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zg,PASSWORD_RESET:Xg,RECOVER_EMAIL:$g,REVERT_SECOND_FACTOR_ADDITION:ek,VERIFY_AND_CHANGE_EMAIL:tk,VERIFY_EMAIL:nk}},EmailAuthProvider:lw,FacebookAuthProvider:pw,GithubAuthProvider:yw,GoogleAuthProvider:vw,OAuthProvider:dw,SAMLAuthProvider:gw,PhoneAuthProvider:rS,PhoneMultiFactorGenerator:Gx,RecaptchaVerifier:aS,TwitterAuthProvider:kw,Auth:eS,AuthCredential:CA,Error:j}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.3.7")}(Ot);var oS=n(184),uS=(0,t.forwardRef)((function(e,n){var r=c((0,t.useState)(null),2),i=r[0],a=r[1],o=c((0,t.useState)(0),2),u=o[0],s=o[1],l=c((0,t.useState)(!1),2),f=l[0],h=l[1];return(0,t.useEffect)((function(){var e;return f&&(e=setInterval((function(){var e=Math.floor((Date.now()-i)/1e3);s(e)}),1e3)),function(){return clearInterval(e)}}),[f,i,e]),(0,t.useEffect)((function(){n&&(n.current={getTime:function(){return u}})}),[u,n]),(0,oS.jsx)(oS.Fragment,{children:f?(0,oS.jsxs)("div",{children:["Timer: ",u.toFixed(0)]}):(0,oS.jsxs)("div",{className:"start-overlay",children:[(0,oS.jsx)("div",{children:"Find the characters!"}),(0,oS.jsxs)("div",{children:[(0,oS.jsxs)("div",{children:["Moon ",(0,oS.jsx)("img",{src:e.moonIMG,alt:"moon"})]}),(0,oS.jsxs)("div",{children:["Majora ",(0,oS.jsx)("img",{src:e.majoraIMG,alt:"majora"})]}),(0,oS.jsxs)("div",{children:["Mipha ",(0,oS.jsx)("img",{src:e.miphaIMG,alt:"mipha"})]})]}),(0,oS.jsx)("button",{id:"start-button",onClick:function(){a(Date.now()),h(!0)},children:"start"})]})})}));Ot.registerVersion("firebase","9.19.1","app-compat");Ot.initializeApp({apiKey:"AIzaSyDFQrWQ8tWq9-dS7IMP5RIRvMaBebDFsIk",authDomain:"whereswaldo-9b2ee.firebaseapp.com",projectId:"whereswaldo-9b2ee"});var sS=Ot.firestore(),cS=function(e){var t=e.leaderboardData;return(0,oS.jsxs)("div",{className:"leaderboard",children:[(0,oS.jsx)("h2",{children:"Leaderboard"}),t&&t.length>0?(0,oS.jsx)("div",{className:"score-container",children:t.map((function(e,t){return(0,oS.jsxs)("div",{className:"score-row",children:[(0,oS.jsxs)("span",{className:"score-index",children:[t+1,"  "]}),(0,oS.jsxs)("span",{className:"score-player",children:[e.playerName,"  "]}),(0,oS.jsxs)("span",{className:"score-time",children:[e.winTime," sec  "]})]},t)}))}):(0,oS.jsx)("p",{children:"No scores available"})]})},lS=n.p+"static/media/ZeldaFind.a5c90593d557e6e3e1c0.png",fS="data:image/jpeg;base64,/9j/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////7gAhQWRvYmUAZEAAAAABAwAQAwIDBgAAAAAAAAAAAAAAAP/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQEBAQEBAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8IAEQgANgA2AwERAAIRAQMRAf/EAKYAAAIDAQEBAAAAAAAAAAAAAAgJBAYHBQECAQADAAMBAQEAAAAAAAAAAAAFBgcDBAgJAAIQAAIDAAMAAQUBAQAAAAAAAAUGAwQHAQIIEQATFRYXCRIRAAIDAQEAAQQCAwEAAAAAAAQFAgMGAQcUABESExUIISIWJBIAAgEDAwQBAwQBBQEAAAAAAQIDERIEIRMFADEiBkEyIxRRYRUHcYFCUjMkFv/aAAwDAQECEQMRAAAAPnhX04R/1JCMCx7Znwpyg6DTsbCicVmHM4BZFA/Ew4Pj5ZhN0gYbvQFkI/8AAZhQucJ72q8GD7CPnK6E0m4+FrE2yJdrx79avfCswguMavKFGBFtoadQ2JikOtsT4lSdEwItx5McX57AkjdxVgqSi1yOp09gXBHYoLFFa3TSQbInaIcdAvRFlIQG/ofkvnF9xmzGgrprsZbzx0qCR6egvJjg1O77X//aAAgBAgABBQCW3d4vg/RxvqsrWhl2VPEW4Z4QPauYYCoqY9W4drMIBrXiDE8hxMy/MtBKsJdaT0xwjnyYBZko1JRkPQtXklzzQHKgpqxgT96qIrdDq4sTpYHNk08n2F85Ud6H5Sr+x3pi0g2rDH/xWb2u5UGehygisOL/ANfsmg1gOO/UKvzDbHdJaqyXN39YGk1/LQoWg6tOfXvxAXzVqKo4GOuVKcpRnSbKqfSS17oxW72hLbbTv5jmJVBsFn4H4xZAKzahvVZLerRjLCXm3e1+xK3dYk6vNTzaRM5j2QKqZh1DEK9M3Kx8v/8A/9oACAEDAAEFAIKI/gbPi9bq0OOcCFpyZowBgnoCrAjpwe/3SrXC7WmvJTYKVM1uFqLb1b3yIoH6GC6BXbHdoYyzMV7tRCQBdiiGowRvONoAtxD3lDVStQTUrwMp+3Xqqz1QmGfibn6uKpr9Ypdnl47vyeBBhedDLdlmgQ6Q9qhSHtb/AKrBzFPSLSQTNQcLRMSFGUoOH2ytxkWgSkB0BtFOJfi7c46AXWM+G0Ze6XFJXaymfxq5dUWpG5kUzyJ05+Ofnj5zScrAxv8AH1/H6NDTihmqLXYJz977PHx9RcQfZ//aAAgBAQABBQAGkoXXOt28TEMb0bQ8wqZ3pJfXdqzw/r5xhTM5xn0XmGVO8mHqhrQQPep/RPYTOV0fS9i0yySRNAfd0Ds9b1DHYqAGxIYyN3MCNMLoW4tXhbYPRGe6KX5INVkmjbluzLuupesd6xT0LZeV4x5/P9FApJ4uEBRWdMTMVv8AFnSvOGCqH0Q/zKEE3XTjj15i6+cfO736hFTrPtauebkjUGRW41BcTR2T8q7LoDu6t+C49rKjlHOsb35RKhCQ70P69rCs29Q86TnvsbPp7a4oMXnLSsWlC+pvWaPruc5xmLr6mdXOppED2rkNJ8ZHtfGN/qiN5rQBKNWBpxQ//qitxhSpUUR9Ajtd5ZUilkcgb//aAAgBAgIGPwBs2SRlzxJdd9LKwPx2tII0GlKU6zMU4Ub+zwwoFkapR0QlTIV+ZFDAkVoQCdaGn9i43PZ4yOU/FeaO8LpRDQxilA0ZGlNbCf8AiOsn+Qk/JnhcbkdiqsZXZdgXUBmcRyi9QRQm0moYDHyJ0kjmVW13AYVQqVtMUisoQlgoVWUVIoCTTrDmw+XjlEEdtrCyhLEnsTbXRRUKtAKMej/Xr+ogcTNBaoMpvMo82nWSlhqyq5A8RaPnXrmIOEw7kvQFvpQNtrcSe1a1JpU/NOuYw5hDLnRTBJKea2bdR3AIV9xgTQdqV6zM5ZSOHjxyZ4bhuWyEKqalfFiwKs1NAQwI1PI5PoZbEwy2SclpZt+MtPTdyTIaUKPGoZNBaVKVVgesWP1T3sZPIYJkyHx3hMYy2EZWLakJAZYnN6qLrmNTqFp+GMGT8tgDKzWIK9wgMjLVV+aVq9e4VaTYdrflRyBbCBdeWs8STStTQkH6Sa6HrnMnk5v5DAXk5IsXkJIxdNFtwsWcwIkUhinaSASfbEm1pUqSeQmzcsHlJZQ+5KqqWuqGCnyCgGmhbWugFOs/Eh4F15DmcMRy5aBVgG0boVyGDggllCBxGSFYVegA69k9SxGaXmMuYX0ImY1e6X/rVUcKqRiwC5qNVaHrk/Y/bRlT8fFWaRLZy00sRd0ESSxxSGRyUFkauKKxZ+ydT89gq8cxlImxmH/ogkNSUZW21IPdGqodfgMGVf5baf8AG/IvpQX969q0rXWl1Pivz1K2Pys+RwpZQ6ksLG/2rJHUqBoLSpKaAAhvES5WQCYI6Cg0uY1tWvwNCWPcAaakdZUEEiybeOQqFthWqQv3MhRdGFWrXE6haAhiD1/ISYcGTyuLMgGQjOsMpSRQ8iRsgkogkChmkG7UsygkjrjvbcnmuQx/Y+HynhnifxiNalkaC4xlXieiSoUb5I0AGHzaDc43KHjIpDAFa0WRkVmFNSPFqa6CtejkHlAUr2DJcNe7G7T9vCp/SunSx5M2MuPaUdE3bLG+qlNGbsQTVrlU1qB1FwPC4l5UXqbh90MQplB7FaU0Wtigg+V3XpfqvD8fjHks2YYubFG0KySY0kUqSM7Oy2gMyMhB1KVu8qHn/XuCXb4eHAmXGJJ12WTalkIViTPLa8tF03CFACgdchF7VxczcTjcUWmy4kMbtLBiKrSLeFaUfba24XUtrYBaM7+voMflc2SRmlhkMSrHjxgVd3cysQCTS1kIZ66UI6kd+OjXmYZFo2u26yEyCYx1+sWyKBWy9e1pp1yHC58xZYX0YCgaNtUe97UAZdQQW+aA9usPjOJnkvnrEpjuCxXiimM6PUvaHclAwJr8MBxfuBy+ZiycwnDmSUStCYma+Jt2wKqpa0gJRFChlJBPXMZnC+0T5nITTyRK2OjhoIDIDapaxGpatz7hL22oihi/XPcjityeXwsnD5wCuCzE2tjq4QO4tLM1Km4WsfjqT1fjPWTNy+bDv5eeZAoiRHMZjIdFKojgi0/U1xUt1nc7JcvHoscSMVbyIZrnApdaGksBpSgc/Tr16xH7VkDH9sxwBCwBc5WIa2uQBdGwAWgnEbeQpUA9Yh9WiP8AKRyAxblhaWUghAQWVVValhVlUsACw+fbj7/DBHiiOQtukGuRXzVgtQATSlrFQe7mg653G4zll4/GOSpSbHjnmIArVAiXwGMitTAAKhaU7dRwf17FFlet/gx2yQlEk2drS9XKSVBvI8T5Eg1cGvIyf1XzZnYywl0K5F6r+TLth3yYYnZBNvkUUC64AkUr6bHjY0w9bpOZmBXbv/HnsDUaupK0uXuvifqr/9oACAEDAgY/AI+PiiR+NMVgX6lZCKanW4MDqda1r1x8R5Fk9ayZStRTdja1mWOpqpDkWK5BoSAVJIr6A3FYRHB5GVBFKGZnqwnQMzEknzRwCBQaGgA6yeN9Q45MODHzExvyFZ2MssqzraqMSgQSR0VqEmhYChUnLyMDlF2dyIKrxhZnkMilWWaJo23BQsWKOxANSBU9ZuHzfBTRS5M15lUlw4tAFCQLwBVjazOCxqg6b3hPbkbLhyNxjtEhA1IxHYG3FLIRHQjUUooIqfXsr2PkLH2ntX6nZdx7Qq96UoBWg+K9cJnRSTQ8fLj7kBJMTmXdNSCpILx7SMBVtGqRTqP10zQye2R5KNFPGRbHtgs8zqA5SRVDK0YBqWDR0pauBhcjFHm72Zi5cRS5HuxmoIzVdUkSRgGCsQ4KnzV0XguX9y4E4nrEWRGlsbXiL7gaTdW4ssroLaSLGbFNq/VVsyLPRuIhJGOiCSSvw0zCJHo0mttxFsVtACz1gzrl/DliL7ilrdsIZPMAXUotwUqfICguHWFjZE7wZEeMjNirIo7M/iolcugKAOQqvbfrQEdcXjYmCy8JDjlNmB3YJaVKlgLCxIrqENCNWJNeouQiWQRK5WbU3MkilJDGGGrBWJBZgCRqKa9etcnx0MsPqmBFIsTOds3Nc8N18skiGSdpKTE7S1jCyFhU88k3NYuU2RIVw4oTFI2PjsAHV2glmiC2gqFLAqxBRCpLJhYBxWTLhiVWJ/6xaAtxKh3AIFT9s0Ndfnr+H3I/yvx7K1Nn+LrbqW6XW1+bfjrGhn4DEw+eSNtoqqkOn+8wyWqxOvmrBXAJNCvkYcLFIGTKCbjqERaXPT5NSFUfLEE6A9ZnJcXx8bckz3fcl0UKCzMsZBVtRqoApdWoUEdL6zJiY7QAOokIe/bcCsdL9qilUKHbuUolDRR1kLhwURiCK6uCKUNRrS4VpqCNKDqWDM41Yc0VV2C0enY+DFdf1BcHWor26MQwlDAasRIARTsqW1J/XzoP8aiSXDxsxsu4SRySCEOZE1S6vkqalSootrMLaE9Nz/NZTCWVhEVVGJiZVZxAV7q2jVZqXkgghLac1yuFi5M+LuySMQrttxkk1elQihe9aBQO9B1Dx+DGGypK2gsqjQEnyYhRoD3I/Tr1zPPMYb+3Rsm/ixOsysFdmBYpcA1u2r3MqmjW3E16xeU47hFw5RAqS0IpI6il1o0UKPFe5KhanTow/kNYf3+P89+3WLyGNjhZ3BVlLXESLQMFRLpGAqCKhagipFa9chyWSBDmQ0kDMw3ZmBoRJQ20CFtuMFivZSNVPJ4Gfw4n47k8QhkZit6SLRXVgGBoCR2NCWH7dY3L5vHnkuSBpsOAIFVtGL3A3sFJCKFK3EMW0t6y8zjPUMPjORk5BY49tEveBVvZrlRaeQUMBpqP167dV+OuUk9cw9/hpV+6rMqCFjqupNGCPco2y90dGoNKRf8A004OHIyhtu5VijDKSVNrlnZgqE2sVUlgh0p65+LmvLF+ORF4MqbHiYipajs1CQxdUY0UmNa06w5MflLedqdxWEpS3WlpEP1HT5IrdrShMd4fY1trWn7210/zT/XrQ9ZJkb71BYNf+Qqf07fqev/aAAgBAQEGPwADBKValn51dm+IhlcrK26lpnjBJU2V3X2WEQZ0sR7pSstlOfbu2dl3vey+/wBIopNR8ryjctZLAj51xu1uNkMK0PASncKhavY1nzjEQNnPku8lGML6ZWyjOzzwvPWMYonbnG1HyLanEMKXK/WqwjHYbK0j5AJ9q1pVDsR5Vc/TyzsIx5DnPped57rNJkwdLlm67IvnWu02sKaVPadnnlzJfmNKyNRLg+6DJWcVk2VEfeuvpNVfITplJlW2YLdutav0J7ipsgNl6NpWYDgJ0Szr22ebL3Br6sRXbbMoigi79VcuytrhHs478Afwll5kp3ejDaAB51jzRlCpVSQVatpjAykQrTcriKUeVYKWex+Sbd2Y8Y/jzlP9x1f9hUEtRjn/AFppuC4/QlVVXtqrcyuGYo+u7NYqbFLWNC34XxIjkC0UVRojONhF3p3mnleRd7Fvd/YT+yovnvl/mmf60Zi49N7pvVy2AaoL9KvJ49MPTAaBZ9wKsOPIVyuh/jn0uSa5fpMDDO1aTPioSWdATNdvsvuj0OgBg1QNGCNm1zTPG1Ww4OSXRLhHZ8/KHed6HnGYljLXDPgys1skVEIBS/hyaw2zWmE6Dqx9EFEro1wlcbI9sv5bV3nY9rqzeV9UzzAPTY1Z5PeuUbCtfmisz5/5/UXBDQbNVk83SMhsUvyOWSkCQT0qznOznZy2mvb06DOIWUtOpUZIB5VcepJxSOGiGZbjiARhM+DZ9rUY3wrayOqjJh1d4PGXJXV2lbl7sVUAQZ3C4VOCBo9MRQDzkhTX14eTRveiuHfey7X0ntcqVva+R5CVxHJJfSZEh15RvkzdNXsF5LOC27Jjob9ZOD0ccSDG4XoAfCqRCB5/+uqvsIcuhH7f2D/rj/R5smDxfq5CjQ7X0ZgF3WbnI+ptVDOe0xuR9Z1Oju4RoJZ25e9sEJFf2pyjrC41UfM+s1+SJsXiAkTUVgjyTt++4KzpNFPpcPrIcVsm7JnG2+UyPh2fhbX2Vl0pT5L6SXqvUwVOb8h2dBWW892Bzex4UVpT1JTdviAWufKo4jHNrqvM4U1GGhOq2zg8ufnOXNvqs6vTyXZ7N4ALP4/5Iy2CXKSsYjrBSL3+nPqJZvKLOyLmVfTT+cIwt72H3+vG8n5T5qk86XZq8ZAIzcAYzIUhBNE+eB/5d09zen0CZopDbri77WZt4N9dZf8AgXkITv8ApX5Xo6A2Y4qEYrM+jq7LLPPNdmhY1h1Pgj1FegaD2Vd5GJw8RSJB397zs51dqusu80r0CGehH8rjkbz4kG9UU3TGiBAOy/gX8lAaQlnBuX9G/LvO/s/X9v8AX6A830mNR4DS28L0GcXJT4m5PW9EpuFYaPMFfGW/MeBjMLKyuGBjtaarp9+1g8v2yW5lHZXS7e1mXfNur5fUlTAfogycTol38CCIWmU0DVS/1nfdGUudrhZz6WtCRTQLWuoFKOO5VzcnrahKCWN0kPmZ1sF+nmwZV00SEjV2NUyo2dj2iEq+pq8vrNRgkzQYzQgY9isUHbPGEkKjmKBW2eCtr818hqxzlhFg1C+2C3lUaYXWRhDvdz5zqEnnvp2B97xafZY3bU9m91SmlfbTJS0UaUQBe5SWJNgv7aSq7QUvj9u18j/tO6dy/FcwdPpvQ256jEMz6cwx2SQcqCrSSxpz9ksyNWsDI5TA1SzaKy5UWRupkRGq2NQXnE/6eepDPz52LqmpGN1sMgw7UGRfIUBnWsnmLo0QH72y2xzWNGMOy5OUO8nxvPPZD11o9LJD0Wb1uvp84o0turSctuz9jOZcIuEiPv7rB7h6JUDREKIq5VGNtnO27rb2OitS+OryheYUZxiQ3yjJaCc2hh703IzMXHUy5dO4guVVZM5xt/KA36+w0PpOyKGzDLIBbb1BC2/S2e6kfY5veodfj7dULmKm060t4i2wOgWyu4f4/PyhLvY18h5X6Vvp8d+kaP1DInehiU1gUwj3WgN+aTLIOMGS4IMTF5Xt4yzlxP2nIKPbJysunLudIE1KbR6T07fPkWO8aG11Li/z6vb+hM9DjunTQHN86DSCWcJSwGlZwTvLiJ1fIs7+7qHXegef4jKVasXM5oQHzna3x0FG0DvOtP0QKaaVerpDTJhuXz7VYRDosIct5K6FcfrS/wBcOf2Z9VDWnFoAbir9KedczxU0TCheUC2L7fpUf5Z9QYFcEIfQCQwBjbZCUe95JNoFqIETRl8MUsw7GX8nGvQqo0VsZJc5nq3OtbAT+XQUP+0YSNgpVMpWwjZGfXnoBHyc1s8yWkajMLnIgG327OVlQjQJ4UCxgpFp/wCfZmjr1lNhnRa5crhL8O20WvtZ5LPI+PMM35tPK+3ZDWp2WdhqgXy8QJPoVpOeu0BBrL+U+YMs7XEsi3pM6pwrlyH156s9Q8MzyHP5/Po9Kaj9Far4Ittsa8/YHY3ccDqavqJFxOv6Eu4vqoDsI/eURbOqA30vVi+Z+VYj03zX0HH6o+/AVWXBLsyAoq2c4vmc0Ki/9603+OgVbTT+nkTKZcl9pS+0t/sys/DLXaGnz3EJTzv4srOZ65QDqztF0mBbVFKluturONK/dXOyEQh5QrlyqHWXqRJPR8UlUJsmtd2rWHPnlwIecOaUj/F6dIGk/TQCrt/VyEfwvn9/1d/P6emeNYenTAkJaQ3Sdk5SJlYGYb2Gn4xv8y5pON1+Ra0ELxqqpzvOT3Qu/Hv+n61V2+tEa6VvogxRw1kiVinI20uV5PWAhLAUylw+NcVjjd/ONn6Kpys5TOP4/iLLOvNwa7qRsrMrTmANGOFe5gVXPJDXXCVcMvus/Mmvtp0BIdjD87IVw7KH1l3EcHpvRcj/AAjqlbkfWn3nmfd/xRFwtikzQOCjlWu5rgIRrhyDWzsrOSv73nf8S57iDrcxptTuLXOhv9PdHnJFexoZEC3f9OEzE0DUS/goDLl/QprqblshpVRo7ZGEJ2AMfen7ip9a6QdzmcuHzxCwK78vMK/te5zCkVMeRJVLN2G/Hro7H7Dxl2X272XtjH0ZvbRvBsbgV39dUNtOtkEw1xHoAhfqD+m1Iutx9ZoPmdVwtcHhtREqrSZAjz7yy2P/2Q==",hS="data:image/jpeg;base64,/9j/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////7gAhQWRvYmUAZEAAAAABAwAQAwIDBgAAAAAAAAAAAAAAAP/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQEBAQEBAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8IAEQgANgA2AwERAAIRAQMRAf/EAMEAAAEFAQEAAAAAAAAAAAAAAAoABQcICQIEAQACAgIDAQAAAAAAAAAAAAAABwYIBAUBAgMJEAABBAMBAAICAgMBAAAAAAAGAwQFBwECCAAQCRESIBchExQKEQABBQACAQQBAQUJAAAAAAAEAQIDBQYSBxEAExQIIRUgMWGhIhBBUXGBkVIWFxIAAgECBAMGAwYCCwAAAAAAAQIDEQQAIRIFMRMGQVFhcSIUEIEHILHRMnIjwVKhQmKCktIzU2MVFv/aAAwDAQECEQMRAAAAMYqXYNAgpPs5PhlJ3jsnHVBolp4Mz9hw6g8MusflIw2s2rmVWMnlRDB0wqw2ms/JyzvWZZHrNoNFU0KyPfUgtjK+ZulKsl0Te/s4c4rzx2jEyBQGi7L5M+kJH1VnhW/BlaOfF19Yqy+g2FvoFFuzhhWFG7E8HKBBFu70w019U1EFQPqHbkRxKKuVaBAgrPPtI6tFb0q2ro//2gAIAQIAAQUA+Y+JdyGdRRnrmTh1o7Pt9N084xnbMYPfrhjDuVdI0mVfGU9B6Jx3tW8dLMmYphtlrDtWOJw6apapw+qsgcScpu18s6cuNUHjtt5d05c5a74TXDYd6zfuRpScHv21/OHanv8AqU9lyrn0Y2fSsiVDiIjLzp3BPAf/AD+fkamcj0/OXGCz8O1cSBDNOoJqiRfwGdTHZCEYkmrnCEHjT//aAAgBAwABBQD5FA0kNpCF5mn340c1yWV09+M5/Hqi55mz3Fi3rT9URF0WXIwIUSdFf2sJ+O3OXddgpvyyK7292CQmLWIFHS68TGO5ivRqHbo6+UcLrabopKe0TTTw3X3ar2hGkcZV8eYLwEthJXOmw+0z7EA0x7WDY6+kEoiLjqvLJe1KuI+cLBrM3/XX8fJFEYn4KluLr2XmE0iF1HLg0kgd/wAHaqKa5VNEeEpoq6OcF/8A/9oACAEBAAEFAPnrXvvnvjyMIv8A0C3Y/keGvsbqjtKO9CkEASNXbtowa95/co3il4ngLqq8aurzkUdMA+gOSbxojsb3Mf8AYHNnal0DH2V9m78vfXVStJERMVvpGriy44OtjOmeixDpzorwDTdS1bLGdQ1DZaolXoAANepaveXNz5xZG13aXVP2BlRLXH2RbyUem6Tt4i1xvbpDny1qlamtm3dNV8Cg9kyYO7rSwI/oG0/9qn7/ADdddrWvV95EyDdicwQRVQNXXatjFX18/wAC9jQUgYgIRVmpyD1n9WjCyP/aAAgBAgIGPwD41jXTDXN2yHkO1j4CvjTAikupWm7wFUA/PVWnbmMcwPzLYmgYClO4MOwns4g9/Z8KOhU+IpgACpOFn3EZ8RH/AJ+79Iz76cMJPoCQoKgUpkM8gOA7u/sBxYbK0Sx2pWVZQXjLczSxABQuOCsQlVegZ2CqoDX06zNyEiYla5H0nTXvo1CK8DQ/CNt5lWFyFapNAGbsDdgbiR2fKuBJYQxNXg+rUaeBPD+6AcG53CdPTn6jRR4mtK/Og88Gw2Mc+7f06qekE5ZfzHyy8cWe+OzLuCKFZVIKLqP7mkFaDmkDU6+rIKGA4x2nsXiszTWxI9RyyyJyr2njw+EaTzs6oKAEkgeQwfb3Ukf6WZfuIwDcXEkh/tMW+8nCFnKqagkcVDAqWHEVANRUEVGeLi53HdPcu50gCojVc6Gh4uaDM10gAAsSzHqu6v0EdvAgFu1c5GETu+XCiOYge0fMYArnjNRj8ox2DFlt1mC91PKqKB2liAMhi0tIrHkw+2gbTqBUuqBZVDgvSrhqVOoA8Bjf/aW/t76K0ZFgrUKK09B4uWfQzsasQrsSPSF8fsbRvYtxL7W4STQeDaSDQ+eIo73pO4mhkjDiMmJIwzLxWRBzMvMV7QMS3a2E1hs9rOzRxksDKG1BBITQlESjkD0lmCmpjNdtvUQGwlLahTIOEdgacMyte7UCafZUbVJpsK5GWnL8aagT/hxHLu292ptxxjjjY6vAsVTTQ91e7Dc29BBuKpVWAU1qVGWdRqFeGknxOP/aAAgBAwIGPwD4nbemtre4nUapGyWKJO15pWoka8aajVqUUMcsXXU+7dTW1lZhNcIEMkzTpQaGA1wsglJAhXS0j6lqiltOLWy6o28R89NUciHXE9PzKrgU1pUa0NGFQc1IJ+FTwxb771EZNv6TJBU0pPcr/wASsPRGf95h6hnGrD1DcPpZ0VaCW/lhlt3NpoMVvJIhjLTTliZZlJBkC62FCHdWGnG5t05BHD7CCB1BaGQrNFcQSQ5LzVZQsZIiOl2UOzqqqNcPT3XG0mPqOCQPaT2x0xvJqQOs8LBqVj1EPG60PAUJBx9M+o+o+koo4dDQCS0MUV1PDEAsckilW1KVX0DTWoZi6CQKYd43r/urzeY/UsN5bKyI4/ljiPJdh/VMrMARqAU0xP039NNun23ZZEKPOae7kU5FUKEpboRkSjPIRwdMwUutyquYogzYmuQy+7iTiLpL6i2U9j1BcbDPFaNIUKSxRxVZWFCIrpdMckoakjxIrKcpVV79ZxKQxUEcF40B7iQD50NOB+EMUs7tHGulASSFWpOla8BUk0GWeP3IlbzAP34pGgUeAAxBdRV5sTq60JU6lIYUYZg1AoRmDmMSbx1B1Pf3VzusMLwSNMJlZIuWRpYyOUQJJpZvTJKzMrRxhCZNp2nbjrW+BFypWqovMRYznwYgSFCM9Q7gRhpBGeWOJpl3ccemWQfMfhjOWT+j8MZh28z+AGLy/u4kS1giZ2Y9gUVOZ/ji62zcNwlvdt26+uI6ouua3t55UlicQEoxQaCCwAh1HSWBYV6WvN5cbh0nf3Ec0O4xqRHNqTUBKpzgZIi6rEwVQWQJqozHTQafsbvspuGiF1bvHrHFdakah5ccWfVHRP1Q2jbpo5ae5W4nN0gU1o8GlgD2EUK1qNdKnG2dO/VfeheWMUD6WNuttLc3aJphdYxUNxDqgUkzPGpDaWGLHaP/ADAaS4uJALPnDlrLGglePmU/0dDxziM8YXNuHqpcfYdrO3u5L/tFsSH+dGVa/qNeGOVB0dvTOW/PcXEaAHvVObIGJ7ASp/j0g1n9Lnt9+g6bkinHvrF57pm226jS7B537MyQOk7Q1M7yRKhALqh//9oACAEBAQY/AP7UZ2FoZL3eGCuJpersg4Sz2Z0PFVjOsh5CYQ8zSvcn4MsJYI5OLkhSZ7VZ6/WMZ9f+sM9i4XyyMr9bf6vUaa4C/oQZ8NlTSZOvp5ifzxaoRqu5N/H+M1INXE9c9wU9bEff9bXZwpvyxkYxDLfG3MPst0dMJO/hLyhGLHVUWWBGOZI/047O3dRfAsnlGeZS2QVoKwmBysnHcQDNPC2eF6Kj2KvJqp4VPRBxxQ4QQcEpJZhc0Ywoo0DFkmIIImcyKCCGNquc9yo1rU8qvj1e9RfUA4S0sIffq9F3qscZdODOiOiKE6zFma+C7Kgd5atxM1wLXIqisITjM3tvvW9B0ch1d19puzbCXVJZ2m40VWJQmXjNFfE25ArKcG6AGfIC44r9TsouMwIRI3KZmKSwtr+xM3/a3TWfzJ2Yp7Spc/I6fbZ7O2DwHa+rrwRrCQy8EgbYTinVMRcw0Ebp3TSrBltR19bZPb5jqDt/6zs0uoqrGQK5FwffuxByJsQMd5VUL7mevIlOzmhiFgGOGIV7XBsjSf2fXefWP1X7e0iZuuj22dz8wvUV72oPsAM1cixqTr8ZT2QMURGPe2WCC8c6KMj23Pa6NpaDvMxVr2nn91hAz2wWeY6yFus/mmyx+HtftstmcwZqJpBVa17gbRS0gkVHMjVUR3qo0X2D7DxFl2CKTCfUVWlRjqmhmFlY5kmO6PmSbtbuTXxzIiwss6arpBH+HPgsHIkPrU5TJh3fQn16ZS39x273l2r7YHbO+qzQ5Xa2ypqC1SQ3KSXNckiE3t/GOaJFxhBqo2tgmg2HX3SVjPc9X1nYf/ceotXdVNlSae0jx1k2y6+nsJHW09iS7CeHNAGK4wkI9S5RkmdwhSDcGZXrfYZakot5jfr0Tib3Mbq5ujMyZXE9s6jUaXPZ2PsKEMQ2ybRD17SIK8WeQmSSSVGOg9aq+6863xuNu9xZSW2vuc7QV1ZbaI+WWUh0trYDwMLLY0iZ8jY3P9pj5Hua1Fc5Vhn7E6u643047UYPLtcRmdTLAxFVUZC+9rDnxNRVVfDVRPz6eDhMPj8UFIrVkDyWZpc2K9WJxarx6cIOJytb+E8p+E9drdb1sqR2uhypL6eN8b5hjrimnHvqmqPhinFllq7ixrIhSmsljeo8z+Lmu8Kn17r9D9esfJ1NSdq03WvYub7HEE0Vzb6zsfMbCkpUaIkHxgx8poqyQlOSRPlsFbI6GJscUUPUO8N1ox7/AK83/VmUz5QUtRFqrvBXL7I61y2nIqJZGFnjxaj2iklHEmWuLgR7FcR7skILzRWmEcvZFWeJCJeEbpXqyHl7io2Niqq+PHhPXiQKok/ikJca/wCvgxyfy9LxBqG+f3cojHeP9jGIvpUjeAKv/KARVVP8vkTTt/l61+7u9JbxA52iPsZIwJYYyiZ44XNCArBlSMZ9nYnPjgGZ4TnPIxv9/rtqmqd1/wCYfYuz3XXv2O647C35udtKXS7KjoLFmwyllobKe2p6LQ2t5PZGVhJrfj/OIjRfa/HnC1eptZgtbuewMp+o2F7dfLiIqptnX6LRnBX9nJGXaaC6OhGJJkKV5hDRyHq5UdDFH73uP9zzz93mvPz+/lz8+fP8fP7GtwIx4taVfBCoIWeGthXIZXWIdsJBZBtkhknrSyQGxENY9snsvdwVHePTc/uugreGEYixgC52ldT5oW8qyzKOxJrL3O1qaGIsUsWRFgleNLx4rLC1HN9Poqa0pu0Np2ZQ/DKsBQhLlvW49fMDZGNzEwjSmLe2ll5rYipE+XGODJPGrWmtRn2C6wtby6F7g6wrcYDltA20nZa3HX+g7IweYuA1veXyJDqSt0bhpF5+8oBkLUfyY56fsXA5lzd0WvfOMmpPwEXYk0ER3x4/irtWYSquM2tp8Thw/VoXEe1x8f08fWUKxPc3aqakHW5Q9tZeZrv03A3lWDcizX1DdkWuLpcXWjXlI0qBCpH+yNO6ORfLGqx3ddqX9kSL8G/+y2Mu6jLwdd9l1mHwU9d2FQXFhiSLCLJpR6Wl0UrG1E9jIQtKKBIFMviRkU7v/9k=",dS="data:image/jpeg;base64,/9j/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////7gAhQWRvYmUAZEAAAAABAwAQAwIDBgAAAAAAAAAAAAAAAP/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQEBAQEBAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8IAEQgANgA2AwERAAIRAQMRAf/EALwAAAEDBQEAAAAAAAAAAAAAAAkABggBAwQFBwoBAAEEAwEBAAAAAAAAAAAAAAgABAYHAQIDBQkQAAAFAwQDAQEAAAAAAAAAAAABAgUGAwQHESESCBMUCRUiEQABBAECBAIJAwUBAAAAAAACAQMEBQYAESExEgfRE0GRobHhIjIUFvBRFWFxQqLiCBIAAgECAwYDBwQDAQAAAAAAAQIRAwQAITEQQVESIgVhcROBkaHBIxQGsdFCciDwUhX/2gAMAwEBAhEDEQAAACrmaA6wks3Gr206ZUziqTxb89PHpYIsWTghhEJ9O2XwApJNhg5ZZA3c24hAE0/Rg1/bbp7s9rjJJJdADNF988XJx5+LsRvoizYpP+ocHWB04Ti219KRx/LPd6twfDQZkWanJTH9XxoEtfROxY1KmMJ4EdnppyrypDw2AW8HGtL1mdNKvL/cY0ZDhlmab0SSSSSSWEs//9oACAECAAEFAOZDmQOokiU5WCFFUSouZDmQ5CTSawjDbI55IZJU5rNTBOX+NVInMm2WWnIhyGTHe5cJXqnkZkpPAlCAPK2eU8jGpCVW2kor0eCiNJKJZJO1VUVc8lePUZ8gdF9sI01U2Jor000yUQxtGbh2euQ1MPTPZvzfd4qZfTVjWYLqMuI0U1Wtrb2NvqY3G43G43G43H//2gAIAQMAAQUA5EORAj1NDc41EmZpPkORDkIbEHWavEQxbFIhS8dIkSnGcXmNKdwB5gd/yHIYTYLNqgfFRIIjSryqpjLccpyCC8iGogV+ZwWzuTqIWlaqZ0lLK/RRRYa0/NuOsORDs6sxeriTPlpXqVzQrQZunVnHYzqY1IRiTucReW7sHKDckZzxpSoSjsfUrU3BxvXW71IbD+RsNhsNhsP/2gAIAQEAAQUA/PUPz1D89epNF0ojb1kZWCjH56h6RiQOjLFGbMn0MeXK+qdts/VLfEPfe4otUSkcdnTH6Rj1B9DM5qmMq9K/pNFjkRb1jfHMagE+b/ntmS5q5G9QeAfQ2ezCCdrMOT+7lrc7tTxXbIfWdWGUdPq7hVzz6+3iIfRrEzjhDN/Q+7xc25J7q4RguDI8236qdP5j9da7VaeFI8QzThaF56x9COkOGMWwDI3QnvJlafdaflKwQt2tG+1sLbxDRI2GiRokaENEjQh//9oACAECAgY/ANkkwMBXvaQY7i6j54BUgg7dcVL+9eXzFNAep23AeH/R0A8YBIuLk07OcqSSqjzzlj4sT4RgTUIPnij9retUs5zpOeZDxgarPFYz44Na1Jp3aDrpE5r4g/yU7j7wMa40xfUatSbe2b00XcAAOb2lpJ927ET04gxI0x0nrjTccdurM/LQqv6b7hyv0yf6mG9m38g9UdX3dQ+xm5h8CMQM8GNMAzi3VR1BxEazIxoPU5fjH77GuvXanbXT01rcs5vTIZOYAqWSoqcjqGUwBDAmRY9q+5qV6duhUO5JYyxaMySAoPIgJJVABJicLn1n4YBGoxQ7nWokdvtnDEnQuuaqJ1zgndyzOoxrsrdtv1b7dyDKmGBBkEGDmPIjFdO31qy3RzUuwZZG4gKMjpM5a56YQGwTq3+qkLug9U+4H9cUq/fL8PGZp0wY8jUMHzhR4Hfila2lBaduggKogD/d51O/Zps0xpjTGmNMf//aAAgBAwIGPwDYABJwXTt9dkG8IxHvAwVYEEY020u1dtQhJBq1COmkk5seJ3KurHgJIVrazFfuESa1UBnP9coQeCgeM4MUVInhli4+87clHuMdNekOVxwJMQ0RmrTlpE4W3v8A6ljUP0qyjpfwI/i4GqmeIJzjZ2y6o0YvL1DWqNGbFieUeQUADdv3nBMQ/wAscwnlMg5+4+/9cdaj0p1Go8fLj88d4oU6fPdW9P1qe9uan1QN8svMvtxps/EPt2Hp/wDn0QfNVCkewqcSTG7wnALHMYKxkcXzueg0mmdIg+zjiJ+lzfCf2xpir+N3dD1Li0p1aluZ5SKdTJwrQ3K9Oo4qISrA8zBgQIxfd6NrSoV7p1Z1pgKsoioXIAUFnK+pVYKoaozMFWQMPl9IZTxPHz4+eCpPScXXYrW5B7xe0ygUHqWm0q9QxoIkLoSxESA0b9lt3ztDoLymGEOCyMrCCrAEEgjgQQYIMjFpV7zbWz9vHS4pIyPynVlYuw5hrEQdMpkVCnd6p5DkPQq8z5TI6YzOXUVzB3QTcWv4p2g0pELXrkFhxIorI00LVDnmV3Gvf9xunrXlRpZ2JJJ/bgBkBkBGzTGn+X//2gAIAQEBBj8A5J6v+dLwT+nD4a2RN/24Jv7vTpVGO6qJ6UaJU9aBtrZR4/28U19Pu8Nck9Xw19P69erDIsjnx6qlqo7kqdNkuA2INtgR+W15hgjkh3pVADdN15qiIqpNpe1cMKOljxX3xyEzkuSJ7bZK35gzI320hGxVPpb8oV9InwVXbQ80m2DjU8k81WUWMw10AYE2pJ9wSESqnURIQ8l47axKRmb55FTzwcpsjGwfgfkuP5DXhEclyYxx33rObjljHmNvRJL7KAJ+dG6DJgnli5Fi1izZ1csQJDBRR+OZgjgsy2gccRtxWyQhVCJtwfmAiTjr6fZ8dfBdWXZvFLkzqMObOPk0aMMqIj2UuApOQ5TzoBHlNw21EPkUxEt+KKq7vyxjKxZiyMQGmjUxbhgTfWrDKEYtuOCKquyqqrxTiuskwrNpbcgaOuqpXbqUVSJWkSyjWcKunYw1ZxG2Sap59JOemvJLV0Ufrm0b6TdNTr8LrbjJKXuZLN1+mZs24DuM5JfEjjcahqrCGbU+ltJzKC3DSSzIYkyyRs3GUIS1a9u7efGfavoDqxhZaiQ2I06ACONRxhQm48SO4T4dLYA2PzSHeHHXL/X4a/XjrvRjVcQQW5PcDIbyQ68wjpSmrCzkPwWkRz5UYSEQFwTdetOPDSF0+TNI3q6RFFTcYGx8lHIr8YF6zFuQpinTxXfdOOyKrK2Kok+E/IR1pwm2jVs1FOkvobR0CDlw4cOfDWPZDEiSUdobqrum3PNegChVc1iaipPAeqMqqzwcDch5oiqmu28SocR2AucycjJptuK6YyLZa2NMJbBthJ0mOpwIyIDrptt9JEKCpmpc1/Xt16ddvP8A3H26gUsi9RuwwPJY1xXxJzce7tsVsqWoyaB/IQrSFEuWaVpRiyXYslqLLhtETDwuuBrv73+7t4vVNpcRo9dj1BV4vInY25lOWRnKxceqnUr1rW8qyGurTaEnlirMcnyjEABTQcFp/wAhmTO5+WyfyqdhbboSqPt1jb7Vqkykp5jhu2jtM5bSI8aAMt15dq2Q6CgrziE9XOuEEKd0tuEK/MwRKiI6CKqCoryNP8h0/wB6L6Gv2UqAVbghvjsUpmQ6Z2t6Ib7i2ZAjLO/7ESchXXL2a9PrTVv21z5mwcx+3dhSSfqZjcG1gza6SEqHOr5TkeUy1IZcDb52nAICISFUVU1eYTilLY5HW2WSx83kVOb2UK3g317TVzsahqrlP4lmM5Qw5Si8LaskQvojhKe3TqVluU4PQfyGQjHVXGc2xgKXGq2AA1lVRNNrbyJbUKorIjQNC2kkia6SIzdVzULMO/8Ac1Ge2EQQehYFTMzPxSLNEwcbkXVnKKJKyFGUTb7X7ZmKpb+Yr4fLpiFBjMxIkVptiNGjNtssMMNAjbTLLTYiDbbYCiCKIiIiba9PrTXP2Lrmnt8Nc/f4a5+xfDXP3+Gvq9i65+/w1//Z";var pS,vS=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=c((0,t.useState)(null),2),a=i[0],o=i[1],u=c((0,t.useState)(!1),2),s=u[0],l=u[1],f=c((0,t.useState)(!1),2),h=f[0],d=f[1],p=c((0,t.useState)(!1),2),v=p[0],y=p[1],m=c((0,t.useState)(null),2),g=m[0],k=m[1],A=(0,t.useRef)(null),w=c((0,t.useState)(""),2),b=w[0],I=w[1],x=c((0,t.useState)(!0),2),E=x[0],S=x[1],T=function(e){var t=e.pageX,r=e.pageY;n||(t>8960&&t<9030&&r>63&&r<115?l(!0):t>3835&&t<3915&&r>1455&&r<1545?y(!0):t>195&&t<275&&r>2935&&r<3025&&d(!0))};return(0,t.useEffect)((function(){s&&v&&h&&(r(!0),o(A.current.getTime()))}),[s,v,h]),(0,t.useEffect)((function(){return document.addEventListener("click",T,!0),function(){document.removeEventListener("click",T,!0)}})),(0,oS.jsxs)("div",{className:"App",children:[n?(0,oS.jsx)("div",{children:E?(0,oS.jsxs)("div",{className:"end-overlay",children:[(0,oS.jsx)("h1",{children:"Congratulations!"}),(0,oS.jsxs)("p",{children:["You won in ",a," seconds!!"]}),(0,oS.jsx)("input",{type:"text",value:b,onChange:function(e){return I(e.target.value)},placeholder:"Enter your name"}),(0,oS.jsx)("button",{onClick:function(){null!==a&&""!==b&&sS.collection("highscores").add({winTime:a,playerName:b}).then((function(){sS.collection("highscores").orderBy("winTime","asc").limit(10).get().then((function(e){var t=e.docs.map((function(e){return e.data()}));k(t),S(!1)})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},children:"Submit"})]}):(0,oS.jsx)("div",{className:"leaderboard-container",children:(0,oS.jsx)(cS,{leaderboardData:g})})}):(0,oS.jsx)("div",{className:"hidden"}),(0,oS.jsxs)("div",{className:"nav",height:"150px",children:[(0,oS.jsx)(uS,{moonIMG:dS,majoraIMG:fS,miphaIMG:hS,ref:A}),(0,oS.jsxs)("div",{class:"objects",children:[(0,oS.jsx)("div",{children:"Objects to find:"}),(0,oS.jsxs)("div",{children:["Moon ",s?(0,oS.jsx)("img",{src:dS,alt:"moon",class:"found"}):(0,oS.jsx)("img",{src:dS,alt:"moon"})]}),(0,oS.jsxs)("div",{children:["Majora ",h?(0,oS.jsx)("img",{src:fS,alt:"majora",class:"found"}):(0,oS.jsx)("img",{src:fS,alt:"majora"})]}),(0,oS.jsxs)("div",{children:["Mipha ",v?(0,oS.jsx)("img",{src:hS,alt:"mipha",class:"found"}):(0,oS.jsx)("img",{src:hS,alt:"mipha"})]})]})]}),s?(0,oS.jsx)("img",{src:dS,alt:"moon",class:"foundMoon"}):"",h?(0,oS.jsx)("img",{src:fS,alt:"majora",class:"foundMajora"}):"",v?(0,oS.jsx)("img",{src:hS,alt:"mipha",class:"foundMipha"}):"",(0,oS.jsx)("img",{class:"waldo",src:lS,alt:"zelda"})]})},yS=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mS.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(pS||(pS={}));var gS,kS="popstate";function AS(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function wS(e,t){return{usr:e.state,key:e.key,idx:t}}function bS(e,t,n,r){return void 0===n&&(n=null),mS({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?xS(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function IS(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function xS(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ES(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=pS.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=pS.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:IS(e);return AS(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(mS({},c.state,{idx:h}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(kS,p),f=e,function(){o.removeEventListener(kS,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=pS.Push;var r=bS(y.location,e,t);n&&n(r,e);var i=wS(r,h=d()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=pS.Replace;var r=bS(y.location,e,t);n&&n(r,e);var i=wS(r,h=d()),a=y.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(gS||(gS={}));function SS(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var TS=function(e){d(n,e);var t=m(n);function n(){return k(this,n),t.apply(this,arguments)}return b(n)}(x(Error));var _S=["post","put","patch","delete"],CS=(new Set(_S),["get"].concat(_S));new Set(CS),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");var NS="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},DS=t.useState,RS=t.useEffect,OS=t.useLayoutEffect,PS=t.useDebugValue;function MS(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!NS(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var LS=t.createContext(null);var FS=t.createContext(null);var US=t.createContext(null);var BS=t.createContext({outlet:null,matches:[]});var VS=t.createContext(null);function jS(){return null!=t.useContext(US)}var qS,zS;t.Component;!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(qS||(qS={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(zS||(zS={}));var QS;function GS(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?pS.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;jS()&&AS(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=xS(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,A=void 0===k?"":k,w=p.state,b=void 0===w?null:w,I=p.key,x=void 0===I?"default":I,E=t.useMemo((function(){var e=SS(y,h);return null==e?null:{pathname:e,search:g,hash:A,state:b,key:x}}),[h,y,g,A,b,x]);return null==E?null:t.createElement(FS.Provider,{value:d},t.createElement(US.Provider,{children:a,value:{location:E,navigationType:s}}))}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(QS||(QS={}));var WS=new Promise((function(){}));t.Component;function KS(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),ES((function(e,t){var n=e.location;return bS("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:IS(t)}),null,n)));var u=o.current,s=c(t.useState({action:u.action,location:u.location}),2),l=s[0],f=s[1];return t.useLayoutEffect((function(){return u.listen(f)}),[u]),t.createElement(GS,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var HS,YS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(HS||(HS={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(YS||(YS={}));i.createRoot(document.getElementById("root")).render((0,oS.jsx)(t.StrictMode,{children:(0,oS.jsx)(KS,{children:(0,oS.jsx)(vS,{})})})),yS()}()}();
//# sourceMappingURL=main.31aff0ce.js.map